!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CombKline=e():(t.okui=t.okui||{},t.okui.CombKline=e())}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e){t.exports='<div class=okline-settings-container> <div class=settings-title></div> <div class=settings-content> <div class=settings-names> </div> <div class="settings-params hide"> <table> <tbody></tbody> </table> <div class=params-btns> <div class="params-btn reset-btn"></div> <div class="params-btn confirm-btn"></div> </div> </div> </div> <div class=close-btn> <i class="iconfont icon-cancel"></i> </div> <div class="back-btn hide"> <i class="iconfont icon-Unfold"></i> </div> </div> '},function(t,e){t.exports='<div class=kline-core> <div class=draw-line-box></div> <div class=canvas-indic> <div class=canvas-group> <canvas class="k-canvas main-canvas" style=cursor:default></canvas> <canvas class="k-canvas overlay-canvas" style=cursor:default></canvas> </div> <div class=indic-tab-box></div> </div> </div>'},function(t,e,n){var o,r,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n,c){"object"==a(e)&&void 0!==t?c(e):(r=[e],void 0===(i="function"==typeof(o=c)?o.apply(e,r):o)||(t.exports=i))}(0,function(t){"use strict";var e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function n(t,o){var r=e({},t);for(var i in o)"object"!=a(t[i])||null===t[i]||Array.isArray(t[i])?void 0!==o[i]&&(r[i]=o[i]):r[i]=n(t[i],o[i]);return r}var o={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},r={width:800,height:500,interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function i(){return"1.15 (internal id 37fbf462 @ 2020-04-24 15:44:13.516973)"}var c=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=n(r,t),t.preset){var e=o[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,n){this._innerAPI().changeSymbol(t,e+"",n)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,n){this._innerAPI().saveChartToServer(t,e,n)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=n(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=e,this._iFrame=n.querySelector("#"+this._id);var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){o.addEventListener("load",function e(){o.removeEventListener("load",e,!1),t()},!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,n=t._readyHandlers;e<n.length;e++){var o=n[e];try{o.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var e=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.1c7535a2aac5ec511ed5.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=i,t.version=i,t.widget=c,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){t.exports='<div class=k-toolbar> <div class="hide icon"></div> <div class=periods></div> <div class=main-indicators></div> <div class=main-style></div> <div class="technical-indicator icon-button"></div> <div class="line-tool icon-button"></div> <div class="compare icon-button"></div> <div class="setting icon-button"></div> <div class=fullscreen></div> <div id=k-toolbar-right> <div class=price-type></div> <div class=toggle></div> </div> <div class="popover hide"></div> </div>'},function(t,e){t.exports="<div class=kline-wrap> <div class=k-toolbar-wrap></div> <div class=kline-body-wrap id=okline-wrap></div> <div class=kline-body-wrap id=tv-kline-wrap></div> <div class=kline-loadding></div> </div> "},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,o||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=n.length,i=new Array(o),a=0;a<o;a++)i[a]=n[a].fn;return i},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var c=r?r+t:t;if(!this._events[c])return!1;var u,s,l=this._events[c],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,a),!0}for(s=1,u=new Array(f-1);s<f;s++)u[s-1]=arguments[s];l.fn.apply(l.context,u)}else{var p,h=l.length;for(s=0;s<h;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,e);break;case 3:l[s].fn.call(l[s].context,e,n);break;case 4:l[s].fn.call(l[s].context,e,n,o);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[s].fn.apply(l[s].context,u)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||c(this,i);else{for(var u=[],s=0,l=a.length;s<l;s++)(a[s].fn!==e||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u;var s=u;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=0,this.context=n,null!==e[0]){for(var o=0;o<e.length;o++)this[o]=e[o];this.length=e.length}}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"addClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.add(t);return this}},{key:"removeClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.remove(t);return this}},{key:"hasClass",value:function(t){return this[0]&&this[0].classList.contains(t)}},{key:"before",value:function(t){return this[0]&&this[0].insertAdjacentHTML("beforebegin",t),this}},{key:"after",value:function(t){return this[0]&&this[0].insertAdjacentHTML("afterend",t),this}},{key:"beforeEnd",value:function(t){return this[0]&&this[0].insertAdjacentHTML("beforeend",t),this}},{key:"afterBegin",value:function(t){return this[0]&&this[0].insertAdjacentHTML("afterbegin",t),this}},{key:"append",value:function(e){return this[0]&&(e=e instanceof t?e[0]:e).appendChild(this[0]),this}},{key:"replaceWith",value:function(e){var n=this[0];return n&&(e=e instanceof t?e[0]:e,n.parentNode.replaceChild(e,n),this[0]=e),this}},{key:"clone",value:function(){return this[0]&&this[0].cloneNode(!0)}},{key:"each",value:function(t){[].forEach.call(this,t)}},{key:"empty",value:function(){return this[0]&&(this[0].innerHTML=""),this}},{key:"find",value:function(t){return this[0]&&this[0].querySelectorAll(t)||[]}},{key:"attr",value:function(t,e){return void 0!==e?(this[0]&&this[0].setAttribute(t,e),this):this[0]&&this[0].getAttribute(t)}},{key:"css",value:function(t,e){var n=this;if(!this[0])return this;if("object"===l(t))Object.keys(t).forEach(function(e){n.css(e,t[e])});else{if(void 0===e)return getComputedStyle(this[0])[t];t=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}),this[0].style[t]=e}}},{key:"on",value:function(t,e){if(!this[0])return this;this[0].handler=this[0].handler||{};var n=this[0].handler;return n[t]=n[t]||[],n[t].push(e),this[0].addEventListener(t,e,!1),this}},{key:"off",value:function(t,e){var n=this[0];if(!n)return this;var o=n.handler;if(!o)return this;var r=Object.keys(o);if(!t)return r.forEach(function(t){o[t].forEach(function(e){n.removeEventListener(t,e)})}),n.handler={},this;if(!o[t])return this;if(!e)return o[t].forEach(function(e){n.removeEventListener(t,e)}),n.handler[t]=[],this;n.removeEventListener(t,e);var i=o[t].indexOf(e);return i>=0&&n.handler[t].splice(i,1),this}},{key:"html",value:function(t){for(var e=0;e<this.length;e++)this[e]&&(this[e].innerHTML=t);return this}},{key:"closest",value:function(e){var n=this[0];if(n)for(var o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;n;){if(o.call(n,e))return new t([n]);n=n.parentElement}return null}},{key:"parent",value:function(){return this[0]?new t([this[0].parentNode]):new t([])}}]),t}();function h(t,e){if(t instanceof p)return t;var n;if("string"==typeof t&&(t=t.trim()),e=e instanceof p?e[0]:e||document,t.nodeType)n=t;else if(/</.test(t)){var o=document.createElement("div");o.innerHTML=t,n=o.firstChild}else n=e.querySelector(t);return new p([n],e)}function y(t,e){if(t instanceof p)return t;var n=(e=e instanceof p?e[0]:e||document).querySelectorAll(t);return new p(n,e)}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}h.ajax=function(t){var e=t.type,n=void 0===e?"get":e,o=t.url,r=void 0===o?"":o,i=window.utils;return i&&i.ont?i.ont({url:r,method:n}).then(function(t){return t.data}):new Promise(function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t(JSON.parse(o.responseText))},o.onerror=function(t){e(t)},o.open(n,r,!0),o.setRequestHeader("Content-type","application/json"),o.send()})};var _=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=g(this,v(e).call(this))).el=h(n.el||document),t.kSettings=n.kSettings,t.kConfig=n.kConfig,t.kStorage=n.kStorage,t.kState=n.kState,t.render(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,s),function(t,e,n){e&&b(t.prototype,e),n&&b(t,n)}(e,[{key:"render",value:function(){}}]),e}(),w={calcDecimalDigits:function(t){var e="".concat(t),n=e.indexOf("."),o=e.indexOf("e-");if(o>-1){var r=+e.slice(o+2);return n>=0?o-(n+1)+r:r}return n<0?0:e.length-1-n},safeDigits:function(t){var e=Math.abs(+t),n=this.calcDecimalDigits(t),o=10;return e>1e3?o=2:e>100?o=3:e>1?o=4:e>.1&&(o=5),Math.min(n,o)},pricePrecision:function(t){var e=this,n=0;return t.forEach(function(t){t.forEach(function(t,o){o>0&&o<5&&(n=Math.max(e.safeDigits(t),n))})}),n},indexSymbol:function(t){return t.replace(/^(\w+-\w+).*/,"$1")}},O={getSecondPeriod:function(t){var e={line:60,m:60,H:3600,D:86400,W:604800,M:2678400,Y:31536e3,"12M":31536e3};return e[t]?e[t]:(t.replace(/\D/g,"")||1)*e[t.replace(/\d/g,"")||"m"]},getBarPeriod:function(t){if("line"===t)return"1m";if("12M"===t)return"1Y";var e=t.replace(/\D/g,"")||1;if(e>=60)return"".concat(e/60,"H");var n=t.replace(/\d/g,"")||"m";return"".concat(e).concat(n)},getKlineUrl:function(t){var e=t.isV5,n=t.klineUrl,o=t.symbol,r=t.period,i=t.after,a=void 0===i?"":i,c=t.limit,u=void 0===c?1e3:c,s=t.openTimeZone;if(e){var l=this.getUtcPeriod({isV5:e,openTimeZone:s,period:this.getBarPeriod(r)});return"".concat(n,"?instId=").concat(o,"&bar=").concat(l,"&after=").concat(a,"&limit=").concat(u)}var f=this.getUtcPeriod({openTimeZone:s,period:this.getSecondPeriod(r)});return"".concat(n.replace(/<symbol>/,o),"?granularity=").concat(f,"&size=1000")},getUtcPeriod:function(t){var e=t.isV5,n=t.openTimeZone,o=t.period,r=t.isV3Websocket,i=void 0!==r&&r;if(e){return"utc0"===n&&["6H","12H","1D","2D","3D","5D","1W","1M","3M","6M","1Y"].includes(o)?"".concat(o,"utc"):o}var a={21600:"1",43200:"2",86400:"3",172800:"4",259200:"5",432000:"6",604800:"7",2678400:"8",8035200:"9",16070400:"10",31536000:"11"},c="utc0"===n&&Object.keys(a).includes(String(o)),u=c?a[Number(o)]:o,s="";return i&&(s=c?"i":"s"),u+s},getChannelArg:function(t){var e=t.isV5,n=t.product,o=t.channel,r=t.period,i=t.symbol,a=t.openTimeZone;if(e){var c=this.getUtcPeriod({isV5:e,openTimeZone:a,period:this.getBarPeriod(r)});return{channel:"".concat(o).concat(c),instId:i}}var u=this.getUtcPeriod({openTimeZone:a,period:this.getSecondPeriod(r),isV3Websocket:!0});return"".concat(n,"/").concat(o).concat(u,":").concat(i)},convertWsData:function(t){var e=t.isV5,n=t.table,o=t.data,r=t.arg,i=void 0===r?{}:r;if(!o||!o.length)return{};if(e)return{id:JSON.stringify(i),data:o,item:o[0],instId:i.instId};var a=o[0],c=a.instrument_id,u=a.candle;return{id:JSON.stringify("".concat(n,":").concat(c)),data:[u],item:u,instId:c}},sortRestData:function(t){var e=t.isV5,n=t.data;return e?n.sort(function(t,e){return+t[0]>+e[0]?1:-1}):n}},S={FULL_SCREEN:"full_screen",PRICE_TYPE:"price_type"};function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,"subs",[]),this.id=t.uid++}return function(t,e,n){e&&P(t.prototype,e),n&&P(t,n)}(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"depend",value:function(){t.target.addDep(this)}},{key:"removeSub",value:function(t){var e=this.subs.indexOf(t);-1!=e&&this.subs.splice(e,1)}},{key:"notify",value:function(){this.subs.forEach(function(t){t.update()})}}]),t}();function A(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}k(C,"target",null),k(C,"uid",0);var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"deps",{}),this.update=e}return function(t,e,n){e&&A(t.prototype,e),n&&A(t,n)}(t,[{key:"addDep",value:function(t){this.deps[t.id]||(t.addSub(this),this.deps[t.id]=t)}},{key:"removeDeps",value:function(){var t=this;Object.keys(this.deps).forEach(function(e){t.deps[e].removeSub(t)})}}]),t}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t){this.data=t,this.walk(t)}function M(t){if(t&&"object"===x(t))return new E(t),t}E.prototype={walk:function(t){var e=this;Object.keys(t).forEach(function(n){e.convert(n,t[n])})},convert:function(t,e){this.defineReactive(this.data,t,e)},defineReactive:function(t,e,n){var o=new C;M(n),Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return C.target&&o.depend(),n},set:function(t){t!==n&&(n=t,M(t),o.notify())}})}};var T={CURSOR:"CURSOR",CROSS_CURSOR:"CROSS_CURSOR",LINE:"LINE",FIB_RETRACE:"FIB_RETRACE",FIB_FANS:"FIB_FANS",SEG:"SEG",STRAIGHT:"STRAIGHT",ARROW:"ARROW",RAY:"RAY",H_STRAIGHT:"H_STRAIGHT",H_RAY:"H_RAY",H_SEG:"H_SEG",V_STRAIGHT:"V_STRAIGHT",PRICE:"PRICE",BI_PARALLEL:"BI_PARALLEL",BI_PARALLEL_RAY:"BI_PARALLEL_RAY",TRI_PARALLEL:"TRI_PARALLEL",HIDE:"HIDE",DELETE:"DELETE",SHOW_ALL:"SHOW_ALL",HIDE_ALL:"HIDE_ALL",DELETE_ALL:"DELETE_ALL"},R={CURSOR:{className:"icon-kline-cursor",lang:"cursor"},CROSS_CURSOR:{className:"icon-kline_tool_a",lang:"cross_cursor"},SEG:{className:"icon-kline_tool_b",lang:"seg_line"},STRAIGHT:{className:"icon-kline_tool_c",lang:"straight_line"},RAY:{className:"icon-kline_tool_d",lang:"ray_line"},ARROW:{className:"icon-kline_tool_e",lang:"arrow_line"},H_SEG:{className:"icon-kline_tool_f",lang:"horz_seg_line"},H_STRAIGHT:{className:"icon-kline_tool_g",lang:"horz_straight_line"},H_RAY:{className:"icon-kline_tool_h",lang:"horz_ray_line"},V_STRAIGHT:{className:"icon-kline_tool_i",lang:"vert_straight_line"},PRICE:{className:"icon-kline_tool_j",lang:"price_line"},TRI_PARALLEL:{className:"icon-kline_tool_k",lang:"tri_parallel_line"},BI_PARALLEL:{className:"icon-kline_tool_l",lang:"bi_parallel_line"},BI_PARALLEL_RAY:{className:"icon-kline_tool_m",lang:"bi_parallel_ray"},FIB_RETRACE:{className:"icon-kline_tool_n",lang:"fib_retrace"},FIB_FANS:{className:"icon-kline_tool_o",lang:"fib_fans"},SHOW_ALL:{className:"icon-Mul_hide",lang:"show_all"},HIDE_ALL:{className:"icon-Mul_show",lang:"hide_all"},DELETE_ALL:{className:"icon-Mul_delete",lang:"delete_all"}},D=[423.6,261.8,250,161.8,150,100,78.6,61.8,50,38.2,23.6,0],I={HIDE:"hide",SHOW:"show",HIGHLIGHT:"highlight"},L={BEFORE:"before",DRAWING:"drawing",AFTER:"after"},N={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},F={NOTHING:"nothing",REFRESH:"refresh",LEFT_UPDATE:"left_update",RIGHT_UPDATE:"right_update"},B={FRAME:"frame",CHART:"chart",TIMELINE:"timeline",MAIN:"main",INDICATOR:"indicator"},V="provider",H={LINE:"line",MA:"MA",EMA:"EMA",INDEX:"Index",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",BOLL:"BOLL",SAR:"SAR",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY",VOLUME:"VOLUME"},U={BACKGROUND:"background",GRID:"grid",CONTENT:"content",INDICATOR:"indicator",MAX_MIN:"max_min",INFO:"info",SELECTION:"selection",DRAW_LINE:"draw_line",LAST:"last"},Y={LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",FILL:"fill"},W={ALL:"All",CHART_CANVAS:"MainCanvas",OVERLY_CANVAS:"OverlayCanvas"};function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,"init",function(){e._setting={},e._config={},e._storage={},e._dataFeed={},e._dataSource={},e._dataProviders={},e._frame={},e._areas={},e._timeline={},e._plotters={},e._theme={},e._pixelRatio=1,e._cursorType=T.CROSS_CURSOR,e._chartCanvas=null,e._overlayCanvas=null,e._chartContext=null,e._overlayContext=null,e._overlayCanvasSQ=null,e._klineDom=null,e._klineSQ=null,e._documentSQ=h(document),e._chartAction={},e._indicatorAction={},e._drawAction={},e._mouseAction={},e._lineAction={},e._templateAction={}}),G(this,"getKlineDom",function(){return e._klineDom}),G(this,"setKlineDom",function(t){e._klineDom=t}),G(this,"getKlineSQ",function(){return e._klineSQ}),G(this,"setKlineSQ",function(t){e._klineSQ=t}),G(this,"getDocumentSQ",function(){return e._documentSQ}),G(this,"getChartAction",function(){return e._chartAction}),G(this,"setChartAction",function(t){e._chartAction=t}),G(this,"getIndicatorAction",function(){return e._indicatorAction}),G(this,"setIndicatorAction",function(t){e._indicatorAction=t}),G(this,"getDrawAction",function(){return e._drawAction}),G(this,"setDrawAction",function(t){e._drawAction=t}),G(this,"getLineAction",function(){return e._lineAction}),G(this,"setLineAction",function(t){e._lineAction=t}),G(this,"getMouseAction",function(){return e._mouseAction}),G(this,"setMouseAction",function(t){e._mouseAction=t}),G(this,"getTemplateAction",function(){return e._templateAction}),G(this,"setTemplateAction",function(t){e._templateAction=t}),G(this,"getSetting",function(){return e._setting}),G(this,"setSetting",function(t){var n=t.config,o=t.storage;e._config=n,e._storage=o,e._setting=t}),G(this,"getConfig",function(){return e._config}),G(this,"getStorage",function(){return e._storage}),G(this,"getDataFeed",function(){return e._dataFeed}),G(this,"setDataFeed",function(t){e._dataFeed=t}),G(this,"getDataSource",function(){return e._dataSource}),G(this,"setDataSource",function(t){e._dataSource=t}),G(this,"getDataProviders",function(){return e._dataProviders}),G(this,"getDataProvider",function(t){return e._dataProviders[t]}),G(this,"addDataProvider",function(t,n){e._dataProviders[t]=n}),G(this,"removeDataProvider",function(t){delete e._dataProviders[t]}),G(this,"getFrame",function(){return e._frame}),G(this,"setFrame",function(t){e._frame=t}),G(this,"getAreas",function(){return e._areas}),G(this,"getArea",function(t){return e._areas[t]}),G(this,"addArea",function(t,n){e._areas[t]=n}),G(this,"removeArea",function(t){delete e._areas[t]}),G(this,"getTimeline",function(){return e._timeline}),G(this,"setTimeline",function(t){e._timeline=t}),G(this,"getPlotters",function(){return e._plotters}),G(this,"getPlotter",function(t){return e._plotters[t]}),G(this,"addPlotter",function(t,n){e._plotters[t]=n}),G(this,"removePlotter",function(t){delete e._plotters[t]}),G(this,"getTheme",function(){return e._theme}),G(this,"setTheme",function(t){e._theme=t}),G(this,"getChartCanvas",function(){return e._chartCanvas}),G(this,"setChartCanvas",function(t){e._chartContext=t.getContext("2d"),e._chartCanvas=t}),G(this,"getOverlayCanvas",function(){return e._overlayCanvas}),G(this,"setOverlayCanvas",function(t){e._overlayCanvasSQ=h(t),e._overlayContext=t.getContext("2d"),e._overlayCanvas=t}),G(this,"getOverlayCanvasSQ",function(){return e._overlayCanvasSQ}),G(this,"getChartContext",function(){return e._chartContext}),G(this,"getOverlayContext",function(){return e._overlayContext}),G(this,"getPixelRatio",function(){return e._pixelRatio}),G(this,"setPixelRatio",function(t){e._pixelRatio=t}),G(this,"getCursorType",function(){return e._cursorType}),G(this,"setCursorType",function(t){e._cursorType=t}),this.init()}return function(t,e,n){e&&X(t.prototype,e),n&&X(t,n)}(t,[{key:"getMainProvider",value:function(){return this.getDataProvider("".concat(B.MAIN,".").concat(V))}},{key:"getModuleProvider",value:function(t){return this.getDataProvider("".concat(t,".").concat(V))}},{key:"getMainLeftArea",value:function(){return this.getArea("".concat(B.MAIN,".").concat(Y.LEFT))}},{key:"getMainRightArea",value:function(){return this.getArea("".concat(B.MAIN,".").concat(Y.RIGHT))}},{key:"getAreaDigits",value:function(t){return t.getModuleName()===B.MAIN?this.getDataSource().getDecimalDigits():2}}]),t}());function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){J(t,e,n[e])})}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,"init",function(){var t=z.getConfig();e.callbackMap={},e.leftNoData=!1,e.disconnected=!1,e.socket=new WebSocketCore({connectUrl:t.wsUrl}),e.connected=new Promise(function(t){e.connectedHandle=e.socket.onSocketConnected(function(){e.disconnected&&(e.getKlineData({mode:F.REFRESH}),e.disconnected=!1),t()}),e.errorHandle=e.socket.onSocketError(function(){e.disconnected=!0,e.getKlineData({mode:F.RIGHT_UPDATE})})}),e.pingHandle=e.socket.onPushDiscontinue(function(){e.socket.sendChannel("ping")}),e.pushHandle=e.socket.setPushDataResolver(function(t){var n=z.getConfig(),o=n.isV5,r=n.dataAdapter,i=O.convertWsData(K({isV5:o},t)),a=i.id,c=i.data,u=e.callbackMap[a];u&&u({data:c.map(r),mode:F.RIGHT_UPDATE})}),e.socket.connect()}),J(this,"getKlineData",function(t){var n,o=t.mode,r=z.getConfig(),i=r.isV5,a=r.klineUrl,c=r.product,u=r.channel,s=r.symbol;if(o===F.LEFT_UPDATE){if(!i||e.leftNoData)return;n=z.getDataSource().getTimeAt(0)}e.leftNoData=!0;var l=i?2*z.getTimeline().getMaxItemCount():1e3,f=z.getChartAction().setKlineData;e.getBars({klineUrl:a,symbol:s,product:c,channel:u,callback:f,mode:o,after:n,limit:l}).then(function(t){t&&(e.leftNoData=t.length<l,e.getIndexData({mode:o,after:n,limit:l}))})}),J(this,"getIndexData",function(t){var n=t.mode,o=t.after,r=t.limit,i=z.getStorage().mainIndic,a=z.getConfig(),c=a.symbol,u=a.compare,s=(void 0===u?{}:u).index;if(s&&i.includes(H.INDEX)){var l=s.klineUrl,f=s.product,p=s.channel,h=w.indexSymbol(c),y=z.getChartAction().setIndexData;e.getBars({klineUrl:l,symbol:h,product:f,channel:p,callback:y,mode:n,after:o,limit:r})}}),J(this,"getBars",function(t){var n=t.klineUrl,o=t.symbol,r=t.product,i=t.channel,a=t.callback,c=t.mode,u=t.after,s=t.limit,l=z.getConfig(),f=l.isV5,p=l.symbol,y=l.dataAdapter,d=l.openTimeZone,b=z.getStorage().period;return h.ajax({url:O.getKlineUrl({isV5:f,klineUrl:n,symbol:o,period:b,after:u,limit:s,openTimeZone:d})}).then(function(t){if(!e.expireRequest({period:b,symbol:p})){var n=t.code,u=t.data,s=void 0===u?[]:u;if(0===Number(n)){var l=O.sortRestData({isV5:f,data:s}).map(y);a({data:l,mode:c})}return c===F.REFRESH&&e.subscribeBars({product:r,channel:i,period:b,symbol:o,callback:a}),s}}).catch(function(){c===F.REFRESH&&e.subscribeBars({product:r,channel:i,period:b,symbol:o,callback:a})})}),J(this,"subscribeBars",function(t){var n=z.getConfig(),o=n.isV5,r=n.openTimeZone,i=O.getChannelArg(K({isV5:o,openTimeZone:r},t));e.callbackMap[JSON.stringify(i)]=t.callback;var a=JSON.stringify({op:"subscribe",args:[i]});e.socket.isConnected()?e.socket.sendChannel(a):e.connected.then(function(){e.socket.isConnected()&&e.socket.sendChannel(a)})}),J(this,"unsubscribeBars",function(t){var n=z.getConfig(),o=n.isV5,r=n.openTimeZone,i=O.getChannelArg(K({isV5:o,openTimeZone:r},t));e.unsubscribeChannel([i])}),J(this,"unsubscribeChannel",function(t){if(t.length&&(t.forEach(function(t){delete e.callbackMap[JSON.stringify(t)]}),e.socket.isConnected())){var n=JSON.stringify({op:"unsubscribe",args:t});e.socket.sendChannel(n)}}),J(this,"unsubscribeAll",function(){var t=Object.keys(e.callbackMap).map(function(t){return JSON.parse(t)});e.unsubscribeChannel(t)}),J(this,"unsubscribeIndexData",function(){var t=z.getConfig(),n=t.symbol,o=t.compare,r=(void 0===o?{}:o).index,i=r.product,a=r.channel,c=z.getStorage().period,u=n.replace(/^(\w+-\w+).*/,"$1");e.unsubscribeBars({product:i,channel:a,symbol:u,period:c})}),J(this,"expireRequest",function(t){var e=t.period,n=t.symbol,o=z.getStorage(),r=z.getConfig();return o.period!==e||r.symbol!==n}),J(this,"destroy",function(){e.unsubscribeAll(),e.pingHandle(),e.pushHandle(),e.connectedHandle(),e.errorHandle()}),this.init()};function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var $=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"setLastData",function(t){var n=e.getLastData();if(t&&n&&Number(t.close)!==n.close){var o=Number(t.close),r=n.high,i=n.low;n.close=o,n.high=Math.max(r,o),n.low=Math.min(i,o),e._rightUpdateSize=1,e.setDataMode(F.RIGHT_UPDATE)}}),this.init()}return function(t,e,n){e&&Z(t.prototype,e),n&&Z(t,n)}(t,[{key:"init",value:function(){this._data=[],this._indexPrice=[],this._decimalDigits=0,this._leftUpdateSize=0,this._rightUpdateSize=0,this._pushSize=0,this._dataMode=F.NOTHING,this._selectedIndex=0}},{key:"resetData",value:function(){this.init(),this.setDataMode(F.REFRESH)}},{key:"getData",value:function(){return this._data}},{key:"getDataAt",value:function(t){return this._data[t]}},{key:"getTimeAt",value:function(t){var e=this.getLastIndex();if(t<0||e<0)return(new Date).getTime();var n=this.getLastData().time;return e<1?n:t<=e?this.getDataAt(t).time:n+(t-e)*(this.getDataAt(1).time-this.getDataAt(0).time)}},{key:"getSelectedIndex",value:function(){var t=z.getTimeline().getSelectedIndex();return t>-1?Math.min(t,this.getLastIndex()):this.getLastIndex()}},{key:"getSelectedData",value:function(){return this.getDataAt(this.getSelectedIndex())}},{key:"getLastData",value:function(){return this.getDataAt(this.getLastIndex())}},{key:"getLastIndex",value:function(){return this._data.length-1}},{key:"getDataSize",value:function(){return this._data.length}},{key:"getLeftUpdateSize",value:function(){return this._leftUpdateSize}},{key:"getRightUpdateSize",value:function(){return this._rightUpdateSize}},{key:"getPushSize",value:function(){return this._pushSize}},{key:"getDataMode",value:function(){return this._dataMode}},{key:"setDataMode",value:function(t){this._dataMode=t}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"convertItem",value:function(t){var e=Q(t,6),n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5];return{time:new Date(n).getTime(),open:o,high:r,low:i,close:a,volume:c}}},{key:"convertList",value:function(t){return t.map(this.convertItem)}},{key:"refreshData",value:function(t){this._decimalDigits=w.pricePrecision(t),this._data=this.convertList(t),this.setDataMode(F.REFRESH)}},{key:"leftUpdateData",value:function(t){var e=this.convertList(t);this._data=e.concat(this._data),this._leftUpdateSize=e.length,this.setDataMode(F.LEFT_UPDATE)}},{key:"rightUpdateDate",value:function(t){for(var e=this.getLastData(),n=t.length,o=0;o<n;o++){var r=t[o],i=new Date(r[0]).getTime();if(!(i<e.time))if(this._rightUpdateSize++,i!==e.time)i>e.time&&(this._pushSize++,this._data.push(this.convertItem(r)));else{var a=this.getLastIndex();this._data[a]=this.convertItem(r)}}this._rightUpdateSize>0&&this.setDataMode(F.RIGHT_UPDATE)}},{key:"setData",value:function(t){var e=t.data,n=t.mode;if(this._leftUpdateSize=0,this._rightUpdateSize=0,this._pushSize=0,this.getLastData())switch(n){case F.REFRESH:this.refreshData(e);break;case F.LEFT_UPDATE:this.leftUpdateData(e);break;case F.RIGHT_UPDATE:this.rightUpdateDate(e)}else this.refreshData(e)}},{key:"getIndexPriceAt",value:function(t){var e=this.getDataAt(t),n=this._indexPrice.length,o=n-(this.getDataSize()-t),r=this._indexPrice[o];if(r&&e.time===r.time)return r;for(var i=n-1;i>=0;i--){var a=this._indexPrice[i];if(e.time===a.time)return a}return{close:NaN}}},{key:"setIndexPrice",value:function(t){var e=t.data,n=t.mode,o=this._indexPrice.length;if(n!==F.REFRESH&&0!==o)switch(n){case F.LEFT_UPDATE:var r=this.convertList(e);this._indexPrice=r.concat(this._indexPrice);break;case F.RIGHT_UPDATE:for(var i=o-1,a=this._indexPrice[i],c=e.length,u=0;u<c;u++){var s=this.convertItem(e[u]);s.time!==a.time?s.time>a.time&&this._indexPrice.push(s):this._indexPrice[i]=s}}else this._indexPrice=this.convertList(e)}}]),t}();function tt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var et=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._names=[],this._comps=[];var n=e.split("."),o=n.length-1;if(o>0){this._comps=n,this._names.push(n[0]);for(var r=1;r<=o;r++)this._names.push("".concat(this._names[r-1],".").concat(n[r]))}else this._comps.push(e),this._names.push(e)}return function(t,e,n){e&&tt(t.prototype,e),n&&tt(t,n)}(t,[{key:"getCompAt",value:function(t){return t>=0&&t<this._comps.length?this._comps[t]:""}},{key:"getNameAt",value:function(t){if(t<0){if(this._names.length>0)return this._names[this._names.length+t]}else if(t<this._names.length)return this._names[t];return""}},{key:"getModuleName",value:function(){return this.getNameAt(0)}},{key:"getAreaName",value:function(){return this.getNameAt(1)}},{key:"getName",value:function(){return this.getNameAt(-1)}}]),t}();function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rt(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rt(this,it(e).call(this,n.name)))._updated=!0,t._minValueIndex=-1,t._maxValueIndex=-1,t._minValue=Number.MAX_VALUE,t._maxValue=-Number.MAX_VALUE,t._outerMinValue=Number.MAX_VALUE,t._outerMaxValue=-Number.MAX_VALUE,t._ratio=0,t._top=0,t._bottom=0,t._paddingTop=20,t._paddingBottom=5,t._minInterval=36,t._selectedValue=-Number.MAX_VALUE,t._gradations=[],t._indicators=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,et),function(t,e,n){e&&ot(t.prototype,e),n&&ot(t,n)}(e,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"getIndicators",value:function(){return this._indicators}},{key:"setIndicator",value:function(t){Array.isArray(t)||(t=[t]),this._indicators=t,this.refreshIndicator()}},{key:"removeIndicator",value:function(){this._indicators=[]}},{key:"refreshIndicator",value:function(){var t=z.getDataSource();t.getDataSize()<1||this._indicators.forEach(function(e){var n,o=t.getDataSize();for(e.clear(),e.reserve(o),n=0;n<o;n++)e.execute(t,n)})}},{key:"getSelectedValue",value:function(){return this._selectedValue}},{key:"selectAt",value:function(t){var e=z.getArea("".concat(this.getModuleName(),".").concat(Y.LEFT));t<e.getTop()+12||t>=e.getBottom()-4?this._selectedValue=-Number.MAX_VALUE:this._selectedValue=this.toValue(t)}},{key:"unselect",value:function(){this._selectedValue=-Number.MAX_VALUE}},{key:"toValue",value:function(t){return this._outerMaxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return 0===this.getHeight()?(this._bottom+this._top)/2:this._ratio>0?this._top+Math.floor((this._outerMaxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return t==1/0||0==this._ratio?1.5:Math.floor(t*this._ratio+1.5)}}]),e}();function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lt(t,e){return!e||"object"!==ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lt(this,ft(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(e,ct),function(t,e,n){e&&st(t.prototype,e),n&&st(t,n)}(e,[{key:"update",value:function(){this.updateIndicator(),this.updateMaxMin()}},{key:"updateIndicator",value:function(){var t=this,e=z.getDataSource();e.getDataSize()<1||this._indicators.forEach(function(n){switch(e.getDataMode()){case F.REFRESH:case F.LEFT_UPDATE:t.refreshIndicator();break;case F.RIGHT_UPDATE:var o;n.reserve(e.getPushSize());var r=e.getDataSize();for(o=r-e.getRightUpdateSize();o<r;o++)n.execute(e,o)}})}},{key:"updateMaxMin",value:function(){var t=this.getMaxMin();this._minValueIndex=t.minValueIndex,this._maxValueIndex=t.maxValueIndex;var e=z.getArea("".concat(this.getModuleName(),".").concat(Y.LEFT)),n=this.preSetMinMax({min:t.minValue,max:t.maxValue}),o=this.preSetMinMax({min:t.outerMinValue,max:t.outerMaxValue});(this._minValue!==n.min||this._maxValue!==n.max||this._outerMinValue!==o.min||this._outerMaxValue!==o.max||e.isChanged())&&(this._updated=!0,this._minValue=n.min,this._maxValue=n.max,this._outerMinValue=o.min,this._outerMaxValue=o.max,this._top=e.getTop()+this._paddingTop,this._bottom=e.getBottom()-(this._paddingBottom+1),this._outerMaxValue>this._outerMinValue?this._ratio=(this._bottom-this._top)/(this._outerMaxValue-this._outerMinValue):this._ratio=1,this._gradations=[],this.updateGradations())}},{key:"preSetMinMax",value:function(t){var e=t.min,n=t.max;return e===n?{min:-1,max:1}:{min:e,max:n}}},{key:"getMaxMin",value:function(){for(var t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=-1,i=-1,a=z.getTimeline(),c=a.getFirstIndex(),u=a.getLastIndex();u>=c;u--){var s=this.getSourceMinMaxAt(u),l=this.getIndicatorMinMaxAt(u);s.min<t&&(r=u,t=s.min),n=Math.min(n,t,l.min),s.max>e&&(i=u,e=s.max),o=Math.max(o,e,l.max)}return{minValueIndex:r,maxValueIndex:i,minValue:t,maxValue:e,outerMinValue:n,outerMaxValue:o}}},{key:"getSourceMinMaxAt",value:function(t){var e=z.getDataSource().getDataAt(t);if(e){var n=e.low,o=e.high,r=e.volume,i=void 0===r?-Number.MAX_VALUE:r,a=this.getModuleName();if(a===H.VOLUME)return{min:0,max:i};if([B.MAIN,H.BOLL,H.SAR].includes(a))return{min:n,max:o}}return{min:Number.MAX_VALUE,max:-Number.MAX_VALUE}}},{key:"getIndicatorMinMaxAt",value:function(t){var e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=z.getIndicatorAction();return this._indicators.forEach(function(r){for(var i=r.getName(),a=r.getOutputCount(),c=0;c<a;c++){var u=r.getOutputAt(c),s=u.getName();if(o.getIndicatorStorage(i,s).show){var l=u.execute(t);Number.isNaN(l)||(e=Math.min(e,l),n=Math.max(n,l))}}}),{min:e,max:n}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();if(t<=0)return 0;t<=e&&(e=t>>1);for(var n,o,r=this.getOuterRange(),i=0,a=z.getDataSource().getDecimalDigits();i>-a&&Math.floor(r)<r;)r*=10,i--;for(;(n=o=Math.pow(10,i),!(this.toHeight(n)>e))&&(n=2*o,!(this.toHeight(n)>e))&&(n=5*o,!(this.toHeight(n)>e));i++);return n}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0))for(var e=Math.floor(this.getOuterMaxValue()/t)*t;e>this.getOuterMinValue();)this._gradations.push(e),e-=t}}]),e}();function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bt(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bt(this,gt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,ht),function(t,e,n){e&&dt(t.prototype,e),n&&dt(t,n)}(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=z.getArea("".concat(this.getModuleName(),".").concat(Y.LEFT)),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getOuterMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;do{20!==n&&80!==n||this._gradations.push(n),n+=10}while(n<this.getOuterMaxValue())}else do{e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),n+=10}while(n<this.getOuterMaxValue())}}}]),e}();function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ot(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ot(this,St(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,ht),function(t,e,n){e&&wt(t.prototype,e),n&&wt(t,n)}(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,o=this.getOuterRange();for(n=3;!(this.toHeight(o/n)<=e);n+=2);return o/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=z.getArea("".concat(this.getModuleName(),".").concat(Y.LEFT)),e=this.calcInterval(t);if(!(e<=0)){var n=e/2;do{this._gradations.push(n),this._gradations.push(-n),n+=e}while(n<=this.getOuterMaxValue())}}},{key:"preSetMinMax",value:function(t){var e=t.min,n=t.max,o=Math.max(Math.abs(e),Math.abs(n));return{min:-o,max:o}}}]),e}();function Ct(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var At=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reverseColor=e.reverseColor,this._name=""}return function(t,e,n){e&&Ct(t.prototype,e),n&&Ct(t,n)}(t,[{key:"getName",value:function(){return this._name}},{key:"setCustomTheme",value:function(t){var e=this;Object.keys(t).forEach(function(n){e[n]=t[n]})}}]),t}();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tt={"line-muted-opacity-50":"rgba(34, 41, 56, 0.5)","line-muted":"#222938","line-secondary":"#31394A","text-light":"#727B8F","text-secondary":"#9BA3B5","text-amplifed":"#DDE1EB","grey-700":"#9BA3B5","grey-700-opacity-60":"rgba(155, 163, 181, 0.6)","grey-200":"#31394A","grey-400":"#727B8F","green-900":"#33B06A","green-900-opacity-30":"rgba(51, 176, 106, 0.6)","red-900":"#BF4747","red-900-opacity-30":"rgba(191, 71, 71, 0.6)"},Rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xt(this,Et(e).call(this,t)))._name="dark",n._reverseColor?(n.Positive=Tt["red-900"],n.Negative=Tt["green-900"],n.PositiveOpacity30=Tt["red-900-opacity-30"],n.NegativeOpacity30=Tt["green-900-opacity-30"],n.PositiveDark="#204342",n.NegativeDark="#482E3D",n.TextPositive="#D75558",n.TextNegative="#41A064"):(n.Positive=Tt["green-900"],n.Negative=Tt["red-900"],n.PositiveOpacity30=Tt["green-900-opacity-30"],n.NegativeOpacity30=Tt["red-900-opacity-30"],n.PositiveDark="#482E3D",n.NegativeDark="#204342",n.TextPositive="#41A064",n.TextNegative="#D75558"),n.Unchanged="#FFFFFF",n.Background="#121D32",n.MainInfoBg="#25334B",n.MainInfoAlpha=.65,n.CursorColor=Tt["grey-700"],n.Indicator0="#FFFFFF",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#3F4859",n.Grid1=Tt["line-secondary"],n.Grid2="#FFFFFF",n.Grid3="#25334B",n.Grid4=Tt["line-muted-opacity-50"],n.Grid5=Tt["grey-700-opacity-60"],n.Grid6=Tt["grey-200"],n.Text0="#BEC1C7",n.Text1="#FFFFFF",n.Text2="#4D5565",n.Text3="#FFFFFF",n.Text4=Tt["grey-400"],n.Text5=Tt["text-light"],n.Text6=Tt["text-secondary"],n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#121D32",n.CircleColorStroke="#005DFF",n.DefaultFont="12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(e,At),e}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ft={"line-muted-opacity-50":"rgba(240, 243, 247, 0.5)","line-muted":"#F0F3F7","line-secondary":"#D8DCE6","text-light":"#959DAD","text-secondary":"#3F475A","text-amplifed":"#1F2933","grey-700":"#3F475A","grey-700-opacity-60":"rgba(63, 71, 90, 0.6)","grey-500":"#60687B","grey-400":"#7B8293","green-700":"#2EAD65","green-700-opacity-30":"rgba(46, 173 ,101, 0.6)","red-700":"#E35E5E","red-700-opacity-30":"rgba(227, 94, 94, 0.6)"},Bt={light:function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=It(this,Lt(e).call(this,t)))._name="light",n._reverseColor?(n.Positive=Ft["red-700"],n.Negative=Ft["green-700"],n.PositiveOpacity30=Ft["red-700-opacity-30"],n.NegativeOpacity30=Ft["green-700-opacity-30"],n.PositiveDark="#D2EDDC",n.NegativeDark="#FBD8D7",n.TextPositive="#EE6560",n.TextNegative="#4DB872"):(n.Positive=Ft["green-700"],n.Negative=Ft["red-700"],n.PositiveOpacity30=Ft["green-700-opacity-30"],n.NegativeOpacity30=Ft["red-700-opacity-30"],n.PositiveDark="#FBD8D7",n.NegativeDark="#D2EDDC",n.TextPositive="#4DB872",n.TextNegative="#EE6560"),n.Unchanged="#FFFFFF",n.Background="#FFFFFF",n.MainInfoBg="#25334B",n.MainInfoAlpha=.85,n.CursorColor="#898989",n.Indicator0="#E64C7D",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#000000",n.Grid1=Ft["line-secondary"],n.Grid2="#25334B",n.Grid3="#25334B",n.Grid4=Ft["line-muted-opacity-50"],n.Grid5=Ft["grey-700-opacity-60"],n.Grid6=Ft["grey-500"],n.Text0="#FFFFFF",n.Text1="#FFFFFF",n.Text2="#888888",n.Text3="#FFFFFF",n.Text4=Ft["grey-400"],n.Text5=Ft["text-light"],n.Text6=Ft["text-secondary"],n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#FFFFFF",n.CircleColorStroke="#005DFF",n.DefaultFont="12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,At),e}(),dark:Rt};function Vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Bt[t](e),o=(e.customTheme||{})[t]||{};return n.setCustomTheme(o),n}function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Yt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yt(this,Wt(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,et),function(t,e,n){e&&Ut(t.prototype,e),n&&Ut(t,n)}(e,null,[{key:"drawLine",value:function(t,e,n,o,r){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(o<<0),.5+(r<<0)),t.stroke()}},{key:"drawLines",value:function(t,n){var o,r=n.length;for(t.beginPath(),t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);if(e.isChrome)for(t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,o,r,i,a){i<2&&(i=2);var c=o-e,u=r-n;t.beginPath();for(var s=Math.sqrt(c*c+u*u)/i+.5<<0,l=(c/=s)*a/i,f=(u/=s)*a/i,p=0;p<s;p++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+l,n+.5+f),e+=c,n+=u;t.stroke()}},{key:"createHorzDashedLine",value:function(t,e,n,o,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;r<2&&(r=2);for(var c=(n-e)/r+.5<<0,u=0;u<c;u++)t.rect(e,o,i,a),e+=r}},{key:"createHorzLine",value:function(t,e,n,o,r){t.beginPath(),t.moveTo(e,o),t.lineTo(n,o),t.strokeStyle=r,t.stroke(),t.closePath()}},{key:"createRectangles",value:function(t,e){var n,o;t.beginPath();var r=e.length;for(o=0;o<r;o++)n=e[o],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){var n;t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var o=e.length;for(n=1;n<o;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var o=t.measureText(e).width;return!(n.w<o)&&(t.fillText(e,n.x,n.y),n.x+=o,n.w-=o,!0)}}]),e}();function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Gt,"isChrome",null!==navigator.userAgent.toLowerCase().match(/chrome/));var Zt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jt(this,qt(e).call(this,t)))._color="Background",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,Gt),function(t,e,n){e&&Kt(t.prototype,e),n&&Kt(t,n)}(e,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=z.getTheme();t.fillStyle=n[this._color],t.fillRect(e.getLeft(),e.getTop(),e.getWidth(),e.getHeight())}}]),e}();function $t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var te=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.drawLineTool=e.drawLineTool;var n=z.getMainLeftArea();null!==n?(this.areaPos={left:n.getLeft(),top:n.getTop(),right:n.getRight(),bottom:n.getBottom()},this.crossPt={},this.normalSize=4,this.selectedSize=6,this.cursorLen=4,this.cursorGapLen=3,this.theme=z.getTheme()):this.areaPos={left:0,top:0,right:0,bottom:0}}return function(t,e,n){e&&$t(t.prototype,e),n&&$t(t,n)}(t,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.LineColorNormal,t.fillStyle=this.theme.LineColorNormal;var e=this.drawLineTool.getPoint(0).getPosXY();if(null!==e){var n=e.x,o=e.y,r=this.cursorLen,i=this.cursorGapLen;t.fillRect(n,o,1,1),Gt.drawLine(t,n-r-i,o,n-i,o),Gt.drawLine(t,n+r+i,o,n+i,o),Gt.drawLine(t,n,o-r-i,n,o-i),Gt.drawLine(t,n,o+r+i,n,o+i)}}},{key:"drawCircle",value:function(t,e,n){var o=e.x,r=e.y;t.beginPath(),t.arc(o,r,n,0,2*Math.PI,!1),t.fillStyle=this.theme.CircleColorFill,t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.drawLineTool.getPoint(e).getState()===I.HIGHLIGHT&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var o=0;o<this.fiboFansSequence.length;o++){var r=e.y+(100-this.fiboFansSequence[o])/100*(n.y-e.y),i={x:e.x,y:e.y},a={x:n.x,y:r};this.drawRayLines(t,i,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var o,r={x:e.x,y:e.y},i={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,r,i);o=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},Gt.drawLine(t,e.x,e.y,o.x,o.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.drawLineTool.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=z.getMainLeftArea();this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.LineColorSelected,this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}},{key:"getRectCrossPt",value:function(t,e,n){var o={x:-1,y:-1},r={x:-1,y:-1},i=n.x-e.x,a=n.y-e.y;if(Math.abs(i)<2)return[o={x:e.x,y:t.top},r={x:n.x,y:t.bottom}];var c=a/i;return r.x=t.right,r.y=e.y+(t.right-e.x)*c,o.x=t.left,o.y=e.y+(t.left-e.x)*c,[o,r]}}]),t}();function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oe(t,e){return!e||"object"!==ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ae=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oe(this,re(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,te),function(t,e,n){e&&ne(t.prototype,e),n&&ne(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){var o,r=z.getDataSource().getDecimalDigits(),i=z.getTheme();t.font=i.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.drawLineTool.state!==L.DRAWING&&void 0!==this.startPtValue||(this.startPtValue=this.drawLineTool.getPoint(0).getPosTV().v,this.endPtValue=this.drawLineTool.getPoint(1).getPosTV().v),this.getAreaPos();for(var a=0;a<this.fiboSequence.length;a++){var c=e.y+(100-this.fiboSequence[a])/100*(n.y-e.y);if(!(c>this.areaPos.bottom)){var u=this.startPtValue+(100-this.fiboSequence[a])/100*(this.endPtValue-this.startPtValue);o="".concat(this.fiboSequence[a].toFixed(1),"% ").concat(u.toFixed(r));var s=t.measureText(o).width;t.textBaseline="middle",t.fillText(o,this.areaPos.left,c),Gt.drawLine(t,this.areaPos.left+s+2,c,this.areaPos.right,c)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function se(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,le(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,et),function(t,e,n){e&&ue(t.prototype,e),n&&ue(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=Math.floor(e.getLeft()),o=Math.floor(e.getTop()),r=Math.floor(e.getRight()),i=Math.floor(e.getBottom());t.save(),t.rect(n,o,r-n,i-o),t.clip();for(var a=z.getLineAction(),c=a.getLineCount(),u=z.getTheme(),s=0;s<c;s++){var l=a.getLine(s),f=l.getState(),p=l.getPlotter();switch(p.theme=u,f){case L.BEFORE:p.drawCursor(t);break;case L.DRAWING:p.updateDraw(t);break;case L.AFTER:p.finishDraw(t)}}var h=a.getSelected();h&&h!==L.DRAWING&&h.getPlotter().highlight(t),t.restore()}}]),e}();function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function de(t,e){return!e||"object"!==he(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),de(this,be(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,et),function(t,e,n){e&&ye(t.prototype,e),n&&ye(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=z.getTimeline(),o=z.getModuleProvider(this.getModuleName()),r=!1;if(!e.isChanged()&&!n.isUpdated()&&!o.isUpdated()){var i=n.getFirstIndex(),a=n.getLastIndex(),c=Math.max(i,a-1),u=n.toColumnLeft(c);t.save(),t.rect(u,e.getTop(),e.getRight()-u,e.getHeight()),t.clip(),r=!0}var s=z.getTheme();o.getGradations().forEach(function(n){Gt.createHorzLine(t,e.getLeft(),e.getRight(),o.toY(n),s.Grid4)}),t.fill(),r&&t.restore()}}]),e}();function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function we(t,e){return!e||"object"!==me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),we(this,Oe(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,et),function(t,e,n){e&&_e(t.prototype,e),n&&_e(t,n)}(e,[{key:"Draw",value:function(t){return this.m_pArea=z.getArea(this.getAreaName()),this.m_pProvider=z.getModuleProvider(this.getModuleName()),this.m_pTheme=z.getTheme(),this._Draw_(t)}},{key:"_Draw_",value:function(t){if(this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=z.getChartAction().getDepthData();this.x_offset=0,this.y_offset=0;var n={},o={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pProvider.toY(e.array[this.m_ask_si].rate),o.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,o.y=this.m_pProvider.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-o.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.Background,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=z.getChartAction().getDepthData();if(0===this.m_mode){var n=this.m_pProvider.toY(e.array[this.m_ask_si].rate)-this.y_offset,o=this.m_pProvider.toY(e.array[this.m_bid_si].rate)+this.y_offset,r=t.createLinearGradient(this.m_left,0,this.m_right,0);r.addColorStop(0,this.m_pTheme.Background),r.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=r,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.Background),i.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=i,t.fillRect(this.m_left,o,this.m_right-this.m_left,this.m_bottom-o)}else if(1===this.m_mode){var a=t.createLinearGradient(this.m_left,0,this.m_right,0);a.addColorStop(0,this.m_pTheme.Background),a.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=a,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var c=t.createLinearGradient(this.m_left,0,this.m_right,0);c.addColorStop(0,this.m_pTheme.Background),c.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=c,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.Negative,t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.Positive,t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=z.getChartAction().getDepthData();this.m_ask_points=[];for(var e=this.m_ask_si;e>=this.m_ask_ei;e--){var n={},o={},r=this.m_ask_points.length;n.x=e==this.m_ask_si?this.m_left:this.m_ask_points[r-1].x,n.y=Math.floor(this.m_pProvider.toY(t.array[e].rate)-this.y_offset),o.x=Math.floor(this.m_left+t.array[e].amounts*this.m_Step+this.x_offset),o.y=n.y,this.m_ask_points.push(n),this.m_ask_points.push(o)}var i={},a=this.m_ask_points.length;i.x=this.m_ask_points[a-1].x,i.y=this.m_top,this.m_ask_points.push(i),this.m_bid_points=[];for(var c=this.m_bid_si;c<=this.m_bid_ei;c++){var u={},s={},l=this.m_bid_points.length;u.x=c==this.m_bid_si?this.m_left:this.m_bid_points[l-1].x,u.y=Math.ceil(this.m_pProvider.toY(t.array[c].rate)+this.y_offset),s.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),s.y=u.y,this.m_bid_points.push(u),this.m_bid_points.push(s)}var f={},p=this.m_bid_points.length;f.x=this.m_bid_points[p-1].x,f.y=this.m_bottom,this.m_bid_points.push(f)}},{key:"updateData",value:function(){var t=z.getChartAction().getDepthData();if(t.array.length<=50)return!1;var e=this.m_pProvider.getOuterMinValue(),n=this.m_pProvider.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var o=t.asks_si;o>=t.asks_ei&&t.array[o].rate<n;o--)this.m_ask_ei=o;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var r=t.bids_si;r<=t.bids_ei&&t.array[r].rate>e;r++)this.m_bid_ei=r;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"DrawGradations",value:function(t){var e=this;if(0!==this.m_pProvider.getHeight()){var n=this.m_pProvider.getGradations();if(0!==n.length){var o=this.m_pArea.getLeft(),r=this.m_pArea.getRight(),i=[];n.forEach(function(t){var n=e.m_pProvider.toY(t);i.push({x:o,y:n,w:6,h:1}),i.push({x:r-6,y:n,w:6,h:1})}),i.length>0&&(t.fillStyle=this.m_pTheme.Grid1,Gt.createRectangles(t,i),t.fill())}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,o={},r={};o.x=this.m_right,o.y=e[0].y,r.x=this.m_right,r.y=e[e.length-1].y;var i={},a={};i.x=this.m_right,i.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(o),e.push(r),n.unshift(i),n.push(a),t.fillStyle=this.m_pTheme.Background,t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var c=1;c<e.length;c++)t.lineTo(Math.floor(e[c].x)+.5,Math.floor(e[c].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}}]),e}();function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ae(t,e){return!e||"object"!==ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e){return(xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ae(this,je(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xe(t,e)}(e,Gt),function(t,e,n){e&&Ce(t.prototype,e),n&&Ce(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getDataSource();if(!(e.getDataSize()<1)){var n,o=z.getArea(this.getAreaName()),r=z.getTimeline(),i=z.getModuleProvider(this.getModuleName()),a=z.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth(),f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=n;b<=u;b++){var g=e.getDataAt(b),v=i.toY(g.high),m=i.toY(g.low),_=g.open;b>0&&(_=e.getDataAt(b-1).close);var w=g.close;if(w>_){var O=i.toY(w),S=i.toY(_),P=Math.max(S-O,1);h.push({x:f,y:O,w:Math.max(l,1),h:Math.max(P,1)}),g.high>w&&(v=Math.min(v,O-1),h.push({x:p,y:v,w:1,h:O-v})),_>g.low&&(m=Math.max(m,S+1),h.push({x:p,y:S,w:1,h:m-S}))}else if(w===_){var k=i.toY(w);y.push({x:f,y:k,w:Math.max(l,1),h:1}),g.high>w&&(v=Math.min(v,k-1)),_>g.low&&(m=Math.max(m,k+1)),v<m&&y.push({x:p,y:v,w:1,h:m-v})}else{var C=i.toY(_),A=i.toY(w),j=Math.max(A-C,1);d.push({x:f,y:C,w:Math.max(l,1),h:Math.max(j,1)}),g.high>_&&(v=Math.min(v,C-1)),w>g.low&&(m=Math.max(m,A+1)),v<m&&d.push({x:p,y:v,w:1,h:m-v})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,Gt.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,y),t.fill()),d.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,d),t.fill())}}}]),e}();function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Re(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Le=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Re(this,De(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(e,Gt),function(t,e,n){e&&Te(t.prototype,e),n&&Te(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getDataSource();if(!(e.getDataSize()<1)){var n,o=z.getArea(this.getAreaName()),r=z.getTimeline(),i=z.getModuleProvider(this.getModuleName()),a=z.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth(),f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=[],g=n;g<=u;g++){var v=e.getDataAt(g),m=i.toY(v.high),_=i.toY(v.low),w=v.open,O=v.close;if(O>w){var S=i.toY(O),P=i.toY(w),k=Math.max(P-S,1);h.push({x:f,y:S,w:Math.max(l,1),h:Math.max(k,1)}),v.high>O&&(m=Math.min(m,S-1),y.push({x:p,y:m,w:1,h:S-m})),w>v.low&&(_=Math.max(_,P+1),y.push({x:p,y:P,w:1,h:_-P}))}else if(O===w){var C=i.toY(O);d.push({x:f,y:C,w:Math.max(l,1),h:1}),v.high>O&&(m=Math.min(m,C-1)),w>v.low&&(_=Math.max(_,C+1)),m<_&&d.push({x:p,y:m,w:1,h:_-m})}else{var A=i.toY(w),j=i.toY(O),x=Math.max(j-A,1);b.push({x:f,y:A,w:Math.max(l,1),h:Math.max(x,1)}),v.high>w&&(m=Math.min(m,A-1)),O>v.low&&(_=Math.max(_,j+1)),m<_&&b.push({x:p,y:m,w:1,h:_-m})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,Gt.createRectangles(t,h),t.fill()),y.length>0&&(t.strokeStyle=a.Positive,t.beginPath(),y.forEach(function(e){var n=e.x,o=e.y,r=e.h;t.moveTo(n+.5,o),t.lineTo(n+.5,o+r)}),t.stroke(),t.closePath()),d.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,d),t.fill()),b.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,b),t.fill())}}}]),e}();function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Be(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Be(this,Ve(e).call(this,t))).arrowSizeRatio=.03,n.arrowSize=4,n.crossPt={x:-1,y:-1},n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(e,te),function(t,e,n){e&&Fe(t.prototype,e),n&&Fe(t,n)}(e,[{key:"drawArrow",value:function(t,e,n){var o=this.lenBetweenPts(e,n),r=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/o)*r[0],this.crossPt.y=e.y+(1-this.arrowSize/o)*r[1];var i=[-r[1],r[0]],a={x:i[0],y:i[1]},c={x:0,y:0};i[0]=this.arrowSize*a.x/this.lenBetweenPts(a,c),i[1]=this.arrowSize*a.y/this.lenBetweenPts(a,c);var u=[this.crossPt.x+i[0],this.crossPt.y+i[1]];Gt.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-i[0],this.crossPt.y-i[1]],Gt.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),e}();function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xe(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ke=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xe(this,Ge(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}(e,te),function(t,e,n){e&&We(t.prototype,e),n&&We(t,n)}(e,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),e}();function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qe(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qe(this,Ze(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(e,Ke),function(t,e,n){e&&qe(t.prototype,e),n&&qe(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),Gt.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),Gt.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),e}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function on(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=on(this,rn(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,Ke),function(t,e,n){e&&nn(t.prototype,e),n&&nn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),e}();function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ln(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ln(this,fn(e).call(this,t))).fiboFansSequence=[0,38.2,50,61.8],n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(e,te),function(t,e,n){e&&sn(t.prototype,e),n&&sn(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dn(this,bn(e).call(this,t))).fiboSequence=D,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(e,ae),e}();function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wn(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wn(this,On(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(e,te),function(t,e,n){e&&_n(t.prototype,e),n&&_n(t,n)}(e,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),e}();function kn(t){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function An(t,e){return!e||"object"!==kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=An(this,jn(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(e,te),function(t,e,n){e&&Cn(t.prototype,e),n&&Cn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),e}();function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ln=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rn(this,Dn(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,te),function(t,e,n){e&&Tn(t.prototype,e),n&&Tn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],Gt.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),e}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Un=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bn(this,Vn(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(e,te),function(t,e,n){e&&Fn(t.prototype,e),n&&Fn(t,n)}(e,[{key:"draw",value:function(t){var e=z.getDataSource().getDecimalDigits();t.font=this.theme.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var n=this.ctrlPts[0][0].getPosTV().v;Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(n.toFixed(e),this.startPoint.x+2,this.startPoint.y-15)}}]),e}();function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xn(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xn(this,Gn(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zn(t,e)}(e,te),function(t,e,n){e&&Wn(t.prototype,e),n&&Wn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),e}();function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qn(t,e){return!e||"object"!==Jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zn(t){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $n(t,e){return($n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var to=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qn(this,Zn(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(e,te),function(t,e,n){e&&qn(t.prototype,e),n&&qn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),Gt.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),e}();function eo(t){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function no(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oo(t,e){return!e||"object"!==eo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ao=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oo(this,ro(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,te),function(t,e,n){e&&no(t.prototype,e),n&&no(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?Gt.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),Gt.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),e}();function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function so(t,e){return!e||"object"!==co(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lo(t){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var po=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=so(this,lo(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,Ke),function(t,e,n){e&&uo(t.prototype,e),n&&uo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),Gt.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),Gt.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),Gt.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),e}();function ho(t){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bo(t,e){return!e||"object"!==ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bo(this,go(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(e,te),function(t,e,n){e&&yo(t.prototype,e),n&&yo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],Gt.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),e}();function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Oo(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ko=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oo(this,So(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Po(t,e)}(e,Gt),function(t,e,n){e&&wo(t.prototype,e),n&&wo(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getIndicatorAction(),n=z.getFrame(),o=z.getArea(this.getAreaName()),r=z.getModuleProvider(this.getModuleName()),i=z.getDataSource().getSelectedIndex(),a=z.getTheme();t.font=a.DefaultFont,t.textAlign="left",t.textBaseline="top",t.fillStyle=a.Text4;var c={x:o.getLeft()+8,y:o.getTop()+8,w:n.getWidth()-8,h:20};r.getIndicators().forEach(function(n){var o;switch(n.getParameterCount()){case 0:o=n.getName();break;case 1:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),")");break;case 2:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),")");break;case 3:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),",").concat(n.getParameterAt(2).getValue(),")");break;case 4:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),",").concat(n.getParameterAt(2).getValue(),",").concat(n.getParameterAt(3).getValue(),")");break;default:return}if(Gt.drawString(t,o,c)){var r,u,s,l,f=n.getOutputCount(),p=n.getName();for(l=0;l<f;l++){u=(r=n.getOutputAt(l)).execute(i);var h=r.getName(),y=e.getIndicatorStorage(p,h),d=y.show,b=y.color;if(d&&!isNaN(u)&&(s="  ".concat(r.getRangeName(),": ").concat(u.toFixed(w.safeDigits(u))),t.fillStyle=r.getColor()||b||a["Indicator".concat(l)],!Gt.drawString(t,s,c)))return}}})}}]),e}();function Co(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ao=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rid=0}return function(t,e,n){e&&Co(t.prototype,e),n&&Co(t,n)}(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}();function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Eo(t,e){return!e||"object"!==jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function To(t,e){return(To=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ro=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Eo(this,Mo(e).call(this)))._exprA=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&To(t,e)}(e,Ao),function(t,e,n){e&&xo(t.prototype,e),n&&xo(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),e}();function Do(t){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lo(t,e){return!e||"object"!==Do(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function No(t){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fo(t,e){return(Fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lo(this,No(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fo(t,e)}(e,Ro),function(t,e,n){e&&Io(t.prototype,e),n&&Io(t,n)}(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}();function Vo(t){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uo(t,e){return!e||"object"!==Vo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wo(t,e){return(Wo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xo=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Uo(this,Yo(e).call(this)))._exprA=t,o._exprB=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wo(t,e)}(e,Ao),function(t,e,n){e&&Ho(t.prototype,e),n&&Ho(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),e}();function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ko(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jo(t){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qo(t,e){return(qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ko(this,Jo(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qo(t,e)}(e,Xo),function(t,e,n){e&&zo(t.prototype,e),n&&zo(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),e}();function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tr(t,e){return!e||"object"!==Zo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nr(t,e){return(nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var or=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tr(this,er(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nr(t,e)}(e,Xo),function(t,e,n){e&&$o(t.prototype,e),n&&$o(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),e}();function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ar(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cr(t,e,n){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ur(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ur(t){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lr=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ar(this,ur(e).call(this,n)))._name=t,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(e,Ro),function(t,e,n){e&&ir(t.prototype,e),n&&ir(t,n)}(e,[{key:"getName",value:function(){return this._name}},{key:"getRangeName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){this._buf[t]=this._exprA.execute(t)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push(NaN);cr(ur(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){cr(ur(e.prototype),"clear",this).call(this),this._buf=[]}}]),e}();function fr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pr(this,"_ds",null),pr(this,"_firstIndex",null)}return function(t,e,n){e&&fr(t.prototype,e),n&&fr(t,n)}(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function br(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}pr(hr,"inst",null);var mr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),br(this,gr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(e,Ao),function(t,e,n){e&&dr(t.prototype,e),n&&dr(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getDataAt(t).close}}]),e}();function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Or(t,e){return!e||"object"!==_r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Or(this,Sr(e).call(this)))._value=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(e,Ao),function(t,e,n){e&&wr(t.prototype,e),n&&wr(t,n)}(e,[{key:"execute",value:function(){return this._value}}]),e}();function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jr(t,e){return!e||"object"!==Cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xr(t,e,n){return(xr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Er(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=jr(this,Er(e).call(this,t,n)))._range=-1,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,Xo),function(t,e,n){e&&Ar(t.prototype,e),n&&Ar(t,n)}(e,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({resultA:NaN,result:NaN});xr(Er(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){xr(Er(e.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),e}();function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ir(t,e){return!e||"object"!==Rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lr(t){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return(Nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ir(this,Lr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nr(t,e)}(e,Tr),function(t,e,n){e&&Dr(t.prototype,e),n&&Dr(t,n)}(e,[{key:"calcResult",value:function(t){if(0===this._range)return NaN;var e=hr.get()._firstIndex;if(e<0)return 0;if(t>=e){var n=this._range-1;n>t-e&&(n=t-e);for(var o=0;n>=0;n--)0!==this._buf[t-n].resultA&&o++;return o}return 0}}]),e}();function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ur(t){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hr(this,Ur(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(e,Xo),function(t,e,n){e&&Vr(t.prototype,e),n&&Vr(t,n)}(e,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?e>0?1e6:-1e6:e/n}}]),e}();function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zr(t,e){return!e||"object"!==Xr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kr(t,e,n){return(Kr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jr(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zr(this,Jr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(e,Tr),function(t,e,n){e&&Gr(t.prototype,e),n&&Gr(t,n)}(e,[{key:"initRange",value:function(){Kr(Jr(e.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._buf[t-1];return this._alpha*(e-o.result)+o.result}return e}}]),e}();function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ti(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ei(t){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ti(this,ei(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(e,Xo),function(t,e,n){e&&$r(t.prototype,e),n&&$r(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),e}();function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ai(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var si=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ai(this,ci(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(e,Qr),function(t,e,n){e&&ii(t.prototype,e),n&&ii(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range,r=this._buf[t-1];return o>=t+1-n?(o=t+1-n,r.result*(1-1/o)+e/o):this._alpha*(e-r.result)+r.result}return e}}]),e}();function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pi(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yi(t,e){return(yi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pi(this,hi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yi(t,e)}(e,Xo),function(t,e,n){e&&fi(t.prototype,e),n&&fi(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),e}();function bi(t){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vi(t,e){return!e||"object"!==bi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _i(t,e){return(_i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vi(this,mi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_i(t,e)}(e,Tr),function(t,e,n){e&&gi(t.prototype,e),n&&gi(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o<a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function Oi(t){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Si(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pi(t,e){return!e||"object"!==Oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ci(t,e){return(Ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ai=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pi(this,ki(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ci(t,e)}(e,Ao),function(t,e,n){e&&Si(t.prototype,e),n&&Si(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getDataAt(t).high}}]),e}();function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ei(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ti(t,e){return(Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ri=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ei(this,Mi(e).call(this)))._exprA=t,r._exprB=n,r._exprC=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ti(t,e)}(e,Ao),function(t,e,n){e&&xi(t.prototype,e),n&&xi(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),e}();function Di(t){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ii(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Li(t,e){return!e||"object"!==Di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fi(t,e){return(Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Li(this,Ni(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fi(t,e)}(e,Ri),function(t,e,n){e&&Ii(t.prototype,e),n&&Ii(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),e}();function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ui(t,e){return!e||"object"!==Vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yi(t){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ui(this,Yi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(e,Tr),function(t,e,n){e&&Hi(t.prototype,e),n&&Hi(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o>a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function Gi(t){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ki(t,e){return!e||"object"!==Gi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ki(this,Ji(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(e,Ao),function(t,e,n){e&&zi(t.prototype,e),n&&zi(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getDataAt(t).low}}]),e}();function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ta(t,e){return!e||"object"!==Zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ea(t){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function na(t,e){return(na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ta(this,ea(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&na(t,e)}(e,Xo),function(t,e,n){e&&$i(t.prototype,e),n&&$i(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),e}();function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function aa(t,e){return!e||"object"!==ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ua(t,e){return(ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,ca(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}(e,Tr),function(t,e,n){e&&ia(t.prototype,e),n&&ia(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>=t+1-n?(o=t+1-n,this._buf[t-1].result*(1-1/o)+e/o):this._buf[t-1].result+(e-this._buf[t-o].resultA)/o}return e}}]),e}();function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pa(t,e){return!e||"object"!==la(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ha(t){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ya(t,e){return(ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var da=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pa(this,ha(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ya(t,e)}(e,Xo),function(t,e,n){e&&fa(t.prototype,e),n&&fa(t,n)}(e,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),e}();function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function va(t,e){return!e||"object"!==ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){return(_a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),va(this,ma(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_a(t,e)}(e,Xo),function(t,e,n){e&&ga(t.prototype,e),n&&ga(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),e}();function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pa(t,e){return!e||"object"!==Oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Aa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pa(this,ka(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(e,Ro),function(t,e,n){e&&Sa(t.prototype,e),n&&Sa(t,n)}(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}();function ja(t){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ea(t,e){return!e||"object"!==ja(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ma(t){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ta(t,e){return(Ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ra=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ea(this,Ma(e).call(this)))._exprA=t,i._exprB=n,i._exprC=o,i._exprD=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ta(t,e)}(e,Ao),function(t,e,n){e&&xa(t.prototype,e),n&&xa(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),e}();function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function La(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Na(t){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ba=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),La(this,Na(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(e,Ao),function(t,e,n){e&&Ia(t.prototype,e),n&&Ia(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getDataAt(t).open}}]),e}();function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ha(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ua(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xa=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ua(this,Ya(e).call(this,t,n)))._style=void 0===o?e.outputStyle.Line:o,i._color=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(e,lr),function(t,e,n){e&&Ha(t.prototype,e),n&&Ha(t,n)}(e,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),e}();function Ga(t){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ka(t,e){return!e||"object"!==Ga(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ja(t){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qa(t,e){return(qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Xa,"outputStyle",{None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4});var Qa=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ka(this,Ja(e).call(this)))._name=t,i._minValue=n,i._maxValue=o,i._value=r,i._defaultValue=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qa(t,e)}(e,Ao),function(t,e,n){e&&za(t.prototype,e),n&&za(t,n)}(e,[{key:"execute",value:function(){return this._value}},{key:"getName",value:function(){return this._name}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),e}();function Za(t){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tc(t,e){return!e||"object"!==Za(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ec(t){return(ec=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nc(t,e){return(nc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oc=function(t){function e(t,n,o,r,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=tc(this,ec(e).call(this,n,o,r,i)))._prefix=t,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nc(t,e)}(e,Xa),function(t,e,n){e&&$a(t.prototype,e),n&&$a(t,n)}(e,[{key:"getRangeName",value:function(){return this._prefix+this._exprA.getRange()}}]),e}();function rc(t){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ac(t,e){return!e||"object"!==rc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cc(t){return(cc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uc(t,e){return(uc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ac(this,cc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uc(t,e)}(e,Xo),function(t,e,n){e&&ic(t.prototype,e),n&&ic(t,n)}(e,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),e}();function lc(t){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pc(t,e){return!e||"object"!==lc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hc(t,e,n){return(hc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yc(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function yc(t){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dc(t,e){return(dc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bc=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=pc(this,yc(e).call(this,t,n,o,r)))._buf=[],i._range=-1,i._min=null,i._step=null,i._max=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dc(t,e)}(e,Ra),function(t,e,n){e&&fc(t.prototype,e),n&&fc(t,n)}(e,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=hr.get(),o=n._firstIndex;if(o<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var r=n._ds.getDataAt(t).high,i=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,r>a.ep?(e.ep=r,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>i){e.longPos=!1;var c=t-this._range+1;for(c=Math.max(c,o);c<t;c++){var u=n._ds.getDataAt(c).high;r<u&&(r=u)}e.sar=r,e.ep=i,e.af=.02}}else if(e.longPos=!1,i<a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<r){e.longPos=!0;var s=t-this._range+1;for(s=Math.max(s,o);s<t;s++){var l=n._ds.getDataAt(s).low;i>l&&(i=l)}e.sar=i,e.ep=r,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});hc(yc(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){hc(yc(e.prototype),"clear",this).call(this),this._range=-1}}]),e}();function gc(t){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mc(t,e){return!e||"object"!==gc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _c(t,e,n){return(_c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wc(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function wc(t){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oc(t,e){return(Oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sc=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mc(this,wc(e).call(this,t,n)))._exprC=o,r._mul=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oc(t,e)}(e,Tr),function(t,e,n){e&&vc(t.prototype,e),n&&vc(t,n)}(e,[{key:"initRange",value:function(){_c(wc(e.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>t+1-n&&(o=t+1-n),((o-1)*this._buf[t-1].result+e*this._mul)/o}return e}}]),e}();function Pc(t){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cc(t,e){return!e||"object"!==Pc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ac(t,e,n){return(Ac="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jc(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function jc(t){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xc(t,e){return(xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ec=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Cc(this,jc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xc(t,e)}(e,Tr),function(t,e,n){e&&kc(t.prototype,e),n&&kc(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],o=hr.get()._firstIndex;if(o<0)return n.resultMA=e,0;if(t>o){var r=this._range;r>=t+1-o?(r=t+1-o,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/r)+e/r):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-r].resultA)/r;for(var i=0,a=t-r+1;a<=t;a++)i+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(i/r)}return n.resultMA=e,0}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._stdBuf.push({resultMA:NaN});Ac(jc(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Ac(jc(e.prototype),"clear",this).call(this),this._stdBuf=[]}}]),e}();function Mc(t){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rc(t,e){return!e||"object"!==Mc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dc(t){return(Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ic(t,e){return(Ic=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rc(this,Dc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ic(t,e)}(e,Xo),function(t,e,n){e&&Tc(t.prototype,e),n&&Tc(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),e}();function Nc(t){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bc(t,e){return!e||"object"!==Nc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vc(t){return(Vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hc(t,e){return(Hc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bc(this,Vc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hc(t,e)}(e,Tr),function(t,e,n){e&&Fc(t.prototype,e),n&&Fc(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=hr.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return 0===o||o>=t+1-n?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-o].resultA}return e}}]),e}();function Yc(t){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xc(t,e){return!e||"object"!==Yc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gc(t){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zc(t,e){return(zc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xc(this,Gc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zc(t,e)}(e,Ao),function(t,e,n){e&&Wc(t.prototype,e),n&&Wc(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getDataAt(t).volume}}]),e}();function Jc(t){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qc(t,e){return!e||"object"!==Jc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zc(t){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $c(t,e){return($c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qc(this,Zc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$c(t,e)}(e,Ao),function(t,e,n){e&&qc(t.prototype,e),n&&qc(t,n)}(e,[{key:"execute",value:function(t){return hr.get()._ds.getIndexPriceAt(t).close}}]),e}();function eu(t){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ou(t,e){return!e||"object"!==eu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iu(t,e){return(iu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var au=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ou(this,ru(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iu(t,e)}(e,et),function(t,e,n){e&&nu(t.prototype,e),n&&nu(t,n)}(e,[{key:"Draw",value:function(t){var e=this,n=z.getIndicatorAction(),o=z.getDataSource(),r=z.getArea(this.getAreaName()),i=z.getTimeline(),a=z.getModuleProvider(this.getModuleName()),c=z.getTheme();if(0!==a.getHeight()){var u,s=i.getColumnWidth(),l=i.getFirstIndex(),f=i.getLastIndex();u=r.isChanged()||i.isUpdated()||a.isUpdated()?l:Math.max(l,f-1),a.getIndicators().forEach(function(p){var h,y,d=p.getOutputCount(),b=p.getName();for(y=0;y<d;y++){var g=(h=p.getOutputAt(y)).getStyle();g===Xa.outputStyle.VolumeStick?e.drawVolumeStick(t,c,o,u,f,i.toItemLeft(u),s,i.getItemWidth(),a):g===Xa.outputStyle.MACDStick?e.drawMACDStick(t,c,h,u,f,i.toItemLeft(u),s,i.getItemWidth(),a):g===Xa.outputStyle.SARPoint&&e.drawSARPoint(t,c,h,u,f,i.toItemCenter(u),s,i.getItemWidth(),a)}var v=i.toColumnLeft(u),m=i.toItemCenter(u);for(t.save(),t.rect(v,r.getTop(),r.getRight()-v,r.getHeight()),t.clip(),t.translate(.5,.5),y=0;y<d;y++){var _=m,w=(h=p.getOutputAt(y)).getName(),O=n.getIndicatorStorage(b,w),S=O.show,P=O.color,k=O.width;if(h.getStyle()===Xa.outputStyle.Line&&S){var C=void 0,A=[];u>l&&(C=h.execute(u-1),!1===isNaN(C)&&A.push({x:_-s,y:a.toY(C)}));for(var j=u;j<=f;j++,_+=s)C=h.execute(j),!1===isNaN(C)&&A.push({x:_,y:a.toY(C)});A.length>0&&(t.strokeStyle=h.getColor()||P||c["Indicator".concat(y)],t.lineWidth=k||1,Gt.drawLines(t,A))}}t.restore()})}}},{key:"drawVolumeStick",value:function(t,e,n,o,r,i,a,c,u){for(var s=i,l=[],f=[],p=[],h=o;h<=r;h++){var y=n.getDataAt(h);if(y){var d=u.toY(y.volume),b=u.toHeight(y.volume);y.close>y.open?b>1&&c>1?l.push({x:s+.5,y:d+.5,w:c-1,h:b-1}):f.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}):y.close===y.open&&h>0&&y.close>=n.getDataAt(h-1).close?b>1&&c>1?l.push({x:s+.5,y:d+.5,w:c-1,h:b-1}):f.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}):p.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}),s+=a}}l.length>0&&(t.strokeStyle=e.PositiveOpacity30,Gt.createRectangles(t,l),t.stroke()),f.length>0&&(t.fillStyle=e.PositiveOpacity30,Gt.createRectangles(t,f),t.fill()),p.length>0&&(t.fillStyle=e.NegativeOpacity30,Gt.createRectangles(t,p),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,o,r,i,a,c,u){for(var s=i,l=u.toY(0),f=[],p=[],h=[],y=[],d=o>0?n.execute(o-1):NaN,b=o;b<=r;b++){var g=n.execute(b);if(g>=0){var v=u.toHeight(g);(0===b||g>=d)&&v>1&&c>1?f.push({x:s+.5,y:l-v+.5,w:c-1,h:v-1}):h.push({x:s,y:l-v,w:Math.max(c,1),h:Math.max(v,1)})}else{var m=u.toHeight(-g);(0===b||g>=d)&&m>1&&c>1?p.push({x:s+.5,y:l+.5,w:c-1,h:m-1}):y.push({x:s,y:l,w:Math.max(c,1),h:Math.max(m,1)})}d=g,s+=a}f.length>0&&(t.strokeStyle=e.PositiveOpacity30,Gt.createRectangles(t,f),t.stroke()),p.length>0&&(t.strokeStyle=e.NegativeOpacity30,Gt.createRectangles(t,p),t.stroke()),h.length>0&&(t.fillStyle=e.PositiveOpacity30,Gt.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=e.NegativeOpacity30,Gt.createRectangles(t,y),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,o,r,i,a,c,u){var s=c>>1;s<.5&&(s=.5),s>4&&(s=4);var l=i,f=l+s,p=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.Indicator3,t.beginPath();for(var h=o;h<=r;h++){var y=u.toY(n.execute(h));t.moveTo(f,y),t.arc(l,y,s,0,p),l+=a,f+=a}t.stroke(),t.restore()}}]),e}(),cu={period:"15m",periodCollects:["line","1m","5m","15m","1H","4H","1D","3D","1W","1M","1Y"],mainStyle:"CandleStick",showIndics:!0,mainIndic:["MA"],selectedDeputyIndics:["VOLUME","MACD"],klineType:"Original",showLineTool:!1,custom:{showIdxIndic:!1}},uu={showPriceLine:!0,horizontalLine:{show:!0,width:1},crossCurve:{width:1},indicator:{LINE:{CLOSE:{width:1,show:!0},MA:{width:1,show:!0}},MA:{MA1:{width:1,value:5,show:!0},MA2:{width:1,value:10,show:!0},MA3:{width:1,value:20,show:!0},MA4:{width:1,value:30,show:!1},MA5:{width:1,value:60,show:!1},MA6:{width:1,value:120,show:!1}},EMA:{EMA1:{width:1,value:5,show:!0},EMA2:{width:1,value:10,show:!0},EMA3:{width:1,value:20,show:!0},EMA4:{width:1,value:30,show:!1},EMA5:{width:1,value:60,show:!1},EMA6:{width:1,value:120,show:!1}},BOLL:{N:{value:20},K:{value:2},BOLL:{width:1,show:!0},UB:{width:1,show:!0},LB:{width:1,show:!0}},SAR:{SAR:{width:1,show:!0}},IXPE:{Index:{width:1,show:!0}},VOLUME:{MA1:{width:1,value:5,show:!0},MA2:{width:1,value:10,show:!0},VOLUME:{show:!0}},MACD:{SHORT:{value:12},LONG:{value:26},MID:{value:9},DIF:{width:1,show:!0},DEA:{width:1,show:!0},MACD:{show:!0}},KDJ:{N:{value:9},M1:{value:3},M2:{value:3},K:{width:1,show:!0},D:{width:1,show:!0},J:{width:1,show:!0}},StochRSI:{N:{value:14},M:{value:14},P1:{value:3},P2:{value:3},STOCHRSI:{width:1,show:!0},MASTOCHRSI:{width:1,show:!0}},RSI:{N1:{value:6},N2:{value:12},N3:{value:24},RSI1:{width:1,show:!0},RSI2:{width:1,show:!0},RSI3:{width:1,show:!0}},DMI:{N:{value:14},MM:{value:6},PDI:{width:1,show:!0},MDI:{width:1,show:!0},ADX:{width:1,show:!0},ADXR:{width:1,show:!0}},OBV:{M:{value:30},OBV:{width:1,show:!0},MAOBV:{width:1,show:!0}},DMA:{N1:{value:10},N2:{value:50},M:{value:10},DIF:{width:1,show:!0},DIFMA:{width:1,show:!0}},TRIX:{N:{value:12},M:{value:9},TRIX:{width:1,show:!0},MATRIX:{width:1,show:!0}},BRAR:{N:{value:26},BR:{width:1,show:!0},AR:{width:1,show:!0}},VR:{N:{value:26},M:{value:6},VR:{width:1,show:!0},MAVR:{width:1,show:!0}},EMV:{N:{value:14},M:{value:9},EMV:{width:1,show:!0},MAEMV:{width:1,show:!0}},WR:{N:{value:10},N1:{value:6},WR1:{width:1,show:!0},WR2:{width:1,show:!0}},ROC:{N:{value:12},M:{value:6},ROC:{width:1,show:!0},MAROC:{width:1,show:!0}},MTM:{N:{value:12},M:{value:6},MTM:{width:1,show:!0},MAMTM:{width:1,show:!0}},PSY:{N:{value:12},M:{value:6},PSY:{width:1,show:!0},MAPSY:{width:1,show:!0}}},deputyAreaHeight:{}},su={horizontalLine:{color:"#898989"},crossCurve:{color:"#898989"},indicator:{LINE:{CLOSE:{color:"#E64C7D"},MA:{color:"#F7B715"}},MA:{MA1:{color:"#E64C7D"},MA2:{color:"#F7B715"},MA3:{color:"#D051DA"},MA4:{color:"#38BCAF"},MA5:{color:"#CB7554"},MA6:{color:"#9BD75A"}},EMA:{EMA1:{color:"#E64C7D"},EMA2:{color:"#F7B715"},EMA3:{color:"#D051DA"},EMA4:{color:"#38BCAF"},EMA5:{color:"#CB7554"},EMA6:{color:"#9BD75A"}},BOLL:{BOLL:{color:"#E64C7D"},UB:{color:"#F7B715"},LB:{color:"#D051DA"}},IXPE:{Index:{color:"#9BD75A"}},VOLUME:{MA1:{color:"#E64C7D"},MA2:{color:"#F7B715"},VOLUME:{color:"#656565"}},MACD:{DIF:{color:"#E64C7D"},DEA:{color:"#F7B715"},MACD:{color:"#656565"}},KDJ:{K:{color:"#E64C7D"},D:{color:"#F7B715"},J:{color:"#D051DA"}},StochRSI:{STOCHRSI:{color:"#E64C7D"},MASTOCHRSI:{color:"#F7B715"}},RSI:{RSI1:{color:"#E64C7D"},RSI2:{color:"#F7B715"},RSI3:{color:"#D051DA"}},DMI:{PDI:{color:"#E64C7D"},MDI:{color:"#F7B715"},ADX:{color:"#D051DA"},ADXR:{color:"#38BCAF"}},OBV:{OBV:{color:"#E64C7D"},MAOBV:{color:"#F7B715"}},DMA:{DIF:{color:"#E64C7D"},DIFMA:{color:"#F7B715"}},TRIX:{TRIX:{color:"#E64C7D"},MATRIX:{color:"#F7B715"}},BRAR:{BR:{color:"#E64C7D"},AR:{color:"#F7B715"}},VR:{VR:{color:"#E64C7D"},MAVR:{color:"#F7B715"}},EMV:{EMV:{color:"#E64C7D"},MAEMV:{color:"#F7B715"}},WR:{WR1:{color:"#E64C7D"},WR2:{color:"#F7B715"}},ROC:{ROC:{color:"#E64C7D"},MAROC:{color:"#F7B715"}},MTM:{MTM:{color:"#E64C7D"},MAMTM:{color:"#F7B715"}},PSY:{PSY:{color:"#E64C7D"},MAPSY:{color:"#F7B715"}}}},lu={horizontalLine:{color:"#606775"},crossCurve:{color:"#606775"},indicator:{LINE:{CLOSE:{color:"#FFFFFF"},MA:{color:"#F7B715"}},MA:{MA1:{color:"#FFFFFF"},MA2:{color:"#F7B715"},MA3:{color:"#D051DA"},MA4:{color:"#38BCAF"},MA5:{color:"#CB7554"},MA6:{color:"#9BD75A"}},EMA:{EMA1:{color:"#FFFFFF"},EMA2:{color:"#F7B715"},EMA3:{color:"#D051DA"},EMA4:{color:"#38BCAF"},EMA5:{color:"#CB7554"},EMA6:{color:"#9BD75A"}},BOLL:{BOLL:{color:"#FFFFFF"},UB:{color:"#F7B715"},LB:{color:"#D051DA"}},IXPE:{Index:{color:"#9BD75A"}},VOLUME:{MA1:{color:"#FFFFFF"},MA2:{color:"#F7B715"},VOLUME:{color:"#FFFFFF"}},MACD:{DIF:{color:"#FFFFFF"},DEA:{color:"#F7B715"},MACD:{color:"#FFFFFF"}},KDJ:{K:{color:"#FFFFFF"},D:{color:"#F7B715"},J:{color:"#D051DA"}},StochRSI:{STOCHRSI:{color:"#FFFFFF"},MASTOCHRSI:{color:"#F7B715"}},RSI:{RSI1:{color:"#FFFFFF"},RSI2:{color:"#F7B715"},RSI3:{color:"#D051DA"}},DMI:{PDI:{color:"#FFFFFF"},MDI:{color:"#F7B715"},ADX:{color:"#D051DA"},ADXR:{color:"#38BCAF"}},OBV:{OBV:{color:"#FFFFFF"},MAOBV:{color:"#F7B715"}},DMA:{DIF:{color:"#FFFFFF"},DIFMA:{color:"#F7B715"}},TRIX:{TRIX:{color:"#FFFFFF"},MATRIX:{color:"#F7B715"}},BRAR:{BR:{color:"#FFFFFF"},AR:{color:"#F7B715"}},VR:{VR:{color:"#FFFFFF"},MAVR:{color:"#F7B715"}},EMV:{EMV:{color:"#FFFFFF"},MAEMV:{color:"#F7B715"}},WR:{WR1:{color:"#FFFFFF"},WR2:{color:"#F7B715"}},ROC:{ROC:{color:"#FFFFFF"},MAROC:{color:"#F7B715"}},MTM:{MTM:{color:"#FFFFFF"},MAMTM:{color:"#F7B715"}},PSY:{PSY:{color:"#FFFFFF"},MAPSY:{color:"#F7B715"}}}};function fu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pu=function(t){var e=t.list,n=t.key,o=t.currency,r=t.lang;return e.map(function(t){var e=t.coin,i=t.instrumentId,a=t.charge,c=t.type,u="USD"===a&&"index"===n?o:a,s=r["".concat(n,"_desc")]||r["".concat(n,"_desc_").concat(c)]||"";return{symbol:e,description:"".concat(u).concat(s),full_name:i,charge:a}})},hu=function(t,e,n){var o="USD"===e?n:1,r=fu(t,6),i=r[0],a=r[1],c=r[2],u=r[3],s=r[4],l=r[5],f=Number(i);return Number.isNaN(f)&&(f=new Date(i).getTime()),[f,Number(a)*o,Number(c)*o,Number(u)*o,Number(s)*o,Number(l)]},yu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e?".".concat(t.replace(/^(\w+)-USD(-\w+)?$/,"$1-".concat(e,"$2"))):t},du={index:{product:"index",channel:"candle",klineUrl:"/api/index/v3/instruments/<symbol>/candles",listUrl:"/api/index/v3/instruments/list",convertName:yu,convertList:pu,dataAdapter:hu},futures:{product:"futures",channel:"candle",klineUrl:"/v3/futures/pc/market/<symbol>/candles",listUrl:"/v3/futures/pc/public/contractInfo",convertList:pu,dataAdapter:hu},swap:{product:"swap",channel:"candle",klineUrl:"/v2/perpetual/pc/public/instruments/<symbol>/candles",listUrl:"/v2/perpetual/pc/public/contract/info",convertList:pu,dataAdapter:hu}},bu={index:{isV5:!0,channel:"index-candle",klineUrl:"/priapi/v5/market/index-candles",listUrl:"/api/index/v3/instruments/list",convertName:yu,convertList:pu,dataAdapter:hu},futures:{isV5:!0,channel:"candle",klineUrl:"/priapi/v5/market/candles",listUrl:"/v3/futures/pc/public/contractInfo",convertList:pu,dataAdapter:hu},swap:{isV5:!0,channel:"candle",klineUrl:"/priapi/v5/market/candles",listUrl:"/v2/perpetual/pc/public/contract/info",convertList:pu,dataAdapter:hu}},gu=window.okGlobal||{},vu=gu.cdnBaseUrl,mu=void 0===vu?"https://static.coinall.ltd":vu,_u=gu.locale,wu=void 0===_u?"zh_CN":_u,Ou="zh_CN"===wu,Su={isV5:!1,kId:"",element:"",klineUrl:"",wsUrl:"",product:"",channel:"candle",symbol:"",exchange:"",compare:void 0,rate:1,currency:"",dataAdapter:function(t){return t[0]=new Date(t[0]).getTime(),t[1]=Number(t[1]),t[2]=Number(t[2]),t[3]=Number(t[3]),t[4]=Number(t[4]),t[5]=Number(t[5]),t},cdnBaseUrl:mu,barHeight:"36",width:"",height:"",language:wu,theme:"dark",customTheme:{},periods:["line","1m","3m","5m","15m","30m","1H","2H","4H","6H","12H","1D","2D","3D","5D","1W","1M","3M","6M","1Y"],mainStyles:["CandleStick","CandleStickHLC","OHLC"],mainIndics:["MA","EMA","BOLL","SAR","None"],deputyIndics:["VOLUME","MACD","KDJ","StochRSI","RSI","DMI","OBV","BOLL","SAR","DMA","TRIX","BRAR","VR","EMV","WR","ROC","MTM","PSY"],reverseColor:!1,openTimeZone:"utc8",showVolume:!0,showFullscreen:!0,showToggle:!0,candleScale:6,enableWheelScale:!0,mainInfoStyle:"vertical",maxToolCount:20,priceType:"",logo:{position:{location:"left-bottom",x:16,y:-12},size:{width:Ou?114.08:81.35,height:24},img:{light:"".concat(mu,"/cdn/assets/imgs/213/").concat(Ou?"ED8F1CCD06395F05":"E903BD8B0CAF1C27",".png"),dark:"".concat(mu,"/cdn/assets/imgs/213/").concat(Ou?"F82861ADABAC75BC":"F9262487814545E9",".png"),default:""}}},Pu=navigator.userAgent,ku=/iphone|ipad|ipod|ios|android/i.test(Pu),Cu={isMobile:ku,isPC:!ku,isUC:/ucbrowser/i.test(Pu)};function Au(t){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ju(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Eu=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xu(this,"cover",function(t){var e=t.target,o=t.keyTarget,r=t.sources,i=t.keys,a=void 0===i?[]:i,c=t.force,u=void 0===c||c,s=t.sourcesKey,l=o||e,f=void 0!==s&&s?r:l;return Object.keys(f).forEach(function(o){var i=l[o],c=r[o],s=ju(a).concat([o]);if(i&&i.constructor===Object&&c&&c.constructor===Object)n.cover(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){xu(t,e,n[e])})}return t}({},t,{target:e,keyTarget:i,sources:c,keys:s}));else if(void 0!==c&&(u||void 0===i)){var f=e,p=a.length;s.forEach(function(t,e){e===p?f[t]=n.copy(c):f=f[t]})}}),e}),xu(this,"copy",function(t){if("object"!==Au(t)||null===t)return t;var e=t.constructor===Array?[]:{};return Object.keys(t).forEach(function(o){e[o]=n.copy(t[o])}),e}),xu(this,"getDefaultStorage",function(t){t||n.copy(n.defaultStorage);var e=t.split("."),o=n.defaultStorage;return e.forEach(function(t){o=o[t]}),n.copy(o)}),xu(this,"saveStorage",function(){localStorage.setItem(n.oId,JSON.stringify(n.storage))}),xu(this,"setStorage",function(t,e){var o=t.split("."),r=o.length-1,i=n.storage,a=e;return void 0===e&&(a=n.getDefaultStorage(t)),o.forEach(function(t,e){e===r&&(i[t]=a),i=i[t]}),n.saveStorage(),a}),xu(this,"updateStorage",function(t){n.cover({target:n.storage,sources:t,sourcesKey:!0}),n.saveStorage()}),xu(this,"setConfig",function(t,e){n.config[t]=e}),xu(this,"updateConfig",function(t){n.cover({target:n.config,sources:t,sourcesKey:!0}),Cu.isMobile&&(n.config.showToggle=!1);var e=t.compare;e&&n.coverCompare(e)}),xu(this,"coverCompare",function(t){if(t){var e=n.config.isV5;Object.keys(t).forEach(function(n){!0===t[n]&&(t[n]=e?bu[n]:du[n])})}n.config.compare=t}),xu(this,"updateCompare",function(t){n.coverCompare(t),n.updateCustom()}),xu(this,"updateTheme",function(t){var e=n.config.theme!==t;n.config.theme=t;var o="light"===t?su:lu;n.cover({target:n.defaultStorage,sources:o,sourcesKey:!0,force:e}),n.cover({target:n.storage,sources:o,sourcesKey:!0,force:e}),n.saveStorage()}),xu(this,"updateLanguage",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase();n.config.language=["zh_cn","en_us","zh_hk"].includes(t)?t:"en_us"}),xu(this,"updateCustom",function(){var t=n.config,e=t.compare,o=void 0===e?{}:e,r=t.mainIndics,i=t.periods,a=o.index,c=n.storage,u=c.mainIndic,s=c.custom,l=c.period,f=r.indexOf("Index"),p=u.indexOf("Index");a?(r.includes("Index")||r.splice(r.length-1,0,"Index"),s.showIdxIndic&&-1===p&&u.length<2&&u.push("Index"),u.includes("Index")||(s.showIdxIndic=!1)):(f>-1&&r.splice(f,1),p>-1&&(u.splice(p,1),s.showIdxIndic=!0)),Cu.isMobile&&(n.storage.klineType="Original",n.storage.showLineTool=!1),i.includes(l)||(n.storage.period="15m")}),xu(this,"init",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kId||"okline";n.oId="".concat(e,"-original-settings-v2"),n.tId="".concat(e,"-tradingview-settings-v2"),n.config=n.copy(Su),n.updateConfig(t),n.defaultStorage=n.copy(uu),n.storage=n.copy(n.defaultStorage),n.configStorage=n.copy(cu),n.cover({target:n.configStorage,sources:n.config}),n.cover({target:n.storage,sources:n.configStorage,sourcesKey:!0});var o=localStorage.getItem(n.oId);o&&n.cover({target:n.storage,sources:JSON.parse(o),sourcesKey:!0});var r=n.config,i=r.theme,a=r.language,c=r.compare;n.updateTheme(i),n.updateLanguage(a),n.updateCustom(c)}),this.init(e)},Mu={Original:"Original",TradingView:"TradingView"},Tu=[1,2,3,4],Ru=["rgb(0, 0, 0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)","rgb(255, 120, 116)","rgb(255, 156, 110)","rgb(255, 192, 105)","rgb(255, 245, 102)","rgb(149, 222, 100)","rgb(93, 219, 211)","rgb(105, 192, 255)","rgb(133, 165, 255)","rgb(179, 127, 234)","rgb(255, 133, 192)","rgb(255, 77, 79)","rgb(255, 122, 68)","rgb(255, 169, 64)","rgb(255, 236, 60)","rgb(116, 209, 60)","rgb(54, 207, 201)","rgb(63, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 170)","rgb(245, 33, 45)","rgb(249, 84, 28)","rgb(250, 140, 21)","rgb(250, 219, 21)","rgb(82, 196, 27)","rgb(18, 194, 193)","rgb(25, 144, 255)","rgb(28, 57, 195)","rgb(114, 46, 209)","rgb(235, 46, 149)","rgb(207, 20, 35)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 7)","rgb(55, 158, 15)","rgb(10, 151, 155)","rgb(7, 109, 217)","rgb(23, 50, 177)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(168, 7, 25)","rgb(173, 33, 1)","rgb(173, 78, 1)","rgb(173, 139, 1)","rgb(35, 120, 5)","rgb(0, 109, 116)","rgb(0, 80, 179)","rgb(16, 35, 158)","rgb(57, 16, 133)","rgb(158, 17, 104)"];function Du(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Iu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Lu=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&Iu(t.prototype,e),n&&Iu(t,n)}(t,[{key:"fromFloat",value:function(t,e){return t.toFixed(e)}},{key:"formatTime",value:function(t){return t<10?"0".concat(t.toString()):t.toString()}},{key:"isInstance",value:function(t,e){return null!==t&&void 0!==t&&t instanceof e}},{key:"getMousePosition",value:function(t){var e=t.target.getBoundingClientRect();if(Cu.isMobile){var n=t.touches,o=void 0===n?[]:n;if(0===o.length)return;var r=Du(o,2),i=r[0],a=r[1];return 2===o.length?{x:(i.clientX+a.clientX)/2-e.left,y:(i.clientY+a.clientY)/2-e.top}:{x:i.clientX-e.left,y:i.clientY-e.top}}return{x:t.clientX-e.left,y:t.clientY-e.top}}},{key:"getPositionDistance",value:function(t,e,n,o){var r=Math.pow(Math.abs(t-n),2),i=Math.pow(Math.abs(e-o),2);return Math.sqrt(r+i)}},{key:"formatShort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t,o="";return Number(t)>=1e6?(n=Math.round(t/1e5)/10,o="M"):Number(t)>=1e3&&(n=Math.round(t/100)/10,o="K"),Number(n).toFixed(e)+o}},{key:"formatShortAmount",value:function(t,e,n){return t===H.VOLUME?this.formatShort(e,2):this.fromFloat(e,n)}},{key:"getTimes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Date(t),o=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),a=n.getHours(),c=n.getMinutes();return e&&c<10&&(c="0".concat(c)),{year:o,month:r,date:i,hour:a,minute:c}}}]),t}());function Nu(t){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bu(t,e){return!e||"object"!==Nu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vu(t){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hu(t,e){return(Hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bu(this,Vu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hu(t,e)}(e,Gt),function(t,e,n){e&&Fu(t.prototype,e),n&&Fu(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=z.getModuleProvider(this.getModuleName()),o=z.getDataSource();if(!(0===n.getHeight()||o.getDataSize()<1)){var r=o.getLastData(),i=r.close,a=r.open;if(!(i<n.getMinValue()||i>n.getMaxValue())){var c=z.getTheme(),u=n.toY(i),s=e.getLeft(),l=e.getRight(),f=i>a?c.TextPositive:c.TextNegative;t.fillStyle=f,t.strokeStyle=f,Gt.createPolygon(t,[{x:s,y:u-10},{x:s,y:u+10},{x:l-12,y:u+10},{x:l-12,y:u-10},{x:s,y:u-10}]),t.globalAlpha=.9,t.fill(),t.globalAlpha=1,t.stroke(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=c.Text3;var p="-  ".concat(Lu.fromFloat(i,o.getDecimalDigits()));t.fillText(p,s,u+2)}}}}]),e}();function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xu(t,e){return!e||"object"!==Yu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gu(t){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zu(t,e){return(zu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ku=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xu(this,Gu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zu(t,e)}(e,Zt),function(t,e,n){e&&Wu(t.prototype,e),n&&Wu(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=z.getModuleProvider(this.getModuleName()),o=z.getTimeline(),r=z.getTheme(),i=e.getRect();if(!e.isChanged()&&!o.isUpdated()&&!n.isUpdated()){var a=o.getFirstIndex(),c=o.getLastIndex()-1,u=Math.max(a,c);i.X=o.toColumnLeft(u),i.Width=e.getRight()-i.X}t.fillStyle=r[this._color],t.clearRect(i.X,i.Y,i.Width,i.Height)}}]),e}(),Ju={zh_cn:{high:"高",open:"开",low:"低",close:"收",change:"涨幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"时间",period:{my:"已添加",edit:"编辑",complete:"保存",more:"未添加",period:"周期",line:"分时",m:"分钟",H:"小时",D:"日",W:"周",M:"月",Y:"年"},str_indicator:"技术指标",str_tools:"画线工具",str_local_save:"本地保存",str_compare:"对比",str_setting:"设置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",ctools:{cursor:"光标",cross_cursor:"十字光标",seg_line:"线段",straight_line:"直线",ray_line:"射线",arrow_line:"箭头",horz_seg_line:"水平线段",horz_straight_line:"水平直线",horz_ray_line:"水平射线",vert_straight_line:"垂直直线",price_line:"价格线",tri_parallel_line:"价格通道线",bi_parallel_line:"平行直线",bi_parallel_ray:"平行射线",fib_retrace:"斐波纳契回调",fib_fans:"斐波纳契扇形",hide:"隐藏",show:"显示",delete:"删除",hide_all:"隐藏所有绘图工具",show_all:"显示所有绘图工具",delete_all:"删除所有绘图工具"},compare:{index_title:"现货指数",index_desc:"价格指数",futures_title:"交割合约价格",futures_desc_1:"当周",futures_desc_2:"次周",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永续合约价格",swap_desc:"永续"},confirm:"确定",reset:"重置",indicator_settings:"指标设置",indicator_name:{main:"主图指标",MA:"MA 移动平均线",EMA:"EMA 指数平滑移动平均线",BOLL:"BOLL 布林线",deputy:"副图指标",VOLUME:"VOLUME 成交量",MACD:"MACD 指数平滑异动移动平均线",KDJ:"KDJ 随机指标",StochRSI:"StochRSI 随机相对强弱指标",RSI:"RSI 相对强弱指标",DMI:"DMI 动向指标",OBV:"OBV 能量潮指标",DMA:"DMA 平行线差指标",TRIX:"TRIX 三重指数平滑移动平均线",BRAR:"BRAR 情绪指标",VR:"VR 成交量比率",EMV:"EMV 简易波动指标",WR:"WR 威廉姆斯指标",ROC:"ROC 变化速率",MTM:"MTM 动量指标",PSY:"PSY 心理线指标"},indicator_param:{"Short Period":"短周期","Long Period":"长周期","MA Period":"移动平均周期","Calculating Period":"计算周期","RSI Length":"RSI天数长度","Stoch Length":"随机指标长度","Standard Deviation":"标准差"},price_type:{inst_price:"最新价格",index_price:"指数价格",mark_price:"标记价格"}},en_us:{high:"high",open:"open",low:"low",close:"close",change:"change",amplitude:"range",volume:"volume",year:"year",month:"month",day:"day",time:"time",period:{my:"Added",edit:"Edit",complete:"Save",more:"Unadded",period:"TIME",line:"Line(1m)",m:"m",H:"H",D:"D",W:"W",M:"M",Y:"Y"},str_indicator:"Indicator",str_tools:"Tools",str_local_save:"Save",str_compare:"Compare",str_setting:"Setting",str_fullscreen:"Fullscreen",str_fullscreen_close:"Exit Fullscreen",ctools:{cursor:"Cursor",cross_cursor:"Cross Cursor",seg_line:"Trend Line",straight_line:"Extended",ray_line:"Ray",arrow_line:"Arrow",horz_seg_line:"Horizontal Line",horz_straight_line:"Horizontal Extended",horz_ray_line:"Horizontal Ray",vert_straight_line:"Vertical Extended",price_line:"Price Line",tri_parallel_line:"Parallel Channel",bi_parallel_line:"Parallel Lines",bi_parallel_ray:"Parallel Rays",fib_retrace:"Fibonacci Retracements",fib_fans:"Fibonacci Fans",hide:"Hide",show:"Show",delete:"Delete",hide_all:"Hide All Drawing Tools",show_all:"Display All Drawing Tools",delete_all:"Delete All Drawing Tools"},compare:{index_title:"Token Index",index_desc:" Prcie Index",futures_title:"Futures Price",futures_desc_1:" Weekly",futures_desc_2:" Bi-weekly",futures_desc_4:" Quarterly",futures_desc_5:" Bi-quarterly",swap_title:"Swap Price",swap_desc:" Swap"},confirm:"Confirm",reset:"Reset",indicator_settings:"Indicator Settings",indicator_name:{main:"Main Indicators",deputy:"Sub Indicators"},price_type:{inst_price:"Last Price",index_price:"Index Price",mark_price:"Mark Price"}},zh_hk:{high:"高",open:"開",low:"低",close:"收",change:"漲幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"時間",period:{my:"已添加",edit:"編輯",complete:"保存",more:"未添加",period:"週期",line:"分時",m:"分鐘",H:"小時",D:"日",W:"周",M:"月",Y:"年"},str_indicator:"技術指標",str_tools:"畫線工具",str_local_save:"本地保存",str_compare:"对比",str_setting:"設置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",ctools:{cursor:"光標",cross_cursor:"十字光標",seg_line:"線段",straight_line:"直線",ray_line:"射線",arrow_line:"箭頭",horz_seg_line:"水平線段",horz_straight_line:"水平直線",horz_ray_line:"水平射線",vert_straight_line:"垂直直線",price_line:"價格線",tri_parallel_line:"價格通道線",bi_parallel_line:"平行直線",bi_parallel_ray:"平行射線",fib_retrace:"斐波納契回調",fib_fans:"斐波納契扇形",hide:"隱藏",show:"顯示",delete:"删除",hide_all:"隱藏所有繪圖工具",show_all:"顯示所有繪圖工具",delete_all:"删除所有繪圖工具"},compare:{index_title:"現貨指數",index_desc:"價格指數",futures_title:"交割合約價格",futures_desc_1:"當週",futures_desc_2:"次週",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永續合約價格",swap_desc:"永續"},confirm:"確定",reset:"重置",indicator_settings:"指標設置",indicator_name:{main:"主圖指標",MA:"MA 移動平均線",EMA:"EMA 指數平滑移動平均線",BOLL:"BOLL 布林線",deputy:"副圖指標",VOLUME:"VOLUME 成交量",MACD:"MACD 指數平滑異動移動平均線",KDJ:"KDJ 隨機指標",StochRSI:"StochRSI 隨機相對強弱指標",RSI:"RSI 相對強弱指標",DMI:"DMI 動向指標",OBV:"OBV 能量潮指標",DMA:"DMA 平行線差指標",TRIX:"TRIX 三重指數平滑移動平均線",BRAR:"BRAR 情緒指標",VR:"VR 成交量比率",EMV:"EMV 簡易波動指標",WR:"WR 威廉姆斯指標",ROC:"ROC 變化速率",MTM:"MTM 動量指標",PSY:"PSY 心理線指標"},indicator_param:{"Short Period":"短周期","Long Period":"長周期","MA Period":"移動平均周期","Calculating Period":"計算周期","RSI Length":"RSI天數長度","Stoch Length":"隨機指標長度","Standard Deviation":"標準差"},price_type:{inst_price:"最新價格",index_price:"指數價格",mark_price:"標記價格"}}};function qu(t){return t=t&&t.toLowerCase(),Ju[t]||Ju.en_us}function Qu(t){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){$u(t,e,n[e])})}return t}function $u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ts(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function es(t,e){return!e||"object"!==Qu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ns(t){return(ns=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function os(t,e){return(os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),es(this,ns(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&os(t,e)}(e,Gt),function(t,e,n){e&&ts(t.prototype,e),n&&ts(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getLineAction(),n=z.getMouseAction(),o=z.getDataSource(),r=o.getSelectedData();if(r&&n.isShowCrossCursor()&&!e.isDrawing()){var i=z.getArea(this.getAreaName()),a=n.getMousePosition(),c=z.getTheme(),u=c.Text0,s=c.Text1,l=z.getConfig(),f=l.language,p=l.mainInfoStyle,h=l.showVolume,y=qu(f),d=o.getDecimalDigits(),b=[];if(t.font=c.DefaultFont,t.textAlign="left",t.textBaseline="top","vertical"===p){var g=Lu.getTimes(r.time),v=g.year,m=g.month,_=g.date,w=g.hour,O=g.minute;b.push({key:y.time,value:"".concat(v,"-").concat(m,"-").concat(_," ").concat(w,":").concat(O),color:u})}b.push({key:y.open,value:r.open.toFixed(d),keyColor:u}),b.push({key:y.high,value:r.high.toFixed(d),keyColor:u}),b.push({key:y.low,value:r.low.toFixed(d),keyColor:u}),b.push({key:y.close,value:r.close.toFixed(d),keyColor:u});var S=s,P=o.getSelectedIndex(),k=o.getDataAt(P-1);if(P>0){var C;C=(r.close-k.close)/k.close*100?(r.close-k.close)/k.close*100:0,S=c[C>=0?"TextPositive":"TextNegative"],b.push({key:y.change,value:"".concat(C.toFixed(2),"%"),color:S,keyColor:u});var A=0;k&&(A=(r.high-r.low)/k.close*100||0),b.push({key:y.amplitude,value:"".concat(A.toFixed(2),"%"),keyColor:u})}h&&b.push({key:y.volume,value:r.volume.toFixed(2),keyColor:u});var j=z.getModuleProvider(this.getModuleName());if(j)j.getIndicators().forEach(function(t){for(var e=t.getOutputCount(),n=t.getName(),o=0;o<e;o++){var r=t.getOutputAt(o),i=r.getName(),a=z.getIndicatorAction().getIndicatorStorage(n,i),u=a.show,s=a.color,l=r.execute(P);if(u&&!Number.isNaN(l)){var f=r.getRangeName();b.push({key:y[f.toLocaleLowerCase()]||f,value:l.toFixed(d),color:r.getColor()||s||c["Indicator".concat(o)]})}}});var x=i.getLeft(),E=i.getTop(),M=i.getRight(),T=i.getWidth(),R=i.getHeight();if("vertical"===p){for(var D=1.5*parseInt(c.DefaultFont,10),I=0,L=0;L<b.length;L++){var N=b[L],F=t.measureText("".concat(N.key).concat(N.value)).width;I<F&&(I=F)}var B=(I+=10)+14;a.x<=B&&(this._lastPanelPosition="right"),a.x>=T-B&&(this._lastPanelPosition="left");var V=Math.min(b.length,Math.floor((R-14)/D)),H=x,U=V*D+14*.55;V<b.length&&b.shift();var Y={x:x+7,y:E+4.55,w:T-14,h:R-14},W=I+7;"right"===this._lastPanelPosition&&(H=M-B,Y.x=H+7,W=M-7),t.globalAlpha=c.MainInfoAlpha,t.fillStyle=c.MainInfoBg,t.fillRect(H,E,B,U),t.globalAlpha=1;for(var X=0;X<V;X++){var G=b[X];t.fillStyle=G.keyColor||G.color||s,Gt.drawString(t,G.key,Zu({},Y));var K=t.measureText(G.value).width;if(t.fillStyle=G.color||s,!Gt.drawString(t,G.value,Zu({},Y,{x:W-K})))break;Y.y+=D,Y.h-=D}}else for(var J={x:x+7,y:E+7,w:T-14,h:R-14},q=0;q<b.length;q++){var Q=b[q];if(t.fillStyle=Q.color||s,!Gt.drawString(t,"  ".concat(Q.key,": ").concat(Q.value),J))break}}}}]),e}();function is(t){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function as(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cs(t,e){return!e||"object"!==is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function us(t){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ss(t,e){return(ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ls=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cs(this,us(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ss(t,e)}(e,et),function(t,e,n){e&&as(t.prototype,e),n&&as(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getDataSource();if(!(e.getDataSize()<1)){var n=z.getTimeline();if(!(n.getInnerWidth()<n.getColumnWidth())){var o=z.getModuleProvider(this.getModuleName());if(0!==o.getHeight()){var r=n.getFirstIndex(),i=r+n.getLastIndex()>>1,a=z.getTheme();t.font=a.DefaultFont,t.textBaseline="middle",t.fillStyle=a.Text4,t.strokeStyle=a.Text4;var c=e.getDecimalDigits();this.drawMark(t,o.getMinValue(),c,o.toY(o.getMinValue()),r,i,o.getMinValueIndex(),n),this.drawMark(t,o.getMaxValue(),c,o.toY(o.getMaxValue()),r,i,o.getMaxValueIndex(),n)}}}}},{key:"drawMark",value:function(t,e,n,o,r,i,a,c){var u,s,l,f,p=c.toItemCenter(a);p>c.getInnerWidth()/2?(t.textAlign="right",l=(u=p-4)-3,f=(s=u-7)-4):(t.textAlign="left",l=(u=p+4)+3,f=(s=u+7)+4),Gt.drawLine(t,u,o,s,o),Gt.drawLine(t,u,o,l,o+2),Gt.drawLine(t,u,o,l,o-2),t.fillText(Lu.fromFloat(e,n),f,o)}}]),e}();function fs(t){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ps(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hs(t,e){return!e||"object"!==fs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ys(t){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){return(ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hs(this,ys(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}(e,Gt),function(t,e,n){e&&ps(t.prototype,e),n&&ps(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getDataSource();if(!(e.getDataSize()<1)){var n,o=z.getArea(this.getAreaName()),r=z.getTimeline(),i=z.getModuleProvider(this.getModuleName()),a=z.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth()>>1,f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=n;b<=u;b++){var g=e.getDataAt(b),v=i.toY(g.high),m=i.toY(g.low),_=Math.max(m-v,1);if(g.close>g.open){var w=i.toY(g.close),O=i.toY(g.open);h.push({x:p,y:v,w:1,h:_}),h.push({x:f,y:w,w:l,h:1}),h.push({x:p,y:O,w:l,h:1})}else if(g.close===g.open){var S=i.toY(g.close);y.push({x:p,y:v,w:1,h:_}),y.push({x:f,y:S,w:l,h:1}),y.push({x:p,y:S,w:l,h:1})}else{var P=i.toY(g.open),k=i.toY(g.close);d.push({x:p,y:v,w:1,h:_}),d.push({x:f,y:P,w:l,h:1}),d.push({x:p,y:k,w:l,h:1})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,Gt.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,y),t.fill()),d.length>0&&(t.fillStyle=a.Negative,Gt.createRectangles(t,d),t.fill())}}}]),e}();function gs(t){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ms(t,e){return!e||"object"!==gs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ws(t,e){return(ws=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Os=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ms(this,_s(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ws(t,e)}(e,Zt),function(t,e,n){e&&vs(t.prototype,e),n&&vs(t,n)}(e,[{key:"Draw",value:function(t){var e=this.getModuleName(),n=z.getArea(this.getAreaName()),o=z.getModuleProvider(e);if(e===B.MAIN||n.isChanged()||o.isUpdated()){var r=z.getTheme();t.fillStyle=r[this._color],t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}();function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ks(t,e){return!e||"object"!==Ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cs(t){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function As(t,e){return(As=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var js=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ks(this,Cs(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&As(t,e)}(e,et),function(t,e,n){e&&Ps(t.prototype,e),n&&Ps(t,n)}(e,[{key:"Draw",value:function(t){var e=this.getModuleName(),n=z.getArea(this.getAreaName()),o=z.getModuleProvider(e);if(e===B.MAIN||n.isChanged()||o.isUpdated()){var r=z.getAreaDigits(n),i=o.getGradations();if(0!==i.length){var a=n.getLeft(),c=n.getCenter(),u=z.getTheme();t.font=u.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=u.Text5;var s=[];i.forEach(function(n){var i=o.toY(n);s.push({x:a,y:i,w:5,h:1}),t.fillText(Lu.formatShortAmount(e,n,r),c,i+1)}),s.length>0&&(t.fillStyle=u.Grid1,Gt.createRectangles(t,s),t.fill())}}}}]),e}();function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ms(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rs(t,e){return(Rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ds=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ms(this,Ts(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rs(t,e)}(e,et),function(t,e,n){e&&Es(t.prototype,e),n&&Es(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getModuleProvider(this.getModuleName()).getSelectedValue();if(e!==-Number.MAX_VALUE){var n=z.getMouseAction().getMousePosition().y,o=z.getTheme();t.strokeStyle=o.Grid5,t.fillStyle=o.Grid5;var r=z.getArea(this.getAreaName()),i=r.getLeft(),a=r.getRight();Gt.createPolygon(t,[{x:i,y:n-10},{x:i,y:n+10},{x:a-12,y:n+10},{x:a-12,y:n-10},{x:i,y:n-10}]),t.fill(),t.stroke(),t.font=o.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=o.Text3;var c=z.getAreaDigits(r);t.fillText(Lu.formatShortAmount(this.getModuleName(),e,c),r.getCenter()-5,n+2)}}}]),e}();function Is(t){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ns(t,e){return!e||"object"!==Is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fs(t){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ns(this,Fs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(e,Gt),function(t,e,n){e&&Ls(t.prototype,e),n&&Ls(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getTimeline(),n=z.getLineAction(),o=z.getMouseAction();if(o.isShowCrossCursor()&&!n.isDrawing()){var r=z.getTheme();t.strokeStyle=r.CursorColor,t.fillStyle=r.CursorColor;var i=o.getMousePosition().y,a=e.toItemCenter(e.getSelectedIndex()),c=z.getArea(this.getAreaName());Gt.drawDashedLine(t,a,c.getTop()-1,a,c.getBottom(),10,5),Gt.drawDashedLine(t,0,i,c.getRight(),i,10,5),t.stroke()}}}]),e}();function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Us(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ys(t,e){return!e||"object"!==Hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ys(this,Ws(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xs(t,e)}(e,Zt),function(t,e,n){e&&Us(t.prototype,e),n&&Us(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getArea(this.getAreaName()),n=z.getTimeline();if(e.isChanged()||n.isUpdated()){var o=z.getTheme();t.fillStyle=o[this._color],t.fillRect(e.getLeft(),e.getTop(),e.getWidth(),e.getHeight())}}}]),e}();function zs(t){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ks(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Js(t,e){return!e||"object"!==zs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qs(t){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qs(t,e){return(Qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zs=[3e5,6e5,9e5,18e5,36e5,72e5,108e5,216e5,432e5,864e5,1728e5,5184e5],$s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Js(this,qs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qs(t,e)}(e,Gt),function(t,e,n){e&&Ks(t.prototype,e),n&&Ks(t,n)}(e,[{key:"Draw",value:function(t){var e=z.getConfig().language,n=qu(e),o=z.getArea(this.getAreaName()),r=z.getTimeline();if(o.isChanged()||r.isUpdated()){var i=z.getDataSource();if(!(i.getDataSize()<2)){var a=i.getDataAt(1),c=i.getDataAt(0);if(a&&c){for(var u=a.time-c.time,s=Zs.length,l=0;l<s&&!(u<Zs[l]);l++);for(;l<s&&!(Zs[l]%u==0&&Zs[l]/u*r.getColumnWidth()>60);l++);var f=60*(new Date).getTimezoneOffset()*1e3,p=z.getTheme();t.font=p.DefaultFont,t.textAlign="center",t.textBaseline="middle";for(var h=[],y=o.getTop(),d=o.getMiddle(),b=o.getLeft(),g=r.getFirstIndex(),v=r.getRightIndex(),m=g;m<v;m++){var _=i.getTimeAt(m),w=_-f,O=Lu.getTimes(_,!1),S=O.year,P=O.month,k=O.date,C=O.hour,A=O.minute,j="";if(l<s){var x=Math.max(864e5,Zs[l]);if(w%x!=0&&w%Zs[l]!=0&&(w-=u<=6e4?7e3:6e4,432e5===u&&(w-=216e5)),w%x==0)j=/en_/.test(e)?"".concat(N[P]," ").concat(k.toString()):"".concat(P.toString()).concat(n.month).concat(k.toString()).concat(n.day),t.fillStyle=p.Text6;else if(w%Zs[l]==0){var E=A.toString();A<10&&(E="0".concat(E)),j="".concat(C.toString(),":").concat(E),t.fillStyle=p.Text5}}else 1===k&&C<u/36e5&&(1===P?(j=S.toString(),/en_/.test(e)||(j+=n.year)):j=/en_/.test(e)?N[P]:"".concat(P.toString()).concat(n.month),t.fillStyle=p.Text6);if(j.length>0){var M=t.measureText(j).width,T=r.toItemCenter(m);if(T-M/2<b)continue;b=T+M/2,h.push({x:T,y:y,w:1,h:4}),t.fillText(j,T,d)}}h.length>0&&(t.fillStyle=p.Grid1,Gt.createRectangles(t,h),t.fill())}}}}}]),e}();function tl(t){return(tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function el(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nl(t,e){return!e||"object"!==tl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ol(t){return(ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rl(t,e){return(rl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var il=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nl(this,ol(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rl(t,e)}(e,Gt),function(t,e,n){e&&el(t.prototype,e),n&&el(t,n)}(e,[{key:"Draw",value:function(t){if(z.getMouseAction().isShowCrossCursor()){var e=z.getArea(this.getAreaName()),n=z.getTimeline(),o=z.getDataSource(),r=n.getSelectedIndex(),i=Lu.getTimes(o.getTimeAt(r)),a=i.year,c=i.month,u=i.date,s=i.hour,l=i.minute,f="".concat(a,"-").concat(c,"-").concat(u," ").concat(s,":").concat(l),p=z.getTheme(),h=t.measureText(f).width;t.strokeStyle=p.Grid6,t.fillStyle=p.Grid6;var y=e.getTop()+4,d=e.getBottom()-4,b=e.getLeft()+2,g=e.getRight()-2,v=n.toItemCenter(r),m=v-h/2-5,_=v+h/2+5;m<b&&(_+=b-m,m=b),_>g&&(m-=g-_,_=g);var w=[{x:m,y:y},{x:m,y:d},{x:_,y:d},{x:_,y:y},{x:m,y:y}];Gt.createPolygon(t,w),t.fill(),t.stroke(),t.font=p.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=p.Text3,t.fillText(f,(m+_)/2,(y+d)/2+2)}}}]),e}();function al(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ul=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),cl(this,"setSymbol",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};z.getSetting().updateConfig(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){cl(t,e,n[e])})}return t}({},n,{symbol:t})),e.getKlineData()}),cl(this,"getKlineData",function(){z.getDataSource().resetData(),z.getLineAction().resetLines(),z.getDataFeed().unsubscribeAll(),z.getDataFeed().getKlineData({mode:F.REFRESH}),z.getDrawAction().draw(W.ALL,!0)}),cl(this,"setKlineData",function(t){z.getDataSource().setData(t),z.getDrawAction().draw(W.ALL)}),cl(this,"setKlineLastData",function(t){z.getDataSource().setLastData(t),z.getDrawAction().draw(W.ALL)}),cl(this,"setDepth",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{asks:[],bids:[]},n=e._depthData;n.array=[];for(var o=0;o<t.asks.length;o++){var r={};r.rate=t.asks[o][0],r.amount=t.asks[o][1],n.array.push(r)}for(var i=0;i<t.bids.length;i++){var a={};a.rate=t.bids[i][0],a.amount=t.bids[i][1],n.array.push(a)}n.asks_count=t.asks.length,n.bids_count=t.bids.length,n.asks_si=n.asks_count-1,n.asks_ei=0,n.bids_si=n.asks_count,n.bids_ei=n.asks_count+n.bids_count-1;for(var c=n.asks_si;c>=n.asks_ei;c--)c===n.asks_si&&void 0!==n.array[c]?n.array[c].amounts=n.array[c].amount:void 0!==n.array[c+1]&&(n.array[c].amounts=n.array[c+1].amounts+n.array[c].amount);for(var u=n.bids_si;u<=n.bids_ei;u++)u===n.bids_si&&void 0!==n.array[u]?n.array[u].amounts=n.array[u].amount:void 0!==n.array[u-1]&&(n.array[u].amounts=n.array[u-1].amounts+n.array[u].amount);z.getDrawAction().draw(W.ALL)}),cl(this,"getDepthData",function(){return e._depthData}),cl(this,"setIndexData",function(t){(z.getDataSource().setIndexPrice(t),t.mode!==F.RIGHT_UPDATE)&&(z.getMainProvider().refreshIndicator(),z.getDrawAction().draw(W.ALL,!0))}),cl(this,"setPeriod",function(t){var n=z.getStorage().period;if(z.getSetting().updateStorage({period:t}),e.getKlineData(),n!==H.LINE&&t===H.LINE&&e.setChartStyle(H.LINE),n===H.LINE&&t!==H.LINE){var o=z.getStorage().mainStyle;e.setChartStyle(o)}}),cl(this,"getChartStyle",function(){return z.getStorage().mainStyle||"CandleStick"}),cl(this,"setTheme",function(t){z.getSetting().updateTheme(t);var e=z.getConfig(),n=Vt(e.theme,e),o=z.getKlineSQ();o.attr("class","kline-core ".concat(t)),o.css({background:n.Background}),z.setTheme(n);var r=z.getDrawAction();r.draw(W.ALL,!0),r.setMainLogo()}),cl(this,"setReverseColor",function(t){z.getSetting().updateConfig({reverseColor:t});var n=z.getConfig().theme;e.setTheme(n)}),cl(this,"setLanguage",function(t){z.getSetting().updateLanguage(t),z.getDrawAction().draw(W.ALL)}),this._depthData={array:[],asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0}}return function(t,e,n){e&&al(t.prototype,e),n&&al(t,n)}(t,[{key:"setChartStyle",value:function(t){var e,n,o=z.getStorage(),r=o.period,i=o.mainIndic,a=z.getIndicatorAction(),c="".concat(B.MAIN,".").concat(Y.LEFT),u="".concat(c,".").concat(U.CONTENT),s="".concat(c,".").concat(U.MAX_MIN);if(r===H.LINE)return z.removePlotter(u),z.removePlotter(s),a.removeMainIndicator(),void a.addMainIndicator([H.LINE]);switch(z.getSetting().updateStorage({mainStyle:t}),a.setMainIndicator(i),e=u,t){case"CandleStick":n=new Le({name:e});break;case"CandleStickHLC":n=new Ee({name:e});break;case"OHLC":n=new bs({name:e})}z.addPlotter(e,n),n=new ls({name:e=s}),z.addPlotter(e,n),z.getArea(c).setChanged(!0),z.getDrawAction().draw(W.ALL)}}]),t}();function sl(t){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ll(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fl(t,e){return!e||"object"!==sl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pl(t){return(pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hl(t,e){return(hl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fl(this,pl(e).call(this,n.name)))._areaLocation=n.areaLocation,t._left=0,t._top=0,t._right=0,t._bottom=0,t._changed=!1,t._highlighted=!1,t._pressed=!1,t._selected=!1,t.Measuring=new s,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hl(t,e)}(e,et),function(t,e,n){e&&ll(t.prototype,e),n&&ll(t,n)}(e,[{key:"getAreaLocation",value:function(){return this._areaLocation}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"measure",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"layout",value:function(t,e,n,o,r){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),o<<=0,this._bottom!==o&&(this._bottom=o,this._changed=!0),r&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"isCapturingArea",value:function(){return z.getMouseAction().getCapturingMouseArea()===this}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),e}();function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gl(t,e){return!e||"object"!==dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vl(t,e,n){return(vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ml(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ml(t){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _l(t,e){return(_l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wl=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gl(this,ml(e).call(this,t)))._gridColor=t.gridColor,n._areas=[],n._highlightedArea=null,n._selectedArea=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_l(t,e)}(e,yl),function(t,e,n){e&&bl(t.prototype,e),n&&bl(t,n)}(e,[{key:"contains",value:function(t,n){var o,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(o=this._areas[r].contains(t,n)))return o.push(this),o;return vl(ml(e.prototype),"contains",this).call(this,t,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e].getName()){this._areas.splice(e,1),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,o=this._areas.length;for(n=0;n<o;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,o,r=this._areas.length;for(o=0;o<r;o++)if(null!==(n=this._areas[o].onMouseUp(t,e)))return n;return null}}]),e}();function Ol(t){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pl(t,e){return!e||"object"!==Ol(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kl(t){return(kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cl(t,e){return(Cl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Al=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pl(this,kl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cl(t,e)}(e,yl),function(t,e,n){e&&Sl(t.prototype,e),n&&Sl(t,n)}(e,[{key:"onMouseMove",value:function(t,e){return this.isCapturingArea()&&z.getTimeline().onMouseMove(t,e),z.getMouseAction().updateCursor(this,t,e),this}},{key:"onMouseDown",value:function(t,e){return z.getTimeline().onMouseDown(t,e),this}},{key:"onMouseUp",value:function(t,e){return z.getTimeline().onMouseUp(t,e),null}}]),e}();function jl(t){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function El(t,e){return!e||"object"!==jl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ml(t){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tl(t,e){return(Tl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),El(this,Ml(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tl(t,e)}(e,yl),function(t,e,n){e&&xl(t.prototype,e),n&&xl(t,n)}(e,[{key:"onMouseMove",value:function(){return z.getMouseAction().showCursor(),this}}]),e}();function Dl(t){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Il(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ll(t,e){return!e||"object"!==Dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nl(t){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fl(t,e){return(Fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bl=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ll(this,Nl(e).call(this,t)))._capturingLine=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fl(t,e)}(e,yl),function(t,e,n){e&&Il(t.prototype,e),n&&Il(t,n)}(e,[{key:"onMouseMove",value:function(t,e){var n=z.getLineAction(),o=z.getMouseAction();return this.isCapturingArea()?n.onMouseDownMove(t,e)?(n.isDrawing()?o.showCrossCursor(this,t,e):o.showCursor(),this):(z.getTimeline().onMouseMove(t,e),o.updateCursor(this,t,e),this):this._capturingLine?(o.showCursor(),this):!this._capturingLine&&n.onMouseMove(t,e)?(o.showCrossCursor(this,t,e),this):(o.updateCursor(this,t,e),this)}},{key:"onMouseLeave",value:function(t,e){this._capturingLine=!1}},{key:"onMouseDown",value:function(t,e){return z.getTimeline().onMouseDown(t,e),z.getLineAction().onMouseDown(t,e)&&(this._capturingLine=!0),this}},{key:"onMouseUp",value:function(t,e){z.getTimeline().onMouseUp(t,e);var n=z.getLineAction(),o=z.getMouseAction(),r=null;if(this._capturingLine){if(r=this,n.onMouseUp(t,e),n.getSelected())return n.showOperation(),r;this._capturingLine=!1}return o.updateCursor(this,t,e),n.hideOperation(),r}}]),e}();function Vl(t){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ul(t,e){return!e||"object"!==Vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yl(t){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wl(t,e){return(Wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ul(this,Yl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wl(t,e)}(e,yl),function(t,e,n){e&&Hl(t.prototype,e),n&&Hl(t,n)}(e,[{key:"onMouseMove",value:function(){return z.getMouseAction().showCursor(),this}}]),e}();function Gl(t){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kl(t,e){return!e||"object"!==Gl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jl(t,e,n){return(Jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ql(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ql(t){return(ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ql(t,e){return(Ql=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kl(this,ql(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ql(t,e)}(e,yl),function(t,e,n){e&&zl(t.prototype,e),n&&zl(t,n)}(e,[{key:"measure",value:function(t,n){Jl(ql(e.prototype),"measure",this).call(this,t,28)}},{key:"onMouseMove",value:function(t,e){return z.getMouseAction().showCursor(),this}}]),e}();function $l(t){return($l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ef(t,e){return!e||"object"!==$l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nf(t,e,n){return(nf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=of(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function of(t){return(of=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rf(t,e){return(rf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var af=Y.LEFT,cf=Y.RIGHT,uf=Y.TOP,sf=Y.BOTTOM,lf=Y.FILL,ff=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ef(this,of(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rf(t,e)}(e,wl),function(t,e,n){e&&tf(t.prototype,e),n&&tf(t,n)}(e,[{key:"measure",value:function(t,n){nf(of(e.prototype),"measure",this).call(this,t,n),t=this.getMeasuredWidth(),n=this.getMeasuredHeight();for(var o=0,r=this._areas.length;o<r;o++){var i=this._areas[o];switch(i.measure(t,n),i.getAreaLocation()){case af:case cf:t-=i.getMeasuredWidth();break;case uf:case sf:n-=i.getMeasuredHeight();break;case lf:t=0,n=0}}}},{key:"layout",value:function(t,n,o,r,i){var a,c;nf(of(e.prototype),"layout",this).call(this,t,n,o,r,i),t=this.getLeft(),n=this.getTop(),o=this.getRight(),r=this.getBottom(),i=i||this.isChanged();for(var u=0,s=this._areas.length;u<s;u++){var l=this._areas[u];switch(l.getAreaLocation()){case af:a=l.getMeasuredWidth(),l.layout(t,n,t+a,r,i),t+=a;break;case uf:c=l.getMeasuredHeight(),l.layout(t,n,o,n+c,i),n+=c;break;case cf:a=l.getMeasuredWidth(),l.layout(o-a,n,o,r,i),o-=a;break;case sf:c=l.getMeasuredHeight(),l.layout(t,r-c,o,r,i),r-=c;break;case lf:l.layout(t,n,o,r,i),t=o,n=r}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=z.getTheme(),n=this.getLeft(),o=this.getTop(),r=this.getRight(),i=this.getBottom();t.fillStyle=e[this.getGridColor()];for(var a=0,c=this._areas.length;a<c;a++){var u=this._areas[a];switch(u.getAreaLocation()){case af:t.fillRect(u.getRight(),o,1,i-o),n+=u.getWidth();break;case uf:t.fillRect(n,u.getBottom(),r-n,1),o+=u.getHeight();break;case cf:t.fillRect(u.getLeft(),o,1,i-o),r-=u.getWidth();break;case sf:t.fillRect(n,u.getTop(),r-n,1),i-=u.getHeight()}}}}]),e}();function pf(t){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yf(t,e){return!e||"object"!==pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function df(t,e,n){return(df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bf(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function bf(t){return(bf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gf(t,e){return(gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vf=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yf(this,bf(e).call(this,t)))._isResize=!1,n._focusedArea=null;var o=z.getStorage().deputyAreaHeight,r=void 0===o?{}:o;return n._deputyAreaHeight=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gf(t,e)}(e,wl),function(t,e,n){e&&hf(t.prototype,e),n&&hf(t,n)}(e,[{key:"measure",value:function(t,n){df(bf(e.prototype),"measure",this).call(this,t,n);for(var o=z.getDataSource().getDecimalDigits()>7?100:76,r=t-o,i=0,a=this._areas.length-2;a>=0;a-=2){var c=this._areas[a].getModuleName(),u=0;if(c===B.MAIN)u=n-i;else i+=u=(this._deputyAreaHeight[c]||.2)*n;this._areas[a].measure(r,u),this._areas[a+1].measure(o,u)}}},{key:"layout",value:function(t,n,o,r,i){if(df(bf(e.prototype),"layout",this).call(this,t,n,o,r,i),!(this._areas.length<1)){var a,c,u,s=t+this._areas[0].getMeasuredWidth(),l=n;i||(i=this.isChanged());var f=this._areas.length;for(u=0;u<f;u++)c=l+(a=this._areas[u]).getMeasuredHeight(),a.layout(t,l,s,c,i),u++,(a=this._areas[u]).layout(s,l,o,c,i),l=c;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e,n=z.getTheme();t.fillStyle=n.Grid1,t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var o=this._areas.length-2;for(e=0;e<o;e+=2)t.fillRect(this.getLeft(),this._areas[e].getBottom(),this.getWidth(),1);if(!z.getConfig().enableWheelScale)for(e=0,o+=2;e<o;e+=2)if(this._areas[e].isSelected()){t.strokeStyle=n.Indicator1,t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(this._isResize){var n=this._oldY-e;if(this._oldY=e,0===n)return this;var o=z.getMainLeftArea().getHeight()-n,r=this._focusedArea.getHeight()+n;return o<=50&&n>0||r<=50&&n<0?this:(this._deputyAreaHeight[this._focusedArea.getModuleName()]=r/this.getHeight(),z.getDrawAction().setMainLogo(),this)}var i,a=this._areas.length;for(i=2;i<a;i+=2){var c=this._areas[i],u=c.getTop();if(e>=u-5&&e<u+5)return this._focusedArea=c,z.getMouseAction().showCursor("row-resize"),this}return this._focusedArea=null,null}},{key:"onMouseLeave",value:function(t,e){this._focusedArea=null,this._isResize=!1}},{key:"onMouseDown",value:function(t,e){return this._focusedArea?(this._oldY=e,this._isResize=!0,this):null}},{key:"onMouseUp",value:function(t,e){return this._isResize&&z.getSetting().updateStorage({deputyAreaHeight:this._deputyAreaHeight}),this._focusedArea=null,this._isResize=!1,this}}]),e}();function mf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wf=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_f(this,"drawChart",function(){var t=z.getChartContext(),n=z.getDataSource().getDataSize()<1?[U.BACKGROUND]:[U.BACKGROUND,U.GRID,U.CONTENT,U.INDICATOR],o=z.getAreas();for(var r in o){var i=o[r];Lu.isInstance(i,wl)||(e.drawArea(t,i,n),i.setChanged(!1))}}),_f(this,"drawOverlay",function(){var t=z.getOverlayCanvas(),n=z.getOverlayContext();n.clearRect(0,0,t.width,t.height);var o=z.getAreas(),r=z.getDataSource().getDataSize()<1?[U.SELECTION]:[U.MAX_MIN,U.LAST,U.SELECTION,U.DRAW_LINE,U.INFO];for(var i in o){var a=o[i];Lu.isInstance(a,wl)?a.drawGrid(n):e.drawArea(n,a,r)}}),_f(this,"layout",function(){var t=z.getChartCanvas(),n=z.getPixelRatio(),o=t.width/n,r=t.height/n,i=z.getFrame();i.measure(o,r),i.layout(0,0,o,r),e.updateProvider()}),_f(this,"scale",function(t){z.getTimeline().scale(t),e.updateProvider()}),_f(this,"resize",function(t,n){var o=z.getKlineSQ(),r=z.getKlineDom().getBoundingClientRect();t=t||r.width,n=n||r.height,o.css({width:"".concat(t,"px"),height:"".concat(n,"px")});var i=h(".draw-line-box",o),a=h(".indic-tab-box",o),c=i[0].getBoundingClientRect();i.css({height:"".concat(n,"px")});var u=a[0].getBoundingClientRect(),s=t-c.width,l=n-u.height,f=z.getChartCanvas(),p=z.getOverlayCanvas(),y=e.getPixelRatio();f.width=y*s,f.height=y*l,f.style.width="".concat(s,"px"),f.style.height="".concat(l,"px"),p.width=y*s,p.height=y*l,p.style.width="".concat(s,"px"),p.style.height="".concat(l,"px"),z.setPixelRatio(y),z.getChartContext().scale(y,y),z.getOverlayContext().scale(y,y),z.getLineAction().resize(),e.draw(W.ALL,!0),e.setMainLogo()}),_f(this,"setMainLogo",function(){var t=z.getConfig(),e=t.logo,n=t.theme,o=e.size,r=e.position,i=e.img,a=o.width,c=o.height,u=r.x,s=void 0===u?0:u,l=r.y,f=void 0===l?0:l,p=i[n]||i.default,y=z.getMainLeftArea(),d=y.getWidth(),b=y.getHeight()-c,g=d-a;if(!(b<=0||g<=0)){var v=g/2,m=b/2;switch(r.location){case"left-top":v=0,m=0;break;case"left-center":v=0;break;case"left-bottom":v=0,m=b;break;case"center-top":m=0;break;case"center-bottom":m=b;break;case"right-top":v=g,m=0;break;case"right-center":v=g;break;case"right-bottom":v=g,m=b}h(".canvas-group",z.getKlineSQ()).css({"background-image":"url(".concat(p,")"),"background-position":"".concat(v+s,"px ").concat(m+f,"px"),"background-repeat":"no-repeat","background-size":"".concat(a,"px ").concat(c,"px")})}}),_f(this,"getPixelRatio",function(){return Math.max(1,window.devicePixelRatio)}),_f(this,"isPixelChange",function(){return z.getPixelRatio()!==e.getPixelRatio()})}return function(t,e,n){e&&mf(t.prototype,e),n&&mf(t,n)}(t,[{key:"draw",value:function(t,e){if(this.isPixelChange())this.resize();else if("hidden"!==document.visibilityState){if(e)z.getFrame().setChanged(!0);[W.ALL,W.CHART_CANVAS].includes(t)&&(this.layout(),this.drawChart()),[W.ALL,W.OVERLY_CANVAS].includes(t)&&this.drawOverlay(),z.getDataSource().setDataMode(F.NOTHING),z.getTimeline().setUpdated(!1);var n=z.getDataProviders();for(var o in n)n[o].setUpdated(!1);var r=z.getAreas();for(var i in r)r[i].setChanged(!1)}else this.layout()}},{key:"drawArea",value:function(t,e,n){for(var o=e.getName(),r=0;r<n.length;r++){var i=z.getPlotter(["".concat(o,".").concat(n[r])]);i&&i.Draw(t)}}},{key:"updateProvider",value:function(){if(!(z.getDataSource().getDataSize()<1)){z.getTimeline().update();var t=z.getDataProviders();for(var e in t)t[e].update()}}}]),t}();function Of(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Sf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._exprEnv=new hr,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return function(t,e,n){e&&Of(t.prototype,e),n&&Of(t,n)}(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){var t,e;for(this._exprEnv.setFirstIndex(-1),e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){var e,n;for(this._rid++,n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),hr.set(this._exprEnv);try{var n,o;for(o=this._assigns.length,n=0;n<o;n++)this._assigns[n].assign(e);for(o=this._outputs.length,n=0;n<o;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(this._exprEnv.getFirstIndex()>=0)throw t}}}},{key:"getParameters",value:function(){var t,e,n={},o=this._params.length;for(t=0;t<o;t++)n[(e=this._params[t]).getName()]={value:e.getValue()};return n}},{key:"setParameters",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this._params.length;for(t=0;t<o;t++){var r=(n[(e=this._params[t]).getName()]||{}).value;void 0!==r&&e.setValue(r)}}}]),t}();function Pf(t){return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cf(t,e){return!e||"object"!==Pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Af(t){return(Af=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jf(t,e){return(jf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xf=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Cf(this,Af(e).call(this));var n=new Qa("N",2,120,26);t.addParameter(n);var o=new lr("REF_CLOSE_1",new sc(new mr,new kr(1)));t.addAssign(o);var r=new Xa("BR",new wa(new Wr(new Uc(new da(new kr(0),new Lc(new Ai,o)),n),new Uc(new da(new kr(0),new Lc(o,new Qi)),n)),new kr(100)));t.addOutput(r);var i=new Xa("AR",new wa(new Wr(new Uc(new Lc(new Ai,new Ba),n),new Uc(new Lc(new Ba,new Qi),n)),new kr(100)));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jf(t,e)}(e,Sf),function(t,e,n){e&&kf(t.prototype,e),n&&kf(t,n)}(e,[{key:"getName",value:function(){return"BRAR"}}]),e}();function Ef(t){return(Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tf(t,e){return!e||"object"!==Ef(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rf(t){return(Rf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Df(t,e){return(Df=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var If=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Tf(this,Rf(e).call(this));var n=new Qa("N",2,500,20),o=new Qa("K",2,500,2);t.addParameter(n),t.addParameter(o);var r=new lr("STD_CLOSE_N",new Ec(new mr,n));t.addAssign(r);var i=new Xa("BOLL",new sa(new mr,n));t.addOutput(i);var a=new Xa("UB",new Qo(i,new wa(o,r)));t.addOutput(a);var c=new Xa("LB",new Lc(i,new wa(o,r)));return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Df(t,e)}(e,Sf),function(t,e,n){e&&Mf(t.prototype,e),n&&Mf(t,n)}(e,[{key:"getName",value:function(){return"BOLL"}}]),e}();function Lf(t){return(Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ff(t,e){return!e||"object"!==Lf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bf(t){return(Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vf(t,e){return(Vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hf=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ff(this,Bf(e).call(this));var n=new Qa("N1",2,60,10),o=new Qa("N2",2,250,50),r=new Qa("M",2,100,10);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Xa("DIF",new Lc(new sa(new mr,n),new sa(new mr,o)));t.addOutput(i);var a=new Xa("DIFMA",new sa(i,r));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vf(t,e)}(e,Sf),function(t,e,n){e&&Nf(t.prototype,e),n&&Nf(t,n)}(e,[{key:"getName",value:function(){return"DMA"}}]),e}();function Uf(t){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wf(t,e){return!e||"object"!==Uf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xf(t){return(Xf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gf(t,e){return(Gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zf=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wf(this,Xf(e).call(this));var n=new Qa("N",2,90,14),o=new Qa("MM",2,60,6);t.addParameter(n),t.addParameter(o);var r=new lr("MTR",new si(new da(new da(new Lc(new Ai,new Qi),new Bo(new Lc(new Ai,new sc(new mr,new kr(1))))),new Bo(new Lc(new sc(new mr,new kr(1)),new Qi))),n));t.addAssign(r);var i=new lr("HD",new Lc(new Ai,new sc(new Ai,new kr(1))));t.addAssign(i);var a=new lr("LD",new Lc(new sc(new Qi,new kr(1)),new Qi));t.addAssign(a);var c=new lr("DMP",new si(new Bi(new or(new di(i,new kr(0)),new di(i,a)),i,new kr(0)),n));t.addAssign(c);var u=new lr("DMM",new si(new Bi(new or(new di(a,new kr(0)),new di(a,i)),a,new kr(0)),n));t.addAssign(u);var s=new Xa("PDI",new wa(new Wr(c,r),new kr(100)));t.addOutput(s);var l=new Xa("MDI",new wa(new Wr(u,r),new kr(100)));t.addOutput(l);var f=new Xa("ADX",new si(new wa(new Wr(new Bo(new Lc(l,s)),new Qo(l,s)),new kr(100)),o));t.addOutput(f);var p=new Xa("ADXR",new si(f,o));return t.addOutput(p),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gf(t,e)}(e,Sf),function(t,e,n){e&&Yf(t.prototype,e),n&&Yf(t,n)}(e,[{key:"getName",value:function(){return"DMI"}}]),e}();function Kf(t){return(Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qf(t,e){return!e||"object"!==Kf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qf(t){return(Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e){return(Zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=qf(this,Qf(e).call(this));return[7,30,0,0,0,0].forEach(function(e,n){var o=n+1,r=new Qa("EMA".concat(o),2,1e3,e);t.addParameter(r),t.addOutput(new oc("EMA","EMA".concat(o),new Qr(new mr,r)))}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zf(t,e)}(e,Sf),function(t,e,n){e&&Jf(t.prototype,e),n&&Jf(t,n)}(e,[{key:"getName",value:function(){return"EMA"}}]),e}();function tp(t){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ep(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function np(t,e){return!e||"object"!==tp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function op(t){return(op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rp(t,e){return(rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ip=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=np(this,op(e).call(this));var n=new Qa("N",2,90,14),o=new Qa("M",2,60,9);t.addParameter(n),t.addParameter(o);var r=new lr("VOLUME",new Wr(new sa(new Kc,n),new Kc));t.addAssign(r);var i=new lr("MID",new wa(new Wr(new Lc(new Qo(new Ai,new Qi),new sc(new Qo(new Ai,new Qi),new kr(1))),new Qo(new Ai,new Qi)),new kr(100)));t.addAssign(i);var a=new Xa("EMV",new sa(new Wr(new wa(i,new wa(r,new Lc(new Ai,new Qi))),new sa(new Lc(new Ai,new Qi),n)),n));t.addOutput(a);var c=new Xa("MAEMV",new sa(a,o));return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rp(t,e)}(e,Sf),function(t,e,n){e&&ep(t.prototype,e),n&&ep(t,n)}(e,[{key:"getName",value:function(){return"EMV"}}]),e}();function ap(t){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function up(t,e){return!e||"object"!==ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sp(t){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lp(t,e){return(lp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=up(this,sp(e).call(this));var n=new Qa("M1",2,1e3,60);return t.addParameter(n),t.addOutput(new Xa("CLOSE",new mr,Xa.outputStyle.Line)),t.addOutput(new oc("MA","MA",new sa(new mr,n),Xa.outputStyle.Line)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lp(t,e)}(e,Sf),function(t,e,n){e&&cp(t.prototype,e),n&&cp(t,n)}(e,[{key:"getName",value:function(){return"LINE"}}]),e}();function pp(t){return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yp(t,e){return!e||"object"!==pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dp(t){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bp(t,e){return(bp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=yp(this,dp(e).call(this));var n=new Qa("N",2,90,9),o=new Qa("M1",2,30,3),r=new Qa("M2",2,30,3);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new lr("HHV",new wi(new Ai,n));t.addAssign(i);var a=new lr("LLV",new Xi(new Qi,n));t.addAssign(a);var c=new lr("RSV",new wa(new Wr(new Lc(new mr,a),new Lc(i,a)),new kr(100)));t.addAssign(c);var u=new Xa("K",new Sc(c,o,new kr(1)));t.addOutput(u);var s=new Xa("D",new Sc(u,r,new kr(1)));t.addOutput(s);var l=new Xa("J",new Lc(new wa(u,new kr(3)),new wa(s,new kr(2))));return t.addOutput(l),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bp(t,e)}(e,Sf),function(t,e,n){e&&hp(t.prototype,e),n&&hp(t,n)}(e,[{key:"getName",value:function(){return"KDJ"}}]),e}();function vp(t){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _p(t,e){return!e||"object"!==vp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wp(t){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Op(t,e){return(Op=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=_p(this,wp(e).call(this));var n=new Qa("SHORT",2,200,12),o=new Qa("LONG",2,200,26),r=new Qa("MID",2,200,9);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Xa("DIF",new Lc(new Qr(new mr,n),new Qr(new mr,o)));t.addOutput(i);var a=new Xa("DEA",new Qr(i,r));t.addOutput(a);var c=new Xa("MACD",new wa(new Lc(i,a),new kr(2)),Xa.outputStyle.MACDStick);return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Op(t,e)}(e,Sf),function(t,e,n){e&&mp(t.prototype,e),n&&mp(t,n)}(e,[{key:"getName",value:function(){return"MACD"}}]),e}();function Pp(t){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cp(t,e){return!e||"object"!==Pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ap(t){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jp(t,e){return(jp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Cp(this,Ap(e).call(this));return[5,10,20,0,0,0].forEach(function(e,n){var o=n+1,r=new Qa("MA".concat(o),2,1e3,e);t.addParameter(r),t.addOutput(new oc("MA","MA".concat(o),new sa(new mr,r)))}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jp(t,e)}(e,Sf),function(t,e,n){e&&kp(t.prototype,e),n&&kp(t,n)}(e,[{key:"getName",value:function(){return"MA"}}]),e}();function Ep(t){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tp(t,e){return!e||"object"!==Ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rp(t){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dp(t,e){return(Dp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ip=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Tp(this,Rp(e).call(this));var n=new Qa("N",2,120,12),o=new Qa("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Xa("MTM",new Lc(new mr,new sc(new mr,n)));t.addOutput(r);var i=new Xa("MAMTM",new sa(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dp(t,e)}(e,Sf),function(t,e,n){e&&Mp(t.prototype,e),n&&Mp(t,n)}(e,[{key:"getName",value:function(){return"MTM"}}]),e}();function Lp(t){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Np(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fp(t,e){return!e||"object"!==Lp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bp(t){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vp(t,e){return(Vp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Fp(this,Bp(e).call(this));var n=new Qa("M",2,100,30);t.addParameter(n);var o=new lr("REF_CLOSE_1",new sc(new mr,new kr(1)));t.addAssign(o);var r=new lr("VA",new Bi(new di(new mr,o),new Kc,new Aa(new Kc)));t.addAssign(r);var i=new Xa("OBV",new Uc(new Bi(new oi(new mr,o),new kr(0),r),new kr(0)));t.addOutput(i);var a=new Xa("MAOBV",new sa(i,n));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vp(t,e)}(e,Sf),function(t,e,n){e&&Np(t.prototype,e),n&&Np(t,n)}(e,[{key:"getName",value:function(){return"OBV"}}]),e}();function Up(t){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wp(t,e){return!e||"object"!==Up(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xp(t){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gp(t,e){return(Gp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wp(this,Xp(e).call(this));var n=new Qa("N",2,100,12),o=new Qa("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Xa("PSY",new wa(new Wr(new Fr(new di(new mr,new sc(new mr,new kr(1))),n),n),new kr(100)));t.addOutput(r);var i=new Xa("MAPSY",new sa(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gp(t,e)}(e,Sf),function(t,e,n){e&&Yp(t.prototype,e),n&&Yp(t,n)}(e,[{key:"getName",value:function(){return"PSY"}}]),e}();function Kp(t){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qp(t,e){return!e||"object"!==Kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qp(t){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zp(t,e){return(Zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $p=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=qp(this,Qp(e).call(this));var n=new Qa("N",2,120,12),o=new Qa("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new lr("REF_CLOSE_N",new sc(new mr,n));t.addAssign(r);var i=new Xa("ROC",new wa(new Wr(new Lc(new mr,r),r),new kr(100)));t.addOutput(i);var a=new Xa("MAROC",new sa(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zp(t,e)}(e,Sf),function(t,e,n){e&&Jp(t.prototype,e),n&&Jp(t,n)}(e,[{key:"getName",value:function(){return"ROC"}}]),e}();function th(t){return(th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nh(t,e){return!e||"object"!==th(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oh(t){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rh(t,e){return(rh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ih=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=nh(this,oh(e).call(this));var n=new Qa("N1",2,120,6),o=new Qa("N2",2,250,12),r=new Qa("N3",2,500,24);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new lr("LC",new sc(new mr,new kr(1)));t.addAssign(i);var a=new lr("CLOSE_LC",new Lc(new mr,i));return t.addAssign(a),t.addOutput(new Xa("RSI1",new wa(new Wr(new Sc(new da(a,new kr(0)),n,new kr(1)),new Sc(new Bo(a),n,new kr(1))),new kr(100)))),t.addOutput(new Xa("RSI2",new wa(new Wr(new Sc(new da(a,new kr(0)),o,new kr(1)),new Sc(new Bo(a),o,new kr(1))),new kr(100)))),t.addOutput(new Xa("RSI3",new wa(new Wr(new Sc(new da(a,new kr(0)),r,new kr(1)),new Sc(new Bo(a),r,new kr(1))),new kr(100)))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rh(t,e)}(e,Sf),function(t,e,n){e&&eh(t.prototype,e),n&&eh(t,n)}(e,[{key:"getName",value:function(){return"RSI"}}]),e}();function ah(t){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ch(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uh(t,e){return!e||"object"!==ah(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sh(t){return(sh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lh(t,e){return(lh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=uh(this,sh(e).call(this));var n=new kr(4),o=new kr(2),r=new kr(2),i=new kr(20);return t.addOutput(new Xa("SAR",new bc(n,o,r,i),Xa.outputStyle.SARPoint)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lh(t,e)}(e,Sf),function(t,e,n){e&&ch(t.prototype,e),n&&ch(t,n)}(e,[{key:"getName",value:function(){return"SAR"}}]),e}();function ph(t){return(ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yh(t,e){return!e||"object"!==ph(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dh(t){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bh(t,e){return(bh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=yh(this,dh(e).call(this));var n=new Qa("N",3,100,14),o=new Qa("M",3,100,14),r=new Qa("P1",2,50,3),i=new Qa("P2",2,50,3);t.addParameter(n),t.addParameter(o),t.addParameter(r),t.addParameter(i);var a=new lr("LC",new sc(new mr,new kr(1)));t.addAssign(a);var c=new lr("CLOSE_LC",new Lc(new mr,a));t.addAssign(c);var u=new lr("RSI",new wa(new Wr(new Sc(new da(c,new kr(0)),n,new kr(1)),new Sc(new Bo(c),n,new kr(1))),new kr(100)));t.addAssign(u);var s=new Xa("STOCHRSI",new wa(new Wr(new sa(new Lc(u,new Xi(u,o)),r),new sa(new Lc(new wi(u,o),new Xi(u,o)),r)),new kr(100)));return t.addOutput(s),t.addOutput(new oc("MASTOCHRSI","MASTOCHRSI",new sa(s,i))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bh(t,e)}(e,Sf),function(t,e,n){e&&hh(t.prototype,e),n&&hh(t,n)}(e,[{key:"getName",value:function(){return"StochRSI"}}]),e}();function vh(t){return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _h(t,e){return!e||"object"!==vh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wh(t){return(wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oh(t,e){return(Oh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=_h(this,wh(e).call(this));var n=new Qa("N",2,100,12),o=new Qa("M",2,100,9);t.addParameter(n),t.addParameter(o);var r=new lr("MTR",new Qr(new Qr(new Qr(new mr,n),n),n));t.addAssign(r);var i=new Xa("TRIX",new wa(new Wr(new Lc(r,new sc(r,new kr(1))),new sc(r,new kr(1))),new kr(100)));t.addOutput(i);var a=new Xa("MATRIX",new sa(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oh(t,e)}(e,Sf),function(t,e,n){e&&mh(t.prototype,e),n&&mh(t,n)}(e,[{key:"getName",value:function(){return"TRIX"}}]),e}();function Ph(t){return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ch(t,e){return!e||"object"!==Ph(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ah(t){return(Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jh(t,e){return(jh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ch(this,Ah(e).call(this));var n=new Qa("MA1",2,500,5),o=new Qa("MA2",2,500,10);t.addParameter(n),t.addParameter(o);var r=new Xa("VOLUME",new Kc,Xa.outputStyle.VolumeStick);return t.addOutput(r),t.addOutput(new oc("MA","MA1",new sa(r,n))),t.addOutput(new oc("MA","MA2",new sa(r,o))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jh(t,e)}(e,Sf),function(t,e,n){e&&kh(t.prototype,e),n&&kh(t,n)}(e,[{key:"getName",value:function(){return"VOLUME"}}]),e}();function Eh(t){return(Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Th(t,e){return!e||"object"!==Eh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rh(t){return(Rh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dh(t,e){return(Dh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ih=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Th(this,Rh(e).call(this));var n=new Qa("N",2,100,26),o=new Qa("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new lr("REF_CLOSE_1",new sc(new mr,new kr(1)));t.addAssign(r);var i=new lr("TH",new Uc(new Bi(new di(new mr,r),new Kc,new kr(0)),n));t.addAssign(i);var a=new lr("TL",new Uc(new Bi(new oa(new mr,r),new Kc,new kr(0)),n));t.addAssign(a);var c=new lr("TQ",new Uc(new Bi(new oi(new mr,r),new Kc,new kr(0)),n));t.addAssign(c);var u=new Xa("VR",new wa(new Wr(new Qo(new wa(i,new kr(2)),c),new Qo(new wa(a,new kr(2)),c)),new kr(100)));t.addOutput(u);var s=new Xa("MAVR",new sa(u,o));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dh(t,e)}(e,Sf),function(t,e,n){e&&Mh(t.prototype,e),n&&Mh(t,n)}(e,[{key:"getName",value:function(){return"VR"}}]),e}();function Lh(t){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fh(t,e){return!e||"object"!==Lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bh(t){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vh(t,e){return(Vh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Fh(this,Bh(e).call(this));var n=new Qa("N",2,100,10),o=new Qa("N1",2,100,6);t.addParameter(n),t.addParameter(o);var r=new lr("HHV",new wi(new Ai,n));t.addAssign(r);var i=new lr("HHV1",new wi(new Ai,o));t.addAssign(i);var a=new lr("LLV",new Xi(new Qi,n));t.addAssign(a);var c=new lr("LLV1",new Xi(new Qi,o));t.addAssign(c);var u=new Xa("WR1",new wa(new Wr(new Lc(r,new mr),new Lc(r,a)),new kr(100)));t.addOutput(u);var s=new Xa("WR2",new wa(new Wr(new Lc(i,new mr),new Lc(i,c)),new kr(100)));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vh(t,e)}(e,Sf),function(t,e,n){e&&Nh(t.prototype,e),n&&Nh(t,n)}(e,[{key:"getName",value:function(){return"WR"}}]),e}();function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wh(t,e){return!e||"object"!==Uh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xh(t){return(Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gh(t,e){return(Gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wh(this,Xh(e).call(this));var n=new Xa("Index",new tu,Xa.outputStyle.Line);return t.addOutput(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gh(t,e)}(e,Sf),function(t,e,n){e&&Yh(t.prototype,e),n&&Yh(t,n)}(e,[{key:"getName",value:function(){return"IXPE"}}]),e}();n(5);function Kh(t){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qh(t,e){return!e||"object"!==Kh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zh(t,e){return(Zh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qh(this,Qh(e).call(this,t))).el.on("click",function(t){var e=h(t.target).closest("li");if(e){var o=e.attr("key"),r=e.hasClass("selected"),i=z.getStorage().selectedDeputyIndics;if(r){if(i.length<=1)return;return e.removeClass("selected"),void n.emit("indic-click",{key:o,selected:!1})}if(i.length>=4){var a=i[0];h("li[key=".concat(a,"]"),n.el).removeClass("selected"),n.emit("indic-click",{key:a,selected:!1})}e.addClass("selected"),n.emit("indic-click",{key:o,selected:!0})}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zh(t,e)}(e,_),function(t,e,n){e&&Jh(t.prototype,e),n&&Jh(t,n)}(e,[{key:"render",value:function(){var t=[],e=z.getConfig().deputyIndics,n=z.getStorage().selectedDeputyIndics;e.forEach(function(e){t.push('<li key="'.concat(e,'" class="').concat(n.includes(e)?"selected":"",'"><span>').concat(e,"</span></li>"))}),this.el.html("<ul>".concat(t.join(""),"</ul>"))}}]),e}();n(6);function ty(t){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ey(t){return(ey=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ny(t,e){return(ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ry(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var iy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ry(oy(oy(n=function(t,e){return!e||"object"!==ty(e)&&"function"!=typeof e?oy(t):e}(this,ey(e).call(this,t)))),"show",function(){var t=h("body");if(!t.length||n.isShow)return!1;var e=z.getConfig().theme,o="okline-".concat(Date.now()),r=Cu.isMobile?"app":"pc",i='<div style="z-index: 10012" class="okline-dialog-box '.concat(o," ").concat(r," ").concat(e,'"><div class="okline-dialog-content" /></div>');return t.beforeEnd(i),n.el=h(".".concat(o," .okline-dialog-content")),!!n.el.length&&(n.isShow=!0,!0)}),ry(oy(oy(n)),"hide",function(){return!!n.isShow&&(n.el.parent()[0].remove(),n.isShow=!1,!0)}),n.isShow=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ny(t,e)}(e,_),e}(),ay=n(0),cy=n.n(ay);n(7);function uy(t){return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sy(t){return(sy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ly(t,e){return(ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function py(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),py(fy(fy(n=function(t,e){return!e||"object"!==uy(e)&&"function"!=typeof e?fy(t):e}(this,sy(e).call(this,t)))),"bindEvent",function(){h(".back-btn",n.el).on("click",n.back),h(".close-btn",n.el).on("click",n.hide),h(".reset-btn",n.el).on("click",n.resetEvent),h(".confirm-btn",n.el).on("click",n.confirmEvent),h(".settings-names",n.el).on("click",n.nameEvent),h(".settings-params",n.el).on("click",function(t){var e=h(t.target);if(n.setWidthEvent(e),n.setColorEvent(e),!n.removeDropdown(e)){var o=e.closest(".k-checkbox");if(o)n.showEvent(o);else{var r=e.closest(".width-content");if(r)n.widthEvent(r);else{var i=e.closest(".param-color");i&&n.colorEvent(i)}}}})}),py(fy(fy(n)),"back",function(){h(".back-btn").addClass("hide"),h(".settings-params").addClass("hide"),h(".settings-names").removeClass("hide"),h(".settings-title",n.el).html(n.lang.indicator_settings)}),py(fy(fy(n)),"resetEvent",function(){var t=z.getSetting().getDefaultStorage("indicator.".concat(n.key));n.createParams(t),n.paramsChange(t)}),py(fy(fy(n)),"confirmEvent",function(){var t={};y("tr",n.el).each(function(e){var n={},o=h(e).attr("param"),r=h(".param-show i",e);r.length>0&&(n.show=!!r.hasClass("checked"));var i=h(".param-value input",e);i.length>0&&(n.value=Number(i[0].value));var a=h(".width-content div",e);if(a.length>0){var c=a[0].style.height;n.width=parseInt(c,10)}var u=h(".color-content",e);u.length>0&&(n.color=u[0].style.backgroundColor),t[o]=n}),n.paramsChange(t),n.hide()}),py(fy(fy(n)),"nameEvent",function(t){var e=h(t.target).closest(".settings-name");e&&(Cu.isPC?(y(".settings-name").removeClass("checked"),e.addClass("checked")):(h(".settings-names").addClass("hide"),h(".settings-params").removeClass("hide"),h(".back-btn").removeClass("hide")),n.key=e.attr("key"),n.createParams())}),py(fy(fy(n)),"paramsChange",function(t){n.emit("params-change",{key:n.key,params:t})}),py(fy(fy(n)),"showEvent",function(t){var e=!t.hasClass("checked"),n="k-checkbox iconfont ".concat(e?"iconicn-d-check-outline-lg checked":"iconcheckbox-selecte");t.attr("class",n)}),py(fy(fy(n)),"widthEvent",function(t){t.parent().addClass("selected");var e='<div class="param-dropdown">';Tu.forEach(function(t){e+='<div class="width-item"><div style="height: '.concat(t,'px"></div></div>')}),e+="</div>",t.after(e)}),py(fy(fy(n)),"setWidthEvent",function(t){var e=t.closest(".width-item");if(e){var n=h("div",e)[0].style.height;h(".width-content div",h(t).closest("td")).attr("style","height: ".concat(n,";"))}}),py(fy(fy(n)),"colorEvent",function(t){t.addClass("selected");var e='<div class="param-dropdown">';Ru.forEach(function(t){e+='<div class="color-item" style="background: '.concat(t,';"></div>')}),e+="</div>",h(".color-content",t).after(e)}),py(fy(fy(n)),"setColorEvent",function(t){var e=t.closest(".color-item");if(e){var n=e[0].style.background;h(".color-content",h(t).closest("td")).attr("style","background: ".concat(n,";"))}}),py(fy(fy(n)),"removeDropdown",function(t){var e=t.closest("td"),o=e&&e.hasClass("selected");return y(".param-dropdown",n.el).each(function(t){h(t).parent().removeClass("selected"),t.remove()}),o}),py(fy(fy(n)),"createNames",function(){var t=Object.keys(n.mainNames),e=Object.keys(n.deputyNames),o=n.createType("main",t),r=n.createType("deputy",e);h(".settings-names",n.el).html(o+r),Cu.isPC&&(n.createParams(),h(".settings-params").removeClass("hide"),h(".settings-name",n.el).addClass("checked"))}),py(fy(fy(n)),"createType",function(t,e){var o=n.lang.indicator_name,r=void 0===o?{}:o,i='<div class="settings-type">'.concat(r[t],"</div>");return e.forEach(function(t){i+='<div class="settings-name" key="'.concat(t,'">').concat(r[t]||t,"</div>")}),i}),py(fy(fy(n)),"createParams",function(t){var e=z.getStorage().indicator;t=t||e[n.key];var o=h("tbody",n.el);o.empty();var r=n.lang.indicator_param,i=void 0===r?{}:r;Cu.isMobile&&h(".settings-title",n.el).html(n.key);var a="";Object.keys(t).forEach(function(e){a+="<tr param=".concat(e,">");var o=t[e],r=o.show,c=o.value,u=o.width,s=o.color,l=n.names[n.key][e],f=i[l]||l;if(void 0!==r){var p='class="k-checkbox iconfont '.concat(r?"iconicn-d-check-outline-lg checked":"iconcheckbox-selecte",'"');a+='<td class="param-show"><i '.concat(p,"></i><span>").concat(f,"</span></td>")}else a+='<td class="param-name">'.concat(f,"</td>");void 0!==c&&(a+='<td class="param-value"><input value="'.concat(c,'" /></td>')),void 0!==u&&(a+='<td class="param-width"><div class="width-content"><div style="height: '.concat(u,'px"></div><i class="iconfont icon-Unfold" /></div></td>')),void 0!==s&&(a+='<td class="param-color"><div class="color-content" style="background: '.concat(s,';" /></td>')),a+="</tr>"}),o.html(a)}),py(fy(fy(n)),"visible",function(){if(n.show()){var t=z.getConfig().language;n.lang=qu(t),n.key="MA",n.el.html(cy.a);var e=n.lang,o=e.indicator_settings,r=e.reset,i=e.confirm;h(".settings-title",n.el).html(o),h(".reset-btn",n.el).html(r),h(".confirm-btn",n.el).html(i),n.createNames(),n.bindEvent()}}),py(fy(fy(n)),"switchVisible",function(t){t?n.visible():n.hide()}),n.key="",n.mainNames={MA:{MA1:"MA1",MA2:"MA2",MA3:"MA3",MA4:"MA4",MA5:"MA5",MA6:"MA6"},EMA:{EMA1:"EMA1",EMA2:"EMA2",EMA3:"EMA3",EMA4:"EMA4",EMA5:"EMA5",EMA6:"EMA6"},BOLL:{N:"Calculating Period",K:"Standard Deviation",BOLL:"BOLL",UB:"UB",LB:"LB"}},n.deputyNames={VOLUME:{MA1:"MA1",MA2:"MA2",VOLUME:"VOLUME"},MACD:{SHORT:"Short Period",LONG:"Long Period",MID:"MA Period",DIF:"DIF",DEA:"DEA",MACD:"MACD"},KDJ:{N:"Calculating Period",M1:"MA Period",M2:"MA Period",K:"K",D:"D",J:"J"},StochRSI:{N:"RSI Length",M:"RSI Length",P1:"K",P2:"D",STOCHRSI:"STOCHRSI",MASTOCHRSI:"MASTOCHRSI"},RSI:{N1:"MA1",N2:"MA2",N3:"MA3",RSI1:"RSI1",RSI2:"RSI2",RSI3:"RSI3"},DMI:{N:"MA1",MM:"MA2",PDI:"PDI",MDI:"MDI",ADX:"ADX",ADXR:"ADXR"},OBV:{M:"MA Period",OBV:"OBV",MAOBV:"MAOBV"},BOLL:{N:"Calculating Period",K:"Standard Deviation",BOLL:"BOLL",UB:"UB",LB:"LB"},DMA:{N1:"Short Period",N2:"Long Period",M:"MA Period",DIF:"DMA",DIFMA:"AMA"},TRIX:{N:"MA Period",M:"MA Period",TRIX:"TRIX",MATRIX:"MATRIX"},BRAR:{N:"Calculating Period",BR:"BR",AR:"AR"},VR:{N:"Calculating Period",M:"MA Period",VR:"VR",MAVR:"MAVR"},EMV:{N:"MA Period",M:"MA Period",EMV:"EMV",MAEMV:"MAEMV"},WR:{N:"Calculating Period",N1:"Calculating Period",WR1:"WR1",WR2:"WR2"},ROC:{N:"Calculating Period",M:"MA Period",ROC:"ROC",MAROC:"MAROC"},MTM:{N:"Calculating Period",M:"MA Period",MTM:"MTM",MAMTM:"MAMTM"},PSY:{N:"Calculating Period",M:"MA Period",PSY:"PSY",MAPSY:"MAPSY"}},n.names=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){py(t,e,n[e])})}return t}({},n.mainNames,n.deputyNames),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ly(t,e)}(e,iy),e}();function yy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var by=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dy(this,"init",function(){var t=z.getKlineSQ();e._indicView=new $h({el:h(".indic-tab-box",t)}),e._indicView.on("indic-click",function(t){e.setDeputyIndicator(t)}),e._parameterView=new hy,e._parameterView.on("params-change",function(t){var n=t.key,o=t.params,r=e.setIndicatorParameters(n,o),i=z.getSetting();i.cover({target:o,sources:r}),i.setStorage("indicator.".concat(n),o),z.getDrawAction().draw(W.ALL,!0)})}),dy(this,"destroy",function(){e._indicView.off(),e._parameterView.off()}),dy(this,"switchSettings",function(t){e._parameterView.switchVisible(t)}),dy(this,"setMainIndicator",function(t){var n=z.getStorage().mainIndic;z.getSetting().updateStorage({mainIndic:t}),e.setIndexIndicator(n,t),t&&t.length?e.addMainIndicator(t):e.removeMainIndicator(),z.getDrawAction().draw(W.ALL)}),dy(this,"setIndexIndicator",function(t,e){var n=t.includes(H.INDEX),o=e.includes(H.INDEX),r=z.getSetting(),i=z.getDataFeed();n&&!o&&(i.unsubscribeIndexData(),r.updateStorage({custom:{showIdxIndic:!1}})),!n&&o&&(i.getKlineData({mode:F.REFRESH}),r.updateStorage({custom:{showIdxIndic:!0}}))}),dy(this,"addMainIndicator",function(t){var e=z.getStorage().indicator,n=t.map(function(t){var n;switch(t){case H.MA:n=new xp;break;case H.EMA:n=new $f;break;case H.BOLL:n=new If;break;case H.SAR:n=new fh;break;case H.INDEX:n=new zh;break;case H.LINE:n=new fp}var o=e[t];return o&&n.setParameters(o),n});z.getMainProvider().setIndicator(n);var o="".concat(B.MAIN,".").concat(Y.LEFT),r="".concat(o,".").concat(U.INDICATOR),i=z.getPlotter(r);i||(i=new au({name:r}),z.addPlotter(r,i)),z.getArea(o).setChanged(!0)}),dy(this,"switchDeputyIndicator",function(t){var n=h(".indic-tab-box",z.getKlineSQ());z.getSetting().updateStorage({showIndics:t}),t?n.removeClass("hide"):n.addClass("hide"),z.getStorage().selectedDeputyIndics.forEach(function(n){t?e.addDeputyIndicator(n):e.removeDeputyIndicator(n)}),z.getDrawAction().resize()}),dy(this,"setDeputyIndicator",function(t){var n=t.key,o=t.selected,r=z.getStorage().selectedDeputyIndics,i=r.indexOf(n);o?(e.addDeputyIndicator(n),-1===i&&r.push(n)):(e.removeDeputyIndicator(n),i>-1&&r.splice(i,1)),z.getSetting().updateStorage({selectedDeputyIndics:r});var a=z.getDrawAction();a.draw(W.ALL,!0),a.setMainLogo()}),dy(this,"addDeputyIndicator",function(t){var n=e.createIndicatorAndProvider(t),o=n.indic,r=n.provider;z.getTemplateAction().createIndicatorComps(t);var i=z.getStorage().indicator[t];i&&o.setParameters(i);var a="".concat(t,".").concat(V);if(r.setIndicator([o]),r.setMinInterval(20),z.addDataProvider(a,r),Lu.isInstance(o,If)||Lu.isInstance(o,fh)){var c="".concat(t,".").concat(Y.LEFT,".").concat(U.CONTENT),u=new bs({name:c});z.addPlotter(c,u)}}),dy(this,"removeDeputyIndicator",function(t){var e=z.getAreas(),n=z.getArea(B.CHART);for(var o in e)e[o].getModuleName()===t&&(n.removeArea(o),z.removeArea(o));var r=z.getDataProviders();for(var i in r)r[i].getModuleName()===t&&z.removeDataProvider(i);var a=z.getPlotters();for(var c in a)a[c].getModuleName()===t&&z.removePlotter(c);var u=z.getStorage().deputyAreaHeight,s=void 0===u?{}:u;delete s[t],z.getSetting().updateStorage({deputyAreaHeight:s})}),dy(this,"setIndicatorParameters",function(t,e){var n=e,o=z.getDataProviders();for(var r in o){var i=o[r],a=i.getIndicators().find(function(e){return e.getName()==t});if(!a)return n;a.setParameters(e),n=a.getParameters(),i.refreshIndicator(),z.getArea("".concat(i.getModuleName(),".").concat(Y.LEFT)).setChanged(!0)}return n}),dy(this,"createIndicatorAndProvider",function(t){var e,n,o={name:"".concat(t,".").concat(V)};switch(t){case H.MA:e=new xp,n=new ht(o);break;case H.EMA:e=new $f,n=new ht(o);break;case H.VOLUME:e=new xh,n=new ht(o);break;case H.MACD:e=new Sp,n=new kt(o);break;case H.DMI:e=new zf,n=new mt(o);break;case H.DMA:e=new Hf,n=new ht(o);break;case H.TRIX:e=new Sh,n=new ht(o);break;case H.BRAR:e=new xf,n=new ht(o);break;case H.VR:e=new Ih,n=new ht(o);break;case H.OBV:e=new Hp,n=new ht(o);break;case H.EMV:e=new ip,n=new ht(o);break;case H.RSI:e=new ih,n=new mt(o);break;case H.WR:e=new Hh,n=new mt(o);break;case H.SAR:e=new fh,n=new ht(o);break;case H.KDJ:e=new gp,n=new mt(o);break;case H.ROC:e=new $p,n=new ht(o);break;case H.MTM:e=new Ip,n=new ht(o);break;case H.BOLL:e=new If,n=new ht(o);break;case H.PSY:e=new zp,n=new ht(o);break;case H.StochRSI:e=new gh,n=new mt(o);break;default:return{}}return{indic:e,provider:n}}),this._indicView=null,this.init()}return function(t,e,n){e&&yy(t.prototype,e),n&&yy(t,n)}(t,[{key:"removeMainIndicator",value:function(){var t="".concat(B.MAIN,".").concat(Y.LEFT),e="".concat(t,".").concat(U.INDICATOR);z.getMainProvider().removeIndicator(),z.removePlotter(e),z.getArea(t).setChanged(!0)}},{key:"getIndicatorStorage",value:function(t,e){var n=z.getStorage().indicator[t]||{};return e?n[e]||{}:n}}]),t}();function gy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var vy=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.t,o=void 0===n?-1:n,r=e.v,i=void 0===r?-1:r,a=e.state;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._position={time:o,value:i},this.state=a||I.HIDE}return function(t,e,n){e&&gy(t.prototype,e),n&&gy(t,n)}(t,[{key:"setPosXY",value:function(t,e){var n=z.getTimeline().xToTime(t),o=z.getMainProvider().toValue(e);this.setPosTV(n,o)}},{key:"setPosXYNoSnap",value:function(t,e){var n=z.getTimeline().xToTime(t),o=z.getMainProvider().toValue(e);this.setPosTV(n,o)}},{key:"setPosTV",value:function(t,e){this._position={time:t,value:e}}},{key:"getPosXY",value:function(){return{x:z.getTimeline().timeToX(this._position.time),y:z.getMainProvider().toY(this._position.value)}}},{key:"getPosTV",value:function(){return{t:this._position.time,v:this._position.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"trySelect",value:function(t,e){var n=this.getPosXY();return!(t<n.x-4||t>n.x+4||e<n.y-4||e>n.y+4)&&(this.setState(I.HIGHLIGHT),!0)}}]),t}();function my(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var _y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.state,o=e.points;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.drawer=null,this.state=n||L.BEFORE,this.points=o||[],this.step=0,this.type=null}return function(t,e,n){e&&my(t.prototype,e),n&&my(t,n)}(t,[{key:"isValidMouseXY",value:function(t,e){var n=z.getMainLeftArea(),o=n.getLeft(),r=n.getTop(),i=n.getRight(),a=n.getBottom();return!(t<o||t>i||e<r||e>a)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"getType",value:function(){return this.type}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoints",value:function(){return this.points}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"onMouseMove",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===L.BEFORE?this.setBeforeDrawPos(t,e):this.state===L.DRAWING?this.setDrawPos(t,e):this.state===L.AFTER&&this.setAfterDrawPos(t,e),!0)}},{key:"onMouseDown",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===L.BEFORE?(this.setDrawPos(t,e),this.setState(L.DRAWING)):this.state===L.DRAWING&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(L.AFTER)),this.oldX=t,this.oldY=e,!0)}},{key:"onMouseDownMove",value:function(t,e){if(!1===this.isValidMouseXY(t,e))return!1;for(var n=0,o=this.points.length;n<o;n++)if(this.points[n].state==I.HIGHLIGHT)return this.setDrawPos(t,e),void this.setState(L.DRAWING);var r=z.getTimeline(),i=z.getMainProvider(),a=r.getItemWidth();if(Math.abs(t-this.oldX)<a&&0===Math.abs(e-this.oldY))return!0;var c=r.xToTime(this.oldX),u=i.toValue(this.oldY),s=r.xToTime(t),l=i.toValue(e);this.oldX=t,this.oldY=e;var f=s-c,p=l-u;return this.points.forEach(function(t){var e=t.getPosTV(),n=e.t,o=e.v;t.setPosTV(n+f,o+p)}),!0}},{key:"onMouseUp",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===L.DRAWING&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(L.AFTER)),!0)}},{key:"setBeforeDrawPos",value:function(t,e){this.points.forEach(function(n){n.setPosXY(t,e),n.setState(I.SHOW)})}},{key:"setDrawPos",value:function(t,e){this.points.forEach(function(n){n.getState()===I.HIGHLIGHT&&n.setPosXY(t,e)})}},{key:"setAfterDrawPos",value:function(t,e){0!==this.step&&(this.step-=1),this.points.forEach(function(t){t.setState(I.HIDE)}),0===this.step&&z.getLineAction().setNormalMode()}},{key:"trySelect",value:function(t,e){for(var n=!1,o=0,r=this.points.length;o<r;o++)if(this.points[o].trySelect(t,e)){this.points[o].setState(I.HIGHLIGHT),n=!0;break}return!0===n?(this.select(),!0):(this.unselect(),!1)}},{key:"select",value:function(){this.points.forEach(function(t){t.getState()===I.HIDE&&t.setState(I.SHOW)})}},{key:"unselect",value:function(){this.setState(L.AFTER),this.points.forEach(function(t){t.getState()!==I.HIDE&&t.setState(I.HIDE)})}},{key:"calcDistance",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y,s=o-c,l=r-u,f=i-c,p=a-u;return Math.abs(s*p-l*f)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"calcGap",value:function(t,e,n){var o=t.sx,r=t.sy,i=t.ex,a=t.ey,c=o-e,u=r-n,s=i-e,l=a-n;return Math.abs(c*l-u*s)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"isWithRect",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y;return o>i?(o+=4,i-=4):(o-=4,i+=4),r>a?(r+=4,a-=4):(r-=4,a+=4),o<=c&&i>=c&&r<=u&&a>=u||(o>=c&&i<=c&&r<=u&&a>=u||(o<=c&&i>=c&&r>=u&&a<=u||o>=c&&i<=c&&r>=u&&a<=u))}}]),t}();function wy(t){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sy(t,e){return!e||"object"!==wy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Py(t,e,n){return(Py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ky(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ky(t){return(ky=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cy(t,e){return(Cy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ay=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sy(this,ky(e).call(this,t))).addPoint(new vy),n.addPoint(new vy),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cy(t,e)}(e,_y),function(t,e,n){e&&Oy(t.prototype,e),n&&Oy(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=1,Py(ky(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(I.SHOW),this.getPoint(1).setState(I.HIGHLIGHT)}}]),e}();function jy(t){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ey(t,e,n){return(Ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=My(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function My(t){return(My=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ty(t,e){return(Ty=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ry(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Dy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==jy(e)&&"function"!=typeof e?Ry(t):e}(this,My(e).call(this,t))).type=T.SEG,n.drawer=new to({drawLineTool:Ry(Ry(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ty(t,e)}(e,Ay),function(t,e,n){e&&xy(t.prototype,e),n&&xy(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Ey(My(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new vy;return o.setPosXY(t,n),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),o)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0))}}]),e}();function Iy(t){return(Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ly(t){return(Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ny(t,e){return(Ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var By=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Iy(e)&&"function"!=typeof e?Fy(t):e}(this,Ly(e).call(this,t))).type=T.ARROW,n.drawer=new Ue({drawLineTool:Fy(Fy(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ny(t,e)}(e,Dy),e}();function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uy(t,e){return!e||"object"!==Vy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yy(t,e,n){return(Yy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wy(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Wy(t){return(Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xy(t,e){return(Xy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Uy(this,Wy(e).call(this,t))).addPoint(new vy),n.addPoint(new vy),n.addPoint(new vy),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}(e,_y),function(t,e,n){e&&Hy(t.prototype,e),n&&Hy(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=2,Yy(Wy(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(I.SHOW),this.getPoint(1).setState(I.SHOW),this.getPoint(2).setState(I.HIGHLIGHT)}},{key:"setAfterDrawPos",value:function(t,e){0!==this.step&&(this.step-=1),0===this.step?this.points.forEach(function(t){t.setState(I.HIDE)}):(this.getPoint(0).setState(I.SHOW),this.getPoint(1).setState(I.HIGHLIGHT),this.getPoint(2).setState(I.SHOW)),0===this.step&&z.getLineAction().setNormalMode()}}]),e}();function zy(t){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jy(t,e,n){return(Jy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qy(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qy(t,e){return(Qy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var $y=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==zy(e)&&"function"!=typeof e?Zy(t):e}(this,qy(e).call(this,t))).type=T.BI_PARALLEL_RAY,n.drawer=new cn({drawLineTool:Zy(Zy(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qy(t,e)}(e,Gy),function(t,e,n){e&&Ky(t.prototype,e),n&&Ky(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Jy(qy(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return(s.ex>s.sx&&t>s.sx-4||s.ex<s.sx&&t<s.sx+4||l.ex>l.sx&&t>l.sx-4||l.ex<l.sx&&t<l.sx+4)&&(!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)&&(this.select(),!0))}}]),e}();function td(t){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ed(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nd(t,e,n){return(nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=od(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function od(t){return(od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rd(t,e){return(rd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function id(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ad=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==td(e)&&"function"!=typeof e?id(t):e}(this,od(e).call(this,t))).type=T.BI_PARALLEL,n.drawer=new tn({drawLineTool:id(id(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rd(t,e)}(e,Gy),function(t,e,n){e&&ed(t.prototype,e),n&&ed(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===nd(od(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)}}]),e}();function cd(t){return(cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ud(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sd(t,e,n){return(sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ld(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ld(t){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fd(t,e){return(fd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var hd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==cd(e)&&"function"!=typeof e?pd(t):e}(this,ld(e).call(this,t))).type=T.FIB_FANS,n.drawer=new hn({drawLineTool:pd(pd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fd(t,e)}(e,Ay),function(t,e,n){e&&ud(t.prototype,e),n&&ud(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===sd(ld(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new vy;o.setPosXY(t,n);for(var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,a=this.getPoint(1).getPosXY().x,c=this.getPoint(1).getPosXY().y,u=z.getMainLeftArea(),s={left:u.getLeft(),top:u.getTop(),right:u.getRight(),bottom:u.getBottom()},l=[0,38.2,50,61.8],f=0;f<l.length;f++){var p={x:r,y:i},h={x:a,y:i+(100-l[f])/100*(c-i)},y=this.drawer.getRectCrossPt(s,p,h),d=Math.pow(y[0].x-r,2)+Math.pow(y[0].y-i,2)>Math.pow(y[0].x-a,2)+Math.pow(y[0].y-c,2)?{x:y[0].x,y:y[0].y}:{x:y[1].x,y:y[1].y};if(!(d.x>r&&t<r)&&!(d.x<r&&t>r)){var b=new vy;b.setPosXY(r,i);var g=new vy;if(g.setPosXY(d.x,d.y),!(this.calcDistance(b,g,o)>4))return this.select(),!0}}return!1}}]),e}();function yd(t){return(yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bd(t,e,n){return(bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function gd(t){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vd(t,e){return(vd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function md(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _d=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==yd(e)&&"function"!=typeof e?md(t):e}(this,gd(e).call(this,t))).type=T.FIB_RETRACE,n.drawer=new vn({drawLineTool:md(md(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vd(t,e)}(e,Ay),function(t,e,n){e&&dd(t.prototype,e),n&&dd(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===bd(gd(e.prototype),"trySelect",this).call(this,t,n))return!0;for(var o=this.getPoint(0).getPosXY().y,r=this.getPoint(1).getPosXY().y,i=0;i<D.length;i++){var a=o+(100-D[i])/100*(r-o);if(a<n+4&&a>n-4)return this.select(),!0}return!1}}]),e}();function wd(t){return(wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Od(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sd(t,e,n){return(Sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Pd(t){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kd(t,e){return(kd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ad=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==wd(e)&&"function"!=typeof e?Cd(t):e}(this,Pd(e).call(this,t))).type=T.H_RAY,n.drawer=new Pn({drawLineTool:Cd(Cd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kd(t,e)}(e,Ay),function(t,e,n){e&&Od(t.prototype,e),n&&Od(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===I.HIGHLIGHT)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===I.HIGHLIGHT&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===Sd(Pd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.select(),!0)))}}]),e}();function jd(t){return(jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ed(t,e,n){return(Ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Md(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Md(t){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Td(t,e){return(Td=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Dd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==jd(e)&&"function"!=typeof e?Rd(t):e}(this,Md(e).call(this,t))).type=T.H_SEG,n.drawer=new En({drawLineTool:Rd(Rd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Td(t,e)}(e,Ay),function(t,e,n){e&&xd(t.prototype,e),n&&xd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===I.HIGHLIGHT)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===I.HIGHLIGHT&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===Ed(Md(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(r>i&&(t>r+4||t<i-4))&&(!(r<i&&(t<r-4||t>i+4))&&(this.select(),!0)))}}]),e}();function Id(t){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ld(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nd(t,e,n){return(Nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Fd(t){return(Fd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bd(t,e){return(Bd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Hd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Id(e)&&"function"!=typeof e?Vd(t):e}(this,Fd(e).call(this,t))).type=T.H_STRAIGHT,n.drawer=new Ln({drawLineTool:Vd(Vd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bd(t,e)}(e,Ay),function(t,e,n){e&&Ld(t.prototype,e),n&&Ld(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==I.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===Nd(Fd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y;return!(n>o+4||n<o-4)&&(this.select(),!0)}}]),e}();function Ud(t){return(Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wd(t,e,n){return(Wd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Xd(t){return(Xd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gd(t,e){return(Gd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Kd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Ud(e)&&"function"!=typeof e?zd(t):e}(this,Xd(e).call(this,t))).type=T.PRICE,n.drawer=new Un({drawLineTool:zd(zd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gd(t,e)}(e,Dy),function(t,e,n){e&&Yd(t.prototype,e),n&&Yd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==I.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===Wd(Xd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y;return!(t<o-4)&&(!(n>=r+4||n<=r-4)&&(this.select(),!0))}}]),e}();function Jd(t){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qd(t,e,n){return(Qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Zd(t){return(Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $d(t,e){return($d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var eb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Jd(e)&&"function"!=typeof e?tb(t):e}(this,Zd(e).call(this,t))).type=T.RAY,n.drawer=new Kn({drawLineTool:tb(tb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$d(t,e)}(e,Ay),function(t,e,n){e&&qd(t.prototype,e),n&&qd(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Qd(Zd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new vy;o.setPosXY(t,n);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)))}}]),e}();function nb(t){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ob(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rb(t,e,n){return(rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ib(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ib(t){return(ib=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ab(t,e){return(ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ub=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==nb(e)&&"function"!=typeof e?cb(t):e}(this,ib(e).call(this,t))).type=T.STRAIGHT,n.drawer=new ao({drawLineTool:cb(cb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ab(t,e)}(e,Ay),function(t,e,n){e&&ob(t.prototype,e),n&&ob(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===rb(ib(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new vy;return o.setPosXY(t,n),this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)}}]),e}();function sb(t){return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fb(t,e,n){return(fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function pb(t){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hb(t,e){return(hb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var db=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==sb(e)&&"function"!=typeof e?yb(t):e}(this,pb(e).call(this,t))).type=T.TRI_PARALLEL,n.drawer=new po({drawLineTool:yb(yb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hb(t,e)}(e,Gy),function(t,e,n){e&&lb(t.prototype,e),n&&lb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===fb(pb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s=o-(o-i+(o-c)),l=r-(r-a+(r-u)),f={sx:o,sy:r,ex:c,ey:u},p={sx:i,sy:a,ex:s,ey:l},h=i-o,y=a-r,d=s-c,b=l-u,g={sx:Math.abs(h-o),sy:Math.abs(y-r),ex:Math.abs(d-c),ey:Math.abs(b-u)};return!(this.calcGap(f,t,n)>4&&this.calcGap(p,t,n)>4&&this.calcGap(g,t,n)>4)&&(this.select(),!0)}}]),e}();function bb(t){return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vb(t,e,n){return(vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function mb(t){return(mb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _b(t,e){return(_b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ob=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==bb(e)&&"function"!=typeof e?wb(t):e}(this,mb(e).call(this,t))).type=T.V_STRAIGHT,n.drawer=new mo({drawLineTool:wb(wb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_b(t,e)}(e,Ay),function(t,e,n){e&&gb(t.prototype,e),n&&gb(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==I.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===vb(mb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x;return!(t>o+4||t<o-4)&&(this.select(),!0)}}]),e}();n(8);function Sb(t){return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kb(t,e){return!e||"object"!==Sb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cb(t){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jb=[T.SHOW_ALL,T.HIDE_ALL,T.HIDE,T.DELETE_ALL,T.DELETE],xb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kb(this,Cb(e).call(this,t))).bindEvent(),n.setLanguage(),setTimeout(function(){n.switchOperation()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}(e,_),function(t,e,n){e&&Pb(t.prototype,e),n&&Pb(t,n)}(e,[{key:"bindEvent",value:function(){var t=this,e=this.el[0];this.el.on("click",function(n){var o=h(n.target).closest("li");if(o){var r=e.clientHeight,i=e.scrollTop;if(o.hasClass("arrow-top"))e.scrollTop=i-r;else if(o.hasClass("arrow-bottom"))e.scrollTop=i+r+r;else{var a=o.attr("key");if(jb.includes(a))return t.emit("draw-operation",a),void t.switchOperation(a);t.selected(a),t.emit("draw-switch",a)}}});var n=h(".popover",this.el),o={x:0,y:0};this.el.on("mousemove",function(e){o={x:e.x,y:e.y};var r=h(e.target).closest("li");if(n.addClass("hide"),r){var i=r.attr("name");if(i){n.removeClass("hide").removeClass("bottom").addClass("right"),h(".title",n).html(i);var a=t.el[0].getBoundingClientRect(),c=n[0].getBoundingClientRect(),u=r[0].getBoundingClientRect(),s=a.right-a.left,l=u.top-a.top-(c.height-u.height)/2;r.parent().hasClass("draw-operation")&&(n.removeClass("bottom").addClass("bottom"),s=u.left-a.left-(c.width-u.width)/2,l=u.bottom-a.top),n.css({left:"".concat(s,"px"),top:"".concat(l,"px")})}}}).on("mouseleave",function(){n.addClass("hide")}),this.el.on("scroll",function(){y(".tool-panel li").each(function(t){var e=t.getBoundingClientRect(),r=o,i=r.x,a=r.y,c=e.left,u=e.right,s=e.top,l=e.bottom;if(i>=c&&i<=u&&a>=s&&a<=l){var f=h(t).attr("name");f&&h(".title",n).html(f)}}),t.resize()}),new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(){t.resize()}).observe(this.el[0],{attributes:!0})}},{key:"resize",value:function(){var t=h(".tool-panel",this.el),e=y(".arrow",t),n=this.el[0],o=n.clientWidth,r=n.clientHeight,i=n.scrollHeight,a=n.scrollTop;0==a?t.removeClass("hide-top"):t.addClass("hide-top"),a+r>=i?t.removeClass("hide-bottom"):t.addClass("hide-bottom"),0==o?e.addClass("hide"):e.removeClass("hide")}},{key:"setLanguage",value:function(){var t=qu(z.getConfig().language);y("li[key]").each(function(e){var n=(e=h(e)).attr("key");e.attr("name",R[n]?t.ctools[R[n].lang]:t.ctools[n])})}},{key:"selected",value:function(t){y("li",this.el).removeClass("selected"),h("li[key=".concat(t,"]"),this.el).addClass("selected"),this.switchOperation()}},{key:"showOperation",value:function(){h(".draw-operation",this.el).removeClass("hide")}},{key:"hideOperation",value:function(){h(".draw-operation",this.el).addClass("hide")}},{key:"switchOperation",value:function(t){var e=z.getLineAction(),n=0===e.getLineCount()&&0!==e.getHideLineCount(),o=h(".tool-panel li[key=".concat(T.HIDE_ALL,"]"),this.el),r=h(".tool-panel li[key=".concat(T.SHOW_ALL,"]"),this.el),i=h(".popover .title",this.el);if(n?(o.addClass("hide"),r.removeClass("hide")):(o.removeClass("hide"),r.addClass("hide")),t===T.SHOW_ALL){var a=o.attr("name");i.html(a)}if(t===T.HIDE_ALL&&n){var c=r.attr("name");i.html(c)}}},{key:"render",value:function(){var t=[],e=z.getCursorType(),n=T.FIB_FANS,o=[T.SHOW_ALL,T.HIDE_ALL,T.DELETE_ALL];Object.keys(R).forEach(function(r){var i=R[r],a="";r===n&&(a+=" tool-bottom-end"),o.includes(r)&&(a+=" tool-bottom"),e==r&&(a+=" selected");var c='key="'.concat(r,'" class="').concat(a,'"');t.push("<li ".concat(c,'><i class="iconfont ').concat(i.className,'"></i></li>'))});var r='<ul class="tool-panel"><li class="arrow arrow-top"><i class="iconfont icon-fold"></i></li>'.concat(t.join(""),'<li class="arrow arrow-bottom"><i class="iconfont icon-Unfold"></i></li></ul>'),i='<ul class="draw-operation hide"><li key="'.concat(T.HIDE,'"><i class="iconfont icon-Mul_show"></i></li><li key="').concat(T.DELETE,'"><i class="iconfont icon-Mul_delete"></i></li></ul>');this.el.html(r+i+'<div class="popover hide"><div class="title"></div><div class="triangle"></div><div class="split"></div></div>')}}]),e}();function Eb(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Mb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rb=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Tb(this,"init",function(){var t=z.getKlineSQ();e._drawView=new xb({el:h(".draw-line-box",t)}),e._drawView.on("draw-switch",function(t){e.unselect(),e.setRunningMode(T[t]),z.getDrawAction().draw(W.OVERLY_CANVAS)}),e._drawView.on("draw-operation",e.updateLines)}),Tb(this,"destroy",function(){e._drawView.off()}),Tb(this,"resize",function(){e._drawView.resize()}),Tb(this,"showOperation",function(){e._drawView.showOperation(),z.getMouseAction().showCursor()}),Tb(this,"hideOperation",function(){e._drawView.hideOperation(),e.unselect(),z.getMainLeftArea().onMouseLeave()}),Tb(this,"updateLines",function(t){switch(t){case T.SHOW_ALL:e.showAll();break;case T.HIDE:e.hideSelect();break;case T.HIDE_ALL:e.hideAll();break;case T.DELETE:e.delSelected();break;case T.DELETE_ALL:e.delAll()}e.hideOperation(),e.setNormalMode(),z.getDrawAction().draw(W.OVERLY_CANVAS)}),Tb(this,"switchDrawLine",function(t){e.hideOperation(),z.getSetting().updateStorage({showLineTool:t});var n=h(".draw-line-box",z.getKlineSQ()),o=t?"auto":"0px";n.css({width:o}),z.getDrawAction().resize()}),Tb(this,"setNormalMode",function(){e.saveLines();var t=z.getCursorType();e._drawView.selected(t);var n=z.getMouseAction();t!==T.CURSOR?n.hideCursor():n.showCursor()}),Tb(this,"setRunningMode",function(t){e.hideOperation();var n=e.getCurrent();null!==n&&n.state!==L.AFTER&&e.delCurrent();var o=z.getConfig().maxToolCount;if(e.getLineCount()+e.getHideLineCount()>=o)e.setNormalMode();else{if(t===T.CURSOR)return z.getMouseAction().showCursor(),void z.setCursorType(t);if(t!==T.CROSS_CURSOR){var r=e.createLine(t);r&&e.addLine(r)}else z.setCursorType(t)}}),Tb(this,"unselect",function(){var t=e.getSelected();return t?(t.unselect(),e.selected=-1,t):null}),Tb(this,"delSelected",function(){-1!=e.selected&&(e.lines.splice(e.selected,1),e.selected=-1,e.setNormalMode())}),Tb(this,"delCurrent",function(){e.lines.splice(e.getLineCount()-1,1)}),Tb(this,"delAll",function(){e.lines=[],e.hideLines=[],e.selected=-1}),Tb(this,"hideSelect",function(){var t=e.getSelected();t.unselect(),e.hideLines.push(t),e.delSelected()}),Tb(this,"hideAll",function(){e.hideLines=Eb(e.lines).concat(Eb(e.hideLines)),e.lines=[],e.selected=-1,e.hideLines.forEach(function(t){t.unselect()})}),Tb(this,"showAll",function(){e.lines=Eb(e.lines).concat(Eb(e.hideLines)),e.hideLines=[],e.selected=-1,e.lines.forEach(function(t){t.unselect()})}),Tb(this,"getLineCount",function(){return e.lines.length}),Tb(this,"addLine",function(t){e.lines.push(t)}),Tb(this,"getLine",function(t){return t<e.lines.length&&t>=0?e.lines[t]:null}),Tb(this,"createLine",function(t,e){switch(t){case T.ARROW:return new By(e);case T.BI_PARALLEL:return new ad(e);case T.BI_PARALLEL_RAY:return new $y(e);case T.FIB_FANS:return new hd(e);case T.FIB_RETRACE:return new _d(e);case T.H_RAY:return new Ad(e);case T.H_SEG:return new Dd(e);case T.H_STRAIGHT:return new Hd(e);case T.PRICE:return new Kd(e);case T.RAY:return new eb(e);case T.SEG:return new Dy(e);case T.STRAIGHT:return new ub(e);case T.TRI_PARALLEL:return new db(e);case T.V_STRAIGHT:return new Ob(e);default:return null}}),Tb(this,"saveLines",function(){var t=e.lines.length,n=Eb(e.lines).concat(Eb(e.hideLines)),o=z.getStorage().line,r=void 0===o?{}:o;r[z.getConfig().symbol]=n.map(function(e,n){var o=e.getType();return{points:e.getPoints().map(function(t){return t.getPosTV()}),type:o,hide:n>=t}}),z.getSetting().updateStorage({line:r})}),Tb(this,"resetLines",function(){e.hideOperation(),e.lines=[],e.hideLines=[];var t=z.getStorage().line;((void 0===t?{}:t)[z.getConfig().symbol]||[]).forEach(function(t){var n=t.type,o=t.hide,r=t.points,i=(void 0===r?[]:r).map(function(t){return new vy(t)}),a=e.createLine(n,{points:i,state:L.AFTER});a&&i.length&&(o?e.hideLines:e.lines).push(a)})}),Tb(this,"getCurrent",function(){return e.getLine(e.getLineCount()-1)}),Tb(this,"getSelected",function(){return e.getLine(e.selected)}),Tb(this,"getHideLineCount",function(){return e.hideLines.length}),Tb(this,"isDrawing",function(){var t=e.getSelected();if(t)return t.getState()===L.DRAWING;var n=e.getCurrent();return n&&n.getState()!==L.AFTER}),this.selected=-1,this.lines=[],this.hideLines=[],this._drawView=null,this.init()}return function(t,e,n){e&&Mb(t.prototype,e),n&&Mb(t,n)}(t,[{key:"onMouseMove",value:function(t,e){if(-1===this.selected){var n=this.getCurrent();if(n&&n.getState()!==L.AFTER)return n.onMouseMove(t,e)}else{var o=this.getSelected();if(o.getState()===L.DRAWING)return o.onMouseMove(t,e)}return this.trySelect(t,e),!1}},{key:"onMouseDown",value:function(t,e){if(this._mouseDownMove=!1,-1===this.selected){var n=this.getCurrent();if(n&&n.getState()!==L.AFTER)return n.onMouseDown(t,e)}else{var o=this.getSelected();if(o.getState()!==L.BEFORE)return o.onMouseDown(t,e)}return!1}},{key:"onMouseDownMove",value:function(t,e){if(this._mouseDownMove=!0,-1===this.selected){var n=this.getCurrent();return!(!n||n.getState()!==L.DRAWING)&&n.onMouseDownMove(t,e)}var o=this.getSelected();if(o.getState()!==L.BEFORE){if(!0===o.onMouseDownMove(t,e))for(var r=o.points,i=0;i<r.length;i++)if(r[i].state===I.HIGHLIGHT||r[i].state===I.SHOW)return!0;return!0}}},{key:"onMouseUp",value:function(t,e){if(!0===this._mouseDownMove){var n=this.getSelected();if(n&&n.getState()!==L.BEFORE)return this.unselect(),this.saveLines(),n.onMouseUp(t,e)}if(-1!==this.selected){var o=this.trySelect(t,e);return!!o&&(this.saveLines(),o.onMouseUp(t,e),!0)}var r=this.getCurrent();if(r){if(r.getState()===L.DRAWING)return!0;if(!r.isValidMouseXY(t,e))return!1;if(r.trySelect(t,e))return!0}return!1}},{key:"trySelect",value:function(t,e,n){if(n=n||this.getSelected())return n.trySelect(t,e)?n:(n.unselect(),this.selected=-1,null);for(var o=0,r=this.lines.length;o<r;o++){var i=this.lines[o];if(i.trySelect(t,e))return this.selected=o,i}return null}}]),t}();function Db(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ib=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],Lb=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],Nb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._updated=!1,this._innerLeft=0,this._innerWidth=0,this._scale=z.getConfig().candleScale||6,this._maxItemCount=0,this._maxIndex=0,this._firstIndex=0,this._selectedIndex=-1,this._startX=-1,this._startFirstIndex=-1}return function(t,e,n){e&&Db(t.prototype,e),n&&Db(t,n)}(t,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return Ib[this._scale]}},{key:"getSpaceWidth",value:function(){return Lb[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._innerLeft+this._innerWidth-this.getColumnWidth()*this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this.getRightIndex(),this._maxIndex)}},{key:"getRightIndex",value:function(){return this._firstIndex+this._maxItemCount-1}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxItemCount",value:function(){if(0!==this._maxItemCount)return this._maxItemCount;var t=z.getMainLeftArea();this._innerLeft=t.getLeft()+4;var e=Math.max(0,t.getWidth()-12);return this.calcColumnCount(e)}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this.getFirstColumnLeft())}},{key:"toColumnLeft",value:function(t){return this.getFirstColumnLeft()+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"xToTime",value:function(t){var e=this.toIndex(t);return z.getDataSource().getTimeAt(e)}},{key:"timeToX",value:function(t){var e=z.getDataSource();if(e.getDataSize()<2)return-1;var n=e.getTimeAt(0),o=e.getTimeAt(1)-n,r=Math.floor((t-n)/o);return this.toItemCenter(r)}},{key:"selectAt",value:function(t){this._selectedIndex=this.toIndex(t)}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"validateFirstIndex",value:function(t){return Math.max(Math.min(t,this._maxIndex),0)}},{key:"layout",value:function(){var t=z.getMainLeftArea();this._innerLeft=t.getLeft()+4;var e=Math.max(0,t.getWidth()-12);this._innerWidth!==e&&(this._innerWidth=e,this._maxItemCount=this.calcColumnCount(e),this._updated=!0)}},{key:"update",value:function(){this.layout();var t=z.getDataSource(),e=t.getDataMode(),n=t.getPushSize();if(e!==F.NOTHING&&(e!==F.RIGHT_UPDATE||0!==n)){switch(e){case F.REFRESH:var o=t.getDataSize();this._firstIndex=Math.max(o-this._maxItemCount,0),this._selectedIndex=-1;break;case F.LEFT_UPDATE:var r=Math.max(t.getLeftUpdateSize()-5,0);this._firstIndex+=r,this._selectedIndex>=0&&(this._selectedIndex+=r);break;case F.RIGHT_UPDATE:var i=this.getRightIndex();this._maxIndex===i&&(this._firstIndex+=n,this._selectedIndex>=0&&(this._selectedIndex+=n))}this._updated=!0,this._maxIndex=t.getLastIndex()}}},{key:"updateData",value:function(){0===this._firstIndex&&z.getDataFeed().getKlineData({mode:F.LEFT_UPDATE})}},{key:"isMove",value:function(){return this._isMove}},{key:"onMouseDown",value:function(t){this._isMove=!1,this._startX=t,this._startFirstIndex=this._firstIndex}},{key:"onMouseMove",value:function(t){this._isMove=!0,this._firstIndex=this.validateFirstIndex(this._startFirstIndex-this.calcColumnCount(t-this._startX)),this._selectedIndex=this._selectedIndex+this._firstIndex-this._startFirstIndex,this._updated=!0,this.updateData()}},{key:"onMouseUp",value:function(){this._isMove=!1}},{key:"onMouseWheel",value:function(t){this.onMouseDown(0),this.onMouseMove(-t*(t<0?3:1)),this.onMouseUp()}},{key:"scale",value:function(t){this._scale=Math.min(Math.max(this._scale+t,0),Ib.length-1);var e=this.calcColumnCount(this._innerWidth),n=this.getLastIndex();this._firstIndex=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*e/this._maxItemCount)),this._maxItemCount=e;var o=z.getMouseAction().getMousePosition().x;this._selectedIndex=Cu.isMobile?-1:this.toIndex(o),this._updated=!0,this.updateData()}}]),t}();function Fb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Bb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadTemplate()}return function(t,e,n){e&&Fb(t.prototype,e),n&&Fb(t,n)}(t,[{key:"loadTemplate",value:function(){var t=new ff({name:B.FRAME,gridColor:"Grid1"});z.setFrame(t),z.addArea(B.FRAME,t);var e="".concat(B.TIMELINE,".").concat(Y.BOTTOM),n=new Zl({name:e,areaLocation:Y.BOTTOM});z.addArea(e,n),t.addArea(n);var o=new vf({name:B.CHART,areaLocation:Y.FILL});z.addArea(B.CHART,o),t.addArea(o),this.chartAreaGroupComps()}},{key:"chartAreaGroupComps",value:function(){this.createMainComps(),this.createTimelineComps()}},{key:"createMainComps",value:function(){var t=z.getArea(B.CHART),e="".concat(B.MAIN,".").concat(Y.LEFT),n=new Bl({name:e});z.addArea(e,n),t.addArea(n);var o="".concat(B.MAIN,".").concat(Y.RIGHT),r=new Xl({name:o});z.addArea(o,r),t.addArea(r);var i="".concat(B.MAIN,".").concat(V),a=new ht({name:i});z.addDataProvider(i,a),a.setPaddingTop(28),a.setPaddingBottom(12);var c="".concat(e,".").concat(U.BACKGROUND),u=new Ku({name:c});z.addPlotter(c,u),c="".concat(e,".").concat(U.GRID),u=new ve({name:c}),z.addPlotter(c,u),c="".concat(e,".").concat(U.CONTENT),u=new Le({name:c}),z.addPlotter(c,u),c="".concat(e,".").concat(U.MAX_MIN),u=new ls({name:c}),z.addPlotter(c,u),c="".concat(e,".").concat(U.INFO),u=new rs({name:c}),z.addPlotter(c,u),c="".concat(e,".").concat(U.SELECTION),u=new Vs({name:c}),z.addPlotter(c,u),c="".concat(e,".").concat(U.DRAW_LINE),u=new pe({name:c}),z.addPlotter(c,u),c="".concat(o,".").concat(U.BACKGROUND),u=new Os({name:c}),z.addPlotter(c,u),c="".concat(o,".").concat(U.GRID),u=new Pe({name:c}),z.addPlotter(c,u),c="".concat(o,".").concat(U.CONTENT),u=new js({name:c}),z.addPlotter(c,u),c="".concat(o,".").concat(U.SELECTION),u=new Ds({name:c}),z.addPlotter(c,u),c="".concat(o,".").concat(U.LAST),u=new Uu({name:c}),z.addPlotter(c,u)}},{key:"createIndicatorComps",value:function(t){var e=z.getArea(B.CHART),n="".concat(t,".").concat(Y.LEFT),o=new Al({name:n});z.addArea(n,o),e.addArea(o);var r="".concat(t,".").concat(Y.RIGHT),i=new Rl({name:r});z.addArea(r,i),e.addArea(i);var a="".concat(n,".").concat(U.BACKGROUND),c=new Ku({name:a});z.addPlotter(a,c),a="".concat(n,".").concat(U.GRID),c=new ve({name:a}),z.addPlotter(a,c),a="".concat(n,".").concat(U.INDICATOR),c=new au({name:a}),z.addPlotter(a,c),a="".concat(n,".").concat(U.INFO),c=new ko({name:a}),z.addPlotter(a,c),a="".concat(n,".").concat(U.SELECTION),c=new Vs({name:a}),z.addPlotter(a,c),a="".concat(r,".").concat(U.BACKGROUND),c=new Os({name:a}),z.addPlotter(a,c),a="".concat(r,".").concat(U.CONTENT),c=new js({name:a}),z.addPlotter(a,c),a="".concat(r,".").concat(U.SELECTION),c=new Ds({name:a}),z.addPlotter(a,c)}},{key:"createTimelineComps",value:function(){var t=new Nb;z.setTimeline(t);var e="".concat(B.TIMELINE,".").concat(Y.BOTTOM),n="".concat(e,".").concat(U.BACKGROUND),o=new Gs({name:n});z.addPlotter(n,o),n="".concat(e,".").concat(U.CONTENT),o=new $s({name:n}),z.addPlotter(n,o),n="".concat(e,".").concat(U.SELECTION),o=new il({name:n}),z.addPlotter(n,o)}}]),t}();function Vb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Hb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ub=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Hb(this,"init",function(){e._mouseDrag=!1,e._capturingMouseArea=null,e._selectedFrame=null,e._mousePosition={},e._showCrossCursor=!1,e.registerEvent()}),Hb(this,"destroy",function(){z.getDocumentSQ().off(),z.getOverlayCanvasSQ().off()}),Hb(this,"showCursor",function(t){e.hideCrossCursor(),z.getOverlayCanvas().style.cursor=t||"default"}),Hb(this,"hideCursor",function(){z.getOverlayCanvas().style.cursor="none"}),Hb(this,"showCrossCursor",function(t,n,o){e.hideCursor(),e.hideCrossCursor(),e._showCrossCursor=!0;var r=t.getModuleName();z.getModuleProvider(r).selectAt(o),z.getTimeline().selectAt(n)}),Hb(this,"hideCrossCursor",function(){e._showCrossCursor=!1;var t=z.getDataProviders();for(var n in t)t[n].unselect();z.getTimeline().unselect()}),Hb(this,"updateCursor",function(t,n,o){switch(z.getCursorType()){case T.CURSOR:e.showCursor();break;case T.CROSS_CURSOR:e.showCrossCursor(t,n,o);break;default:e.hideCursor()}}),Hb(this,"onMouseDown",function(t){t.preventDefault();var n=Lu.getMousePosition(t),o=n.x,r=n.y,i=z.getFrame().contains(o,r);if(i)for(var a,c=i.length-1;c>=0;c--)if(a=(a=i[c]).onMouseDown(o,r))return void(e._capturingMouseArea=a)}),Hb(this,"onMouseUp",function(t){t.preventDefault();var n=Lu.getMousePosition(t),o=n.x,r=n.y,i=z.getConfig().enableWheelScale,a=z.getTimeline().isMove();if(e._capturingMouseArea&&!e._capturingMouseArea.onMouseUp(o,r)&&!i&&!a){var c=z.getOverlayCanvasSQ();e._selectedFrame?(c.off("mousewheel"),e._selectedFrame.select(null),e._selectedFrame=null):(c.on("mousewheel",e.onMouseWheel),e._selectedFrame=z.getFrame(),e._selectedFrame.select(e._capturingMouseArea))}e._capturingMouseArea=null,z.getDrawAction().draw(W.ALL)}),Hb(this,"onMouseMove",function(t){t.preventDefault();var n=Lu.getMousePosition(t),o=n.x,r=n.y;if(e._mousePosition={x:o,y:r},e._capturingMouseArea)return e._capturingMouseArea.onMouseMove(o,r),void z.getDrawAction().draw(W.ALL);var i=z.getFrame().contains(o,r);if(i){for(var a=i.length-1;a>=0&&!i[a].onMouseMove(o,r);a--);z.getDrawAction().draw(W.OVERLY_CANVAS)}}),Hb(this,"onMouseLeave",function(t){t.preventDefault();var n=Lu.getMousePosition(t)||e._mousePosition,o=n.x,r=n.y;e._capturingMouseArea&&(e._capturingMouseArea.onMouseLeave(o,r),e._capturingMouseArea=null),e.hideCrossCursor(),z.getDrawAction().draw(W.OVERLY_CANVAS)}),Hb(this,"onTouchScale",function(t){t.preventDefault();var n=Vb(t.touches,2),o=n[0],r=n[1],i=Lu.getPositionDistance(o.pageX,o.pageY,r.pageX,r.pageY);if(0!==e._distance){var a=-1;i>e._distance&&(a=1),e._distance=i,z.getDrawAction().scale(a)}else e._distance=i}),Hb(this,"onMouseWheel",function(t){t.preventDefault(),e._mouseWheelEvent=t;var n=z.getDrawAction(),o=t.deltaX,r=t.deltaY,i=t.wheelDelta;Math.abs(o)>Math.abs(r)?z.getTimeline().onMouseWheel(o):n.scale(i>0?1:-1),n.draw(W.ALL)}),Hb(this,"onKeyDown",function(t){46!==t.keyCode&&8!==t.keyCode||z.getLineAction().updateLines(T.DELETE)}),Hb(this,"onVisibilitychange",function(){"visible"===document.visibilityState&&z.getDrawAction().draw(W.ALL,!0)}),Hb(this,"registerEvent",function(){z.getDocumentSQ().on("visibilitychange",e.onVisibilitychange),z.getOverlayCanvasSQ().on("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),Cu.isMobile?e.registerAppEvent():e.registerPCEvent()}),Hb(this,"registerAppEvent",function(){h(z.getOverlayCanvas()).on("touchstart",function(t){clearTimeout(e._touchMoving),e.onMouseDown(t);var n=t.touches;1===(void 0===n?[]:n).length&&(e._startPosition=Lu.getMousePosition(t),e._touchMoving=setTimeout(function(){e.onMouseLeave(t),e.onMouseMove(t)},500)),t.preventDefault()}).on("touchmove",function(t){var n=t.touches,o=void 0===n?[]:n;if(1===o.length){var r=Lu.getMousePosition(t),i=e._startPosition;if(Lu.getPositionDistance(r.x,r.y,i.x,i.y)<5)return;e.onMouseMove(t)}2===o.length&&e.onTouchScale(t),clearTimeout(e._touchMoving)}).on("touchend",function(t){clearTimeout(e._touchMoving),e._distance=0,e._capturingMouseArea&&e.onMouseLeave(t)})}),Hb(this,"registerPCEvent",function(){var t=z.getOverlayCanvasSQ();t.on("mousedown",e.onMouseDown).on("mousemove",e.onMouseMove).on("mouseleave",e.onMouseLeave).on("mouseup",e.onMouseUp),z.getDocumentSQ().on("keydown",e.onKeyDown),z.getConfig().enableWheelScale&&t.on("mousewheel",e.onMouseWheel)}),Hb(this,"isShowCrossCursor",function(){return e._showCrossCursor}),Hb(this,"getMousePosition",function(){return e._mousePosition}),Hb(this,"getCapturingMouseArea",function(){return e._capturingMouseArea}),this.init()},Yb=n(1),Wb=n.n(Yb);n(9),n(10);function Xb(t){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gb(t){return(Gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zb(t,e){return(zb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qb=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jb(Kb(Kb(n=function(t,e){return!e||"object"!==Xb(e)&&"function"!=typeof e?Kb(t):e}(this,Gb(e).call(this)))),"ready",function(t){t&&t()}),Jb(Kb(Kb(n)),"init",function(){var t=n.anchor.find(".kline-core")[0];z.setKlineDom(t);var e=h(t);z.setKlineSQ(e),z.setChartCanvas(h(".main-canvas",e)[0]),z.setOverlayCanvas(h(".overlay-canvas",e)[0]),z.setDataSource(new $),z.setDataFeed(new q),z.setDrawAction(new wf),z.setChartAction(new ul),z.setIndicatorAction(new by),z.setLineAction(new Rb),z.setMouseAction(new Ub),z.setTemplateAction(new Bb),n.initFromSettings()}),Jb(Kb(Kb(n)),"destroy",function(){z.getDataFeed().destroy(),z.getMouseAction().destroy(),z.getLineAction().destroy(),z.getIndicatorAction().destroy()}),Jb(Kb(Kb(n)),"initFromSettings",function(){var t=z.getConfig().theme,e=z.getStorage(),o=e.mainStyle,r=e.showIndics,i=e.mainIndic,a=e.showLineTool,c=e.period;n.setTheme(t),n.setChartStyle(o),n.switchDeputyIndicator(r),n.setMainIndicator(i),n.switchDrawLine(a),n.setPeriod(c)}),Jb(Kb(Kb(n)),"setPeriod",function(t){z.getChartAction().setPeriod(t)}),Jb(Kb(Kb(n)),"setMainIndicator",function(t){z.getIndicatorAction().setMainIndicator(t)}),Jb(Kb(Kb(n)),"setChartStyle",function(t){z.getChartAction().setChartStyle(t)}),Jb(Kb(Kb(n)),"switchDeputyIndicator",function(t){z.getIndicatorAction().switchDeputyIndicator(t)}),Jb(Kb(Kb(n)),"switchDrawLine",function(t){z.getLineAction().switchDrawLine(t)}),Jb(Kb(Kb(n)),"switchSettings",function(t){z.getIndicatorAction().switchSettings(t)}),Jb(Kb(Kb(n)),"setTheme",function(t){z.getChartAction().setTheme(t)}),Jb(Kb(Kb(n)),"setReverseColor",function(t){z.getChartAction().setReverseColor(t)}),Jb(Kb(Kb(n)),"setLanguage",function(t){z.getChartAction().setLanguage(t)}),Jb(Kb(Kb(n)),"updateConfig",function(t){n.setSymbol(t.symbol,t)}),Jb(Kb(Kb(n)),"setSymbol",function(t,e){z.getChartAction().setSymbol(t,e)}),Jb(Kb(Kb(n)),"setDepth",function(t){z.getChartAction().setDepth(t)}),Jb(Kb(Kb(n)),"updateLastData",function(t){z.getChartAction().setKlineLastData(t)}),Jb(Kb(Kb(n)),"resize",function(t,e){z.getDrawAction().resize(t,e)}),z.init();var o=t.anchor,r=t.kSettings,i=t.onChartReady,a=r.config.element;return n.anchor=h(o||a),h(Wb.a).append(n.anchor),z.setSetting(r),n.init(),i&&i(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zb(t,e)}(e,s),e}(),Qb={debug:!1,fullscreen:!1,symbol:"",interval:"",container_id:"chartContainer",timezone:"Asia/Hong_Kong",library_path:"/tradingview/",locale:"zh",client_id:"tradingview.com",user_id:"public_user_id",theme:"dark",hideHeaderWidget:!0,autosize:!0,supports_search:!1,supports_marks:!1,loading_screen:{backgroundColor:"#999",foregroundColor:"#f00"},study_count_limit:10,studies_overrides:{"Overlay.style":2},allow_symbol_change:!0,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},time_frames:[],disabled_features:["compare_symbol","display_market_status","go_to_date","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","use_localstorage_for_settings","volume_force_overlay","symbol_search_hot_key","header_widget"],enabled_features:["header_indicators","hide_last_na_study_output","adaptive_logo","dont_show_boolean_study_arguments","same_data_requery","side_toolbar_in_fullscreen_mode","disable_resolution_rebuild"],studies_access:{type:"black",tools:[{name:"Ratio",grayed:!1},{name:"Spread",grayed:!1},{name:"Correlation Coefficient",grayed:!1}]}},Zb={name:"",symbol:"",full_name:"",ticker:"",type:"bitcoin",session:"24x7",exchange:"",timezone:"Asia/Hong_Kong",minmov:1,pricescale:1e4,has_intraday:!0,has_dwm:!0,has_fractional_volume:!0,intraday_multipliers:["1","1","3","5","15","30","60","120","240","360","720","D","W","M","12M"],has_seconds:!1,seconds_multipliers:["5"],has_daily:!0,has_weekly_and_monthly:!0,volume_precision:8,data_status:"streaming",expired:!1,limit:100,base_name:[],legs:[]},$b=["Volume","Correlation Coefficient","Spread","Ratio"];function tg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ng(t,e,n[e])})}return t}function eg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ng(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var og=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ng(this,"convertList",function(t){var n=t.list,o=t.config;return n.map(function(t){return e.convertItem({item:t,config:o})})}),this.symbolInfo=Object.assign(Zb,n),this.config=o;var r=o.language,i=o.wsUrl;this.languageMap=qu(r),this.convertNames={},this.disconnected=!1,this.currentPeriod=0,this.restCallback={},this.wsCallback={},this.restCompare={},this.restCompareData={},this.wsTime={},this.socket=new WebSocketCore({connectUrl:i});var a=this.socket;this.connected=new Promise(function(t){e.connectedHandle=a.onSocketConnected(function(){e.disconnected&&(e.resetBars(),e.disconnected=!1),t()}),e.errorHandle=a.onSocketError(function(){e.disconnected=!0,e.resetBars()})}),this.pingHandle=a.onPushDiscontinue(function(){a.sendChannel("ping")}),this.PushHandle=a.setPushDataResolver(function(t){var n=o.isV5,r=O.convertWsData(tg({isV5:n},t)),i=r.id,a=r.instId,c=r.item,u=e.wsCallback[i];if(u){var s=e.getConfig(a),l=e.convertItem({item:c,config:s});u(l),e.wsTime[i]=l.time}}),a.connect()}return function(t,e,n){e&&eg(t.prototype,e),n&&eg(t,n)}(t,[{key:"onReady",value:function(t){var e=this,n=this.config.compare;if(n){var o=Object.keys(n).map(function(t){return{value:t,name:e.languageMap.compare["".concat(t,"_title")]}});setTimeout(function(){t({symbols_types:o})},0)}else setTimeout(function(){t({})},0)}},{key:"searchSymbols",value:function(t,e,n,o){var r=this.config.compare;if(n&&r){var i=r[n].listUrl;this.getCompareData(n,i).then(function(e){var r=e.key,i=e.data;if(r===n){var a=i.filter(function(e){return e.symbol.includes(t)});o(a)}}).catch(function(){o([])})}else o([])}},{key:"resolveSymbol",value:function(t,e){var n=this,o=this.getConfig(t).convertName,r=o?o(t,this.config.currency):t;t===this.config.symbol&&(this.symbolInfo.symbol=t,this.symbolInfo.base_name=[r],this.symbolInfo.legs=[r]),t!==r&&(this.convertNames[r]=t),setTimeout(function(){e(tg({},n.symbolInfo,{symbol:n.convertNames[r]||t,name:r,full_name:r}))},0)}},{key:"getBars",value:function(t,e,n,o,r,i,a,c){var u=this,s=t.symbol,l=this.getConfig(s),f=tg({},l,{period:e}),p=O.getChannelArg(f),y=JSON.stringify(p);this.currentPeriod=e,this.restCallback[y]=r,a?h.ajax({url:O.getKlineUrl(f)}).then(function(e){var n=e.code,o=e.data;if(0===Number(n)){var i=u.convertList({list:O.sortRestData({isV5:l.isV5,data:o}),config:l});if(s===u.config.symbol){var a=i.map(Object.values),f=w.pricePrecision(a),p=Math.pow(10,f);t.pricescale=p,u.symbolInfo.pricescale=p}r(i);var h=u.wsCallback[y],d=u.wsTime[y];h&&d&&i.forEach(function(t){t.time>=d&&h(t)}),c&&c.subscribeChannel&&c.subscribeChannel()}else r([])}).catch(function(t){if(r([],{noData:!0}),!c||!c.subscribeChannel)throw t;c.subscribeChannel()}):r([],{noData:!0})}},{key:"resetBars",value:function(){var t=this;Object.keys(this.restCallback).forEach(function(e){var n=JSON.parse(e),o={subscribeChannel:function(){t.sendChannel("subscribe",[n])}},r=n.instId||n.split(":")[1];t.getBars({symbol:r},t.currentPeriod,null,null,t.restCallback[e],null,!0,o)})}},{key:"sendChannel",value:function(t,e){var n=this;if(e.length){var o=JSON.stringify({op:t,args:e});"unsubscribe"===t&&e.forEach(function(t){var e=JSON.stringify(t);delete n.restCallback[e],delete n.wsCallback[e],delete n.wsTime[e]}),this.socket.isConnected()?this.socket.sendChannel(o):this.connected.then(function(){n.socket.isConnected()&&n.socket.sendChannel(o)})}}},{key:"subscribeBars",value:function(t,e,n){var o=t.symbol,r=this.getConfig(o),i=O.getChannelArg(tg({},r,{period:e}));this.wsCallback[JSON.stringify(i)]=n,this.sendChannel("subscribe",[i])}},{key:"unsubscribeBars",value:function(t){if(this.currentPeriod){var e=t.split("_"),n=e.pop(),o=e.join(),r=this.getConfig(o),i=O.getChannelArg(tg({},r,{period:n}));this.wsCallback[JSON.stringify(i)]&&this.sendChannel("unsubscribe",[i])}}},{key:"unsubscribeAll",value:function(){var t=Object.keys(this.wsCallback).map(function(t){return JSON.parse(t)});this.sendChannel("unsubscribe",t)}},{key:"convertItem",value:function(t){var e=t.item,n=t.config,o=(0,n.dataAdapter)(e,n.charge,this.config.rate);return{time:o[0],open:o[1],high:o[2],low:o[3],close:o[4],volume:o[5]}}},{key:"getCompareData",value:function(t,e){var n=this,o=this.restCompare[t];if(o)return o;var r=h.ajax({url:e}).then(function(e){var o=e.code,r=e.data;if(0!==o)return{key:t,data:[]};var i=n.config,a=i.compare,c=i.currency,u=a[t].convertList({list:r,key:t,currency:c,lang:n.languageMap.compare});return n.restCompareData[t]=u,{key:t,data:u}});return this.restCompare[t]=r,r}},{key:"getConfig",value:function(t){var e=this.config.symbol,n=this.config.compare;if(t===e||!n)return this.config;var o=n.index,r=e.match(/^\w+-(\w+)/);if(r&&r[0]===t&&o)return tg({},this.config,o,{charge:r[1],symbol:t});for(var i=Object.keys(n),a=0,c=i.length;a<c;a++)for(var u=i[a],s=n[u],l=this.restCompareData[u]||[],f=0,p=l.length;f<p;f++){var h=l[f],y=h.full_name,d=h.charge;if(y===t)return tg({},this.config,s,{charge:d,symbol:t})}return this.config}},{key:"setLanguage",value:function(t){this.restCompare={},this.languageMap=qu(t)}},{key:"destroy",value:function(){this.unsubscribeAll(),this.pingHandle(),this.PushHandle(),this.connectedHandle(),this.errorHandle()}}]),t}(),rg=n(2),ig={zh_hk:"zh_TW",zh_cn:"zh",en_us:"en",fr_fr:"fr",th_th:"th",rn_ru:"ru",es_es:"es",vi_vi:"vi"};function ag(t){return"line"===t&&(t="1"),/m/.test(t)?t.replace(/m/,""):/H/.test(t)?"".concat(60*parseInt(t,10)):/Y/.test(t)?"".concat(12*parseInt(t,10),"M"):t.toUpperCase()}function cg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ug=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),cg(this,"ready",function(t){t&&e.callbackList.push(t),e.readyState&&(e.callbackList.forEach(function(t){t()}),e.callbackList=[])}),cg(this,"init",function(){var t=e.widgetConfig,n=t.container_id,o=t.theme,r=t.language,i=e.kSettings.storage.period,a=e.themeInstance.Background;h("#".concat(n)).css({backgroundColor:a}),e.widgetConfig.datafeed=e.datafeed,e.widgetConfig.loading_screen={backgroundColor:a},e.widgetConfig.custom_css_url=e.getCustomCSSFile(o),e.widgetConfig.locale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.toLowerCase(),ig[t]?ig[t]:ig.en_us}(r),e.widgetConfig.interval=ag(i),e.widgetConfig.overrides=e.getOverrides(),e.widgetConfig.saved_data=e.getSavedData(),e.widget=new rg.widget(e.widgetConfig),e.widget.onChartReady(function(){e.readyState=!0,e.ready(),e.widgetConfig.onChartReady&&e.widgetConfig.onChartReady(),e.setPrecision(),e.widget.subscribe("study",e.onAddStudy),e.widget.subscribe("add_compare",e.onAddCompare),e.widget.subscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.createCompare()})}),cg(this,"onAddStudy",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;if("Overlay"===t||"Compare"===t){e.priceScaleMode=e.priceScale.getMode();var n=e.getAllStudies(),o=e.themeInstance["Indicator".concat(n.length%6)];e.widget.applyStudiesOverrides({"compare.plot.color":o,"Overlay.lineStyle.color":o})}}),cg(this,"onAddCompare",function(){e.priceScale.setMode(e.priceScaleMode)}),cg(this,"onAutoSaveNeeded",function(){e.widget.save(function(t){if(t&&t.charts&&0!==t.charts.length){var n=t.charts[0],o=e.kSettings.tId,r=e.kConfig,i=r.theme,a=r.reverseColor;n.theme=i,n.reverseColor=a,localStorage.setItem(o,JSON.stringify(n))}})}),cg(this,"getSavedData",function(){var t=e.kSettings.tId,n=e.kConfig,o=n.theme,r=n.reverseColor,i=n.symbol,a=localStorage.getItem(t);if(a){var c=JSON.parse(a),u=c.panes,s=void 0===u?[]:u,l=c.theme,f=c.reverseColor;if(o===l&&r===f){for(var p=0,h=s.length;p<h;p++)for(var y=s[p].sources,d=void 0===y?[]:y,b=d.length-1;b>=0;b--){var g=d[b],v=g.type,m=g.state,_=void 0===m?{}:m;if("study_Compare"!==v&&"study_Overlay"!==v){if("MainSeries"===v){_.symbol=i;var w=e.kStorage.period;_.interval=ag(w),"line"===w&&(_.style=2)}}else d.splice(b,1)}return c}}}),cg(this,"setPrecision",function(){var t=e.datafeed.symbolInfo,n=t.pricescale,o=Math.ceil(Math.log(n)/Math.log(10)),r={},i=e.widget.getStudiesList();i.push("Compare","Overlay"),i.forEach(function(t){$b.includes(t)||(r["".concat(t,".precision")]=o)}),r["Compare.minTick"]="".concat(n,",1,false"),r["Overlay.minTick"]="".concat(n,",1,false"),e.widget.applyStudiesOverrides(r);var a=e.widget.activeChart();e.getAllStudies().forEach(function(t){var e=t.id,n=t.name;$b.includes(n)||a.getStudyById(e).applyOverrides({precision:o})}),a._chartWidget.model().mainSeries().updateSymbolInfo(t)}),cg(this,"createCompare",function(){var t=e.kConfig,n=t.compare,o=void 0===n?{}:n,r=t.symbol;if(o.index&&!e.creatingStudy[r]){var i=e.widget.activeChart(),a=i.getPanes().find(function(t){return t.hasMainSeries()});if(a){e.priceScale=a.getMainSourcePriceScale(),e.priceScaleMode=e.priceScale.getMode(),e.creatingStudy[r]=!0;var c=w.indexSymbol(r);i.createStudy("Compare",!1,!1,["close",c]).then(function(){e.onAddCompare(),delete e.creatingStudy[r]})}}}),cg(this,"deleteCustomStudy",function(){var t=e.widget.activeChart();e.getAllStudies().forEach(function(e){var n=e.id,o=e.name;["Compare","Overlay"].includes(o)&&t.removeEntity(n)})}),cg(this,"getAllStudies",function(){return e.widget.activeChart().getAllStudies()||[]}),cg(this,"getCustomCSSFile",function(t){var n=e.kConfig.cdnBaseUrl,o="assets/okfe/okui/okline/".concat("0.3.55","/css/").concat(t,".css");return"".concat(n,"/cdn/").concat(o)}),cg(this,"switchDeputyIndicator",function(){e.widget.activeChart()._chartWidget.showIndicators()}),cg(this,"switchSettings",function(){var t=e.widget.activeChart()._chartWidget;(t.showChartProperties||t.showGeneralChartProperties).call(t)}),cg(this,"setTheme",function(t){var n=e.widgetConfig.container_id;e.themeInstance=Vt(t,e.kConfig);var o=e.themeInstance.Background;h("#".concat(n)).css({backgroundColor:o}),e.kSettings.updateTheme(t),e.widget.changeTheme(t);var r=e.getOverrides();e.applyOverrides(r),e.addCustomCSSFile(e.getCustomCSSFile(t))}),cg(this,"setReverseColor",function(t){e.kSettings.updateConfig({reverseColor:t}),e.setTheme(e.kConfig.theme)}),cg(this,"setLanguage",function(t){e.datafeed.setLanguage(t),e.updateConfig({language:t})}),cg(this,"updateConfig",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.datafeed.unsubscribeAll(),e.kSettings.updateConfig(t),e.kSettings.cover({target:e.widgetConfig,sources:e.kConfig}),e.init()}),cg(this,"setPeriod",function(t){if(t!==e.kStorage.period){var n=ag(e.kStorage.period);e.kSettings.updateStorage({period:t});var o=e.widget.activeChart(),r=o.chartType(),i=e.lastType,a=void 0===i?1:i;e.lastType=2===r?a:r,"line"===t?(o.setChartType(2),t="1"):o.setChartType(e.lastType);var c=ag(t);n!==c&&(e.datafeed.unsubscribeAll(),o.setResolution(c,function(){}))}}),cg(this,"setSymbol",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t!==e.kConfig.symbol){e.deleteCustomStudy(),e.datafeed.unsubscribeAll(),e.kSettings.updateConfig(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){cg(t,e,n[e])})}return t}({},n,{symbol:t}));var o=e.kSettings.storage.period;e.widget.setSymbol(t,ag(o),function(){t===e.kConfig.symbol&&(e.setPrecision(),e.createCompare())})}else n.currency===e.kConfig.currency&&n.priceType===e.kConfig.priceType||e.updateConfig(n)}),cg(this,"showCompareOrAdd",function(){e.widget.activeChart()._chartWidget.showCompareOrAdd()}),cg(this,"addCustomCSSFile",function(t){e.widget.addCustomCSSFile(t)}),cg(this,"applyOverrides",function(t){e.widget.applyOverrides(t)}),cg(this,"getOverrides",function(){var t=e.themeInstance,n=t.Positive,o=t.Negative;return{volumePaneSize:"medium","mainSeriesProperties.lineStyle.color":"#FF0000","paneProperties.background":t.Background,"mainSeriesProperties.candleStyle.upColor":n,"mainSeriesProperties.candleStyle.downColor":o,"mainSeriesProperties.candleStyle.borderUpColor":n,"mainSeriesProperties.candleStyle.borderDownColor":o}}),cg(this,"destroy",function(){e.readyState=!1,e.widget&&e.widget._ready&&(e.widget.unsubscribe("study",e.onAddStudy),e.widget.unsubscribe("add_compare",e.onAddCompare),e.widget.unsubscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.widget.remove(),e.datafeed.destroy())});var r=n.kSettings,i=r.config,a=r.storage;this.kSettings=r,this.kConfig=i,this.kStorage=a,this.widgetConfig=Object.assign(Qb,this.kConfig,n),this.datafeed=new og(o,this.kConfig),this.callbackList=[],this.readyState=!1,this.creatingStudy={},this.priceScale={getMode:function(){},setMode:function(){}},this.priceScaleMode=0,this.themeInstance=Vt(this.kConfig.theme,this.kConfig),this.init()};function sg(t){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fg(t,e){return!e||"object"!==sg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pg(t){return(pg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hg(t,e){return(hg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=fg(this,pg(e).call(this));var o=t.el,r=t.init,i=void 0===r||r,a=t.kSettings,c=t.kConfig,u=t.kStorage,s=t.kState;return n.kSettings=a,n.kConfig=c,n.kStorage=u,n.kState=s,n.el=o,n.lang=qu(n.kState.language),i&&n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hg(t,e)}(e,s),function(t,e,n){e&&lg(t.prototype,e),n&&lg(t,n)}(e,[{key:"init",value:function(){var t=this;this.render(),this.setLanguage(),this.bindEvent(),function(t){var e=new j(t);C.target=e,t(),C.target=null}(function(){t.lang=qu(t.kState.language),t.setLanguage()})}},{key:"bindEvent",value:function(){}},{key:"setLanguage",value:function(){}},{key:"render",value:function(){}},{key:"hide",value:function(){this.el.addClass("hide")}},{key:"show",value:function(){this.el.removeClass("hide")}},{key:"delete",value:function(){this.el[0].remove()}}]),e}();n(11);function dg(t){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gg(t,e){return!e||"object"!==dg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vg(t){return(vg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mg(t,e){return(mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gg(this,vg(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mg(t,e)}(e,yg),function(t,e,n){e&&bg(t.prototype,e),n&&bg(t,n)}(e,[{key:"render",value:function(){var t=this.kConfig.logoIcon||{},e=t.content,n=t.type;e&&(this.el.removeClass("hide"),"img"===n?this.el.html('<img src="'.concat(e,'"/>')):this.el.html("<span>".concat(e,"</span>")))}}]),e}();n(12);function wg(t){return(wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Og(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pg(t,e){return!e||"object"!==wg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kg(t,e,n){return(kg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cg(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Cg(t){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ag(t,e){return(Ag=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.init=!1,n=Pg(this,Cg(e).call(this,t));var o=t.list,r=void 0===o?[]:o,i=t.showList,a=void 0===i?[]:i,c=t.selected;return n.list=r,n.showList=Og(a),n.selected=c,n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ag(t,e)}(e,yg),function(t,e,n){e&&Sg(t.prototype,e),n&&Sg(t,n)}(e,[{key:"init",value:function(){kg(Cg(e.prototype),"init",this).call(this)}},{key:"bindEvent",value:function(){var t=this,e=this.el.parent().parent(),n=h(".dropdown",this.el),o=h(".arrow",this.el),r=o.parent("ul").hasClass("select-full");r&&(o=o.parent("ul"));var i=h(".arrow span",this.el);this.el.on("click",function(e){var r=h(e.target).closest("div");if(r&&r.hasClass("collect-icon"))return t.collectChange(r.parent().attr("key")),t.emit("collect-change",Og(t.showList)),void e.stopPropagation();if(r=h(e.target).closest(".dropdown.edit li[ev=period], .dropdown div[ev=period]"))t.emit("period-edit",r);else if((r=h(e.target).closest("li"))&&r.attr("key")&&!r.hasClass("stop-propagation")){r.hasClass("k-checkbox")||(i.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide"));var a=r.attr("key"),c=t.selected!==a;t.selectChange(a),c&&t.emit("select-change",a),t.emit("select-click",a)}});var a=function(){n.removeClass("hide");var a=e[0].getBoundingClientRect(),c=a.width,u=a.height,s=a.bottom,l=t.el[0],f=l.offsetLeft,p=l.offsetWidth,h=n[0].offsetWidth,y=p+f-o[0].offsetWidth+(r?-10:-36);y<0&&(y=10),y+h>c&&(y=c-h-10),o.addClass("hover"),i.css({"transition-duration":"0.5s",transform:"rotate(180deg)"}),n.css({top:"".concat(u-1,"px"),left:"".concat(y,"px"),maxHeight:"".concat(window.innerHeight-s-5,"px")}),t.emit("show")},c=function(){i.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide")};if(this.el.on("mouseleave",c),Cu.isMobile)return o.on("touchstart",function(){n.hasClass("hide")?a():c()}),this.el.on("touchstart",function(t){t.stopPropagation()}),void window.addEventListener("touchstart",c);o.on("mouseenter",function(){n.hasClass("hide")&&a()})}},{key:"selectChange",value:function(t){var e=this.showList,n=this.selected,o=h('.collect li[key="'.concat(n,'"]'),this.el),r=y('li[key="'.concat(n,'"]'),this.el),i=h('.collect li[key="'.concat(t,'"]'),this.el),a=y('li[key="'.concat(t,'"]'),this.el);-1==e.indexOf(n)&&o.addClass("hide"),r.removeClass("selected"),a.addClass("selected"),i.removeClass("hide"),this.selected=t}},{key:"collectChange",value:function(t){var e=this.showList,n=this.selected,o=h('.collect li[key="'.concat(t,'"]'),this.el),r=h('.dropdown li[key="'.concat(t,'"] .collect-icon'),this.el),i=h("i",r),a=e.indexOf(t);if(a>-1)return n!=t&&o.addClass("hide"),r.removeClass("collected"),i.removeClass("iconStar"),i.addClass("iconStar-o"),void e.splice(a,1);o.removeClass("hide"),r.addClass("collected"),i.addClass("iconStar"),i.removeClass("iconStar-o"),e.push(t)}},{key:"render",value:function(){this.el.html('<div class="collect"></div><div class="dropdown hide"></div><div class="border-line"></div>')}}]),e}();n(13);function xg(t){return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mg(t,e){return!e||"object"!==xg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tg(t,e,n){return(Tg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rg(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Rg(t){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dg(t,e){return(Dg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ig=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.kStorage,o=n.periodCollects,r=n.period;return t.list=t.kConfig.periods,t.showList=o,t.selected=r,Mg(this,Rg(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dg(t,e)}(e,jg),function(t,e,n){e&&Eg(t.prototype,e),n&&Eg(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;Tg(Rg(e.prototype),"bindEvent",this).call(this),this.on("period-edit",function(e){var n=e.attr("type"),o=e.attr("key");switch(n){case"edit":t.setEditState();break;case"complete":t.setCompleteState();break;case"remove":t.setPeriodState(o,"bottom");break;case"add":t.setPeriodState(o,"top")}}),this.on("show",function(){h(".dropdown",t.el).addClass("complete").removeClass("edit"),t.setPeriodList()})}},{key:"setLanguage",value:function(){var t=this,e=this.lang.period;this.list.forEach(function(n){var o=n.replace(/\D/g,""),r=n.replace(/\d/g,"");y('span[key="'.concat(n,'"]'),t.el).html("".concat("line"==r?"":o).concat(e[r]))}),y(".dropdown div[lang]",this.el).each(function(t){var n=h(t),o=n.attr("lang");n.html(e[o])})}},{key:"setEditState",value:function(){h(".dropdown",this.el).addClass("edit").removeClass("complete")}},{key:"setCompleteState",value:function(){h(".dropdown",this.el).addClass("complete").removeClass("edit");var t=[];y(".top li",this.el).each(function(e){var n=h(e);n.hasClass("hide")||t.push(n.attr("key"))}),this.showList=t,this.emit("collect-change",t.concat())}},{key:"setPeriodState",value:function(t,e){y('.dropdown li[key="'.concat(t,'"]'),this.el).addClass("hide"),h(".dropdown .".concat(e,' li[key="').concat(t,'"]'),this.el).removeClass("hide")}},{key:"setPeriodList",value:function(){var t=this;y(".dropdown li[key]",this.el).removeClass("hide"),this.list.forEach(function(e){var n=t.showList.includes(e),o=h('.top li[key="'.concat(e,'"]'),t.el),r=h('.bottom li[key="'.concat(e,'"]'),t.el);n?r.addClass("hide"):o.addClass("hide")})}},{key:"setTopBottom",value:function(){var t=h(".dropdown .top",this.el),e=h(".dropdown .bottom",this.el),n=y("li.hide",t),o=y("li.hide",e);t.removeClass("hide"),e.removeClass("hide"),n&&n.length==this.list.length&&t.addClass("hide"),o&&o.length==this.list.length&&e.addClass("hide")}},{key:"render",value:function(){var t=this;Tg(Rg(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[],a=[];this.list.forEach(function(e){var n=t.selected==e?"selected":"",o=t.showList.includes(e)?"":"hide",c='key="'.concat(e,'"');r.push('<li class="'.concat(n," ").concat(o,'" ').concat(c,"><span ").concat(c," /></li>")),i.push('<li class="'.concat(n," ").concat(o,'" ').concat(c,' ev="period" type="remove"><span ').concat(c,"></span><div>-</div></li>")),a.push('<li class="'.concat(n," ").concat(o?"":"hide",'" ').concat(c,' ev="period" type="add"><span ').concat(c,"></span><div>+</div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html("<ul>".concat(r.join(""),"</ul>"));var c='<div class="top"><div class="period-header"><div lang="my"></div><div lang="edit" ev="period" type="edit"></div><div lang="complete" ev="period" type="complete"></div></div><ul>'.concat(i.join(""),"</ul></div>"),u='<div class="bottom"><div class="period-header"><div lang="more"></div></div><ul>'.concat(a.join(""),"</ul></div>");o.addClass("complete"),o.html("".concat(c).concat(u))}}]),e}();function Lg(t){return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fg(t,e){return!e||"object"!==Lg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bg(t){return(Bg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vg(t,e){return(Vg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hg=Mu.Original,Ug=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fg(this,Bg(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vg(t,e)}(e,yg),function(t,e,n){e&&Ng(t.prototype,e),n&&Ng(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target).closest("li");if(n){var o=!n.hasClass("selected");n.removeClass("selected"),o&&t.kStorage.klineType===Hg&&n.addClass("selected"),t.emit("switch",o)}})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_indicator)}},{key:"renderOriginal",value:function(){var t=h("li",this.el);this.kStorage.showIndics?t.addClass("selected"):t.removeClass("selected")}},{key:"renderTradingView",value:function(){h("li",this.el).removeClass("selected")}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconzhibiaozhuanqu"></i></li>'),this.kStorage.klineType===Hg?this.renderOriginal():this.renderTradingView()}}]),e}();n(14);function Yg(t){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wg(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Gg(t,e){return!e||"object"!==Yg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zg(t,e,n){return(zg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kg(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Kg(t){return(Kg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jg(t,e){return(Jg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qg=[],Qg=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.kConfig.mainIndics,o=t.kStorage.mainIndic;return t.list=n,t.showList=o.length>0?o:["None"],qg=Wg(o),Gg(this,Kg(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jg(t,e)}(e,jg),function(t,e,n){e&&Xg(t.prototype,e),n&&Xg(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;zg(Kg(e.prototype),"bindEvent",this).call(this),this.on("select-click",function(e){if(y("li",t.el).removeClass("selected"),y(".collect li",t.el).addClass("hide"),y(".dropdown li i",t.el).removeClass("iconicn-d-check-outline-lg").addClass("iconcheckbox-selecte"),"None"==e)qg=[];else{var n=qg.indexOf(e);n>-1?qg.splice(n,1):qg.push(e),qg.length>2&&(qg=qg.slice(1,3)),qg.forEach(function(e){y('li[key="'.concat(e,'"]'),t.el).addClass("selected"),h('.collect li[key="'.concat(e,'"]'),t.el).removeClass("hide"),h('.dropdown li[key="'.concat(e,'"] i'),t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")})}0==qg.length&&(y('li[key="None"]',t.el).addClass("selected"),h('.collect li[key="None"]',t.el).removeClass("hide"),h('.dropdown li[key="None"] i',t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")),t.emit("main-indicators",Wg(qg))})}},{key:"reset",value:function(){var t=this.kConfig.mainIndics,e=this.kStorage.mainIndic;this.list=t,this.showList=e.length>0?e:["None"],qg=Wg(e),this.el.off("click"),this.el.off("mouseleave"),this.off("select-click"),this.init()}},{key:"render",value:function(){var t=this;zg(Kg(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[];this.list.forEach(function(e){var n=t.showList.indexOf(e)>-1,o='key="'.concat(e,'"'),a='class="'.concat(n?"selected":"hide",' stop-propagation"'),c='class="'.concat(n?"selected":"",' k-checkbox"'),u='class="'.concat(n?"iconfont iconicn-d-check-outline-lg":"iconfont iconcheckbox-selecte",'"');r.push("<li ".concat(o," ").concat(a,"><span ").concat(o,">").concat(e,"</span></li>")),i.push("<li ".concat(o," ").concat(c,"><span ").concat(o,">").concat(e,'</span><div class="k-checkbox"><i ').concat(u,"></i></div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html('<ul class="select-full">'.concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();n(15);function Zg(t){return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ev(t,e){return!e||"object"!==Zg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nv(t,e,n){return(nv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ov(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ov(t){return(ov=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rv(t,e){return(rv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iv={CandleStick:"iconcandlestick",CandleStickHLC:"iconcandlestickhlc",OHLC:"iconohlc"},av=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.list=t.kConfig.mainStyles,t.selected=t.kStorage.mainStyle,ev(this,ov(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rv(t,e)}(e,jg),function(t,e,n){e&&tv(t.prototype,e),n&&tv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;nv(ov(e.prototype),"bindEvent",this).call(this),this.on("collect-change",function(){t.emit("style-collect",$g(t.showList))})}},{key:"render",value:function(){var t=this;nv(ov(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[];this.list.forEach(function(e){var n='name="'.concat(e,'"'),o='key="'.concat(e,'"'),a=t.showList.indexOf(e)>-1,c='class="'.concat(t.selected==e?"selected":a||"hide",'"'),u='class="'.concat(t.selected==e?"selected":"",'"'),s='class="'.concat(a?"collected":"",' collect-icon"'),l='class="'.concat(a?"iconfont iconStar":"iconfont iconStar-o",'"');r.push("<li ".concat(n," ").concat(o," ").concat(c,'><i class="iconfont ').concat(iv[e],'"></i></li>')),i.push("<li ".concat(o," ").concat(u,'><i class="iconfont ').concat(iv[e],'"></i><span ').concat(o,">").concat(e,"</span><div ").concat(s,"><i ").concat(l,"></i></div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html("<ul>".concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();n(16);function cv(t){return(cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sv(t,e){return!e||"object"!==cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lv(t,e,n){return(lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fv(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function fv(t){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pv(t,e){return(pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hv=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.list=["inst_price","index_price","mark_price"],t.selected=t.kConfig.priceType,sv(this,fv(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pv(t,e)}(e,jg),function(t,e,n){e&&uv(t.prototype,e),n&&uv(t,n)}(e,[{key:"setLanguage",value:function(){var t=this.lang.price_type;y("span[lang]",this.el).each(function(e){var n=h(e),o=n.attr("lang");n.html(t[o])})}},{key:"setSelected",value:function(t){this.selectChange(t),this.selected?this.show():this.hide()}},{key:"render",value:function(){var t=this;this.selected||this.hide(),lv(fv(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[],a=this.lang.price_type;this.list.forEach(function(e){var n=t.selected===e,o='key="'.concat(e,'"'),c='class="'.concat(n?"selected":"hide",'"'),u='class="'.concat(n?"selected":"",'"'),s=a[e],l="lang=".concat(e);r.push("<li ".concat(o," ").concat(c,"><span ").concat(l," >").concat(s,"</span></li>")),i.push("<li ".concat(o," ").concat(u,"><span ").concat(l," >").concat(s,"</span></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html('<ul class="select-full">'.concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gv(t){return(gv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vv(t,e){return(vv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bv(this,gv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vv(t,e)}(e,yg),function(t,e,n){e&&dv(t.prototype,e),n&&dv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target).closest("li");if(n){var o=n.hasClass("selected");o?n.removeClass("selected"):n.addClass("selected"),t.emit("switch",!o)}})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_tools)}},{key:"render",value:function(){if(Cu.isMobile)this.delete();else{var t='class="'.concat(this.kStorage.showLineTool?"selected":"",'"');this.el.html("<li ".concat(t,'><i class="iconfont iconmeasure-tool"></i></li>'))}}}]),e}();function _v(t){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ov(t,e){return!e||"object"!==_v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sv(t){return(Sv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ov(this,Sv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(e,yg),function(t,e,n){e&&wv(t.prototype,e),n&&wv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){t.emit("click",!0)})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_setting)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconmenu-administration"></i></li>')}}]),e}();function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xv(t){return(xv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ev(t,e){return(Ev=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mv=!1,Tv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jv(this,xv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ev(t,e)}(e,yg),function(t,e,n){e&&Av(t.prototype,e),n&&Av(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){Mv=!Mv,Cu.isMobile&&!Cu.isUC&&(Mv?t.requestFullscreen():t.cancelFullScreen());var e=h("i",t.el);e.removeClass("iconexitfullscreen1"),e.removeClass("iconfullscreen2"),Mv?e.addClass("iconexitfullscreen1"):e.addClass("iconfullscreen2"),t.emit("click",Mv),t.setLanguage(),h(".popover",t.el.parent()).addClass("hide")})}},{key:"setLanguage",value:function(){var t=Mv?this.lang.str_fullscreen_close:this.lang.str_fullscreen;h("li",this.el).attr("name",t)}},{key:"requestFullscreen",value:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.call(t)}},{key:"cancelFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;e&&e.call(t)}},{key:"render",value:function(){this.kConfig.showFullscreen||this.hide(),this.el.html('<li><i class="iconfont iconfullscreen2"></i></li>')}}]),e}();n(17);function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Iv(t,e){return!e||"object"!==Rv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nv(t,e){return(Nv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Iv(this,Lv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nv(t,e)}(e,yg),function(t,e,n){e&&Dv(t.prototype,e),n&&Dv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target),o=n.attr("key");o&&o!=t.kStorage.klineType&&(y("span",t.el).removeClass("selected"),n.addClass("selected"),t.emit("toggle",o))})}},{key:"render",value:function(){this.kConfig.showToggle||this.hide();var t=this.kStorage.klineType,e='key="Original" class="'.concat("Original"==t?"selected":"",'"'),n="<span ".concat(e,">Original</span>"),o='key="TradingView" class="'.concat("TradingView"==t?"selected":"",'"'),r="<span ".concat(o,">TradingView</span>");this.el.html("".concat(n).concat(r))}}]),e}();n(18);function Bv(t){return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hv(t,e){return!e||"object"!==Bv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uv(t){return(Uv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yv(t,e){return(Yv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hv(this,Uv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yv(t,e)}(e,yg),function(t,e,n){e&&Vv(t.prototype,e),n&&Vv(t,n)}(e,[{key:"bindEvent",value:function(){if(!Cu.isMobile){var t=this.el.parent(),e=h(".popover",t);t.on("mousemove",function(n){var o=h(n.target).closest("li");if(e.addClass("hide"),o){var r=o.attr("name");if(r){e.removeClass("hide"),e.addClass("bottom"),e.removeClass("top"),h(".title",e).html(r);var i=t[0].getBoundingClientRect(),a=i.top,c=i.left,u=e[0].getBoundingClientRect().width,s=o[0].getBoundingClientRect(),l=s.left-c-u/2+s.width/2,f=s.bottom-a;e.css({left:"".concat(l,"px"),top:"".concat(f,"px")})}}}).on("mouseleave",function(){e.addClass("hide")})}}},{key:"render",value:function(){Cu.isMobile?this.delete():this.el.html('<div class="title"></div><div class="triangle"></div><div class="split"></div>')}}]),e}();function Xv(t){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zv(t,e){return!e||"object"!==Xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kv(t){return(Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jv(t,e){return(Jv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zv(this,Kv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jv(t,e)}(e,yg),function(t,e,n){e&&Gv(t.prototype,e),n&&Gv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){t.emit("click",!0)})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_compare)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconcompare-tool"></i></li>')}}]),e}(),Qv=n(3),Zv=n.n(Qv);n(19),n(20);function $v(t){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){rm(t,e,n[e])})}return t}function em(t){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nm(t,e){return(nm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function om(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var im=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rm(om(om(n=function(t,e){return!e||"object"!==$v(e)&&"function"!=typeof e?om(t):e}(this,em(e).call(this,t)))),"init",function(){var t=n.kConfig,e=t.theme,o=t.barHeight;n.setTheme(e),n.el.css({height:"".concat(o,"px")});var r={kSettings:n.kSettings,kConfig:n.kConfig,kStorage:n.kStorage,kState:n.kState};new Wv(tm({},r,{el:h(".popover",n.el)})),new _g(tm({},r,{el:h(".icon",n.el)})),n.periodSelect=new Ig(tm({},r,{el:h(".periods",n.el)})),n.periodSelect.on("select-change",function(t){n.emit("period-select",t),n.resize()}),n.periodSelect.on("collect-change",function(t){n.kSettings.updateStorage({periodCollects:t}),n.resize()}),n.mainIndicators=new Qg(tm({},r,{el:h(".main-indicators",n.el)})),n.mainIndicators.on("main-indicators",function(t){n.emit("main-indicators",t),n.resize()}),n.mainStyle=new av(tm({},r,{el:h(".main-style",n.el)})),n.mainStyle.on("select-change",function(t){n.emit("style-select",t),n.resize()}),n.mainStyle.on("style-collect",function(t){n.kSettings.updateStorage({mainStyleCollects:t}),n.resize()}),n.priceType=new hv(tm({},r,{el:h(".price-type",n.el)})),n.priceType.on("select-change",function(t){n.emit("price-type",t)}),n.technicalIndicators=new Ug(tm({},r,{el:h(".technical-indicator",n.el)})),n.technicalIndicators.on("switch",function(t){n.emit("technical-indicators",t)}),n.lineTool=new mv(tm({},r,{el:h(".line-tool",n.el)})),n.lineTool.on("switch",function(t){n.emit("line-tool",t)}),n.compare=new qv(tm({},r,{el:h(".compare",n.el)})),n.compare.on("click",function(t){n.emit("compare",t)}),n.setting=new kv(tm({},r,{el:h(".setting",n.el)})),n.setting.on("click",function(t){n.emit("setting",t)}),n.fullscreen=new Tv(tm({},r,{el:h(".fullscreen",n.el)})),n.fullscreen.on("click",function(t){n.emit("fullscreen",t)}),n.toggle=new Fv(tm({},r,{el:h(".toggle",n.el)})),n.toggle.on("toggle",function(t){t===Mu.Original?n.technicalIndicators.renderOriginal():n.technicalIndicators.renderTradingView(),n.kSettings.updateStorage({klineType:t}),n.emit("kline-toggle",t)}),n.resize()}),rm(om(om(n)),"setTheme",function(t){var e=Vt(t,n.kConfig).Background;n.el.attr("class","k-toolbar ".concat(t)),n.el.css({background:e})}),rm(om(om(n)),"setLanguage",function(t){n.kState.language=t}),rm(om(om(n)),"resize",function(){var t=n.el,e=h(".setting",t),o=t[0].offsetWidth;y(".collect li",t).addClass("hide"),y(".collect li.selected, .collect li.arrow",t).removeClass("hide"),y(".dropdown .collected, .dropdown .top li span",t).each(function(n){var r=h(n).parent().attr("key"),i=h('.collect li[key="'.concat(r,'"]'),t);if(i.hasClass("hide")&&!h(n).parent().hasClass("hide")){i.removeClass("hide");var a=document.getElementById("k-toolbar-right").getBoundingClientRect().width;o-e[0].offsetLeft<a+50&&i.addClass("hide")}})});var o=t.anchor,r=t.kSettings;h(Zv.a).append(o),n.el=h(".k-toolbar",o),n.kSettings=r;var i=n.kSettings,a=i.config,c=i.storage;return n.kConfig=a,n.kStorage=c,n.kState=M({language:a.language}),n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nm(t,e)}(e,s),e}(),am=n(4),cm=n.n(am);n(21);function um(t){return(um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sm(t){return(sm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lm(t,e){return(lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hm=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pm(fm(fm(n=function(t,e){return!e||"object"!==um(e)&&"function"!=typeof e?fm(t):e}(this,sm(e).call(this)))),"init",function(){var t=n.kConfig,e=t.element,o=t.width,r=t.height,i=h(e);n.anchor=i,i.html(cm.a),n.containerAnchor=h(".kline-wrap",i),n.oklineAnchor=h("#okline-wrap",i),n.tvklineAnchor=h("#tv-kline-wrap",i),n.toolbarAnchor=h(".k-toolbar-wrap",i),n.loaddingAnchor=h(".kline-loadding",i);var a=new im({anchor:n.toolbarAnchor,kSettings:n.kSettings});n.toolbar=a,n.initKline(),n.resize(o,r),a.on("period-select",function(t){n.emit("period-select",t),n.setPeriod(t)}),a.on("technical-indicators",function(t){n.kline.switchDeputyIndicator(t)}),a.on("main-indicators",function(t){n.kline.setMainIndicator(t)}),a.on("style-select",function(t){n.kline.setChartStyle(t)}),a.on("price-type",function(t){n.emit(S.PRICE_TYPE,t)}),a.on("line-tool",function(t){n.kline.switchDrawLine(t)}),a.on("compare",function(){n.kline.showCompareOrAdd()}),a.on("setting",function(t){n.kline.switchSettings(t)}),a.on("fullscreen",function(t){n.switchFullscreen(t)}),a.on("kline-toggle",function(){n.initKline()})}),pm(fm(fm(n)),"initKline",function(){n.isOriginal()?n.createOKline():n.createTV()}),pm(fm(fm(n)),"isOriginal",function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.kStorage.klineType)===Mu.Original}),pm(fm(fm(n)),"createOKline",function(){n.showLoading(),n.tvKline&&n.tvKline.destroy(),n.tvKline=null,n.oklineAnchor.css({display:"flex"}),n.tvklineAnchor.css({display:"none"}),n.oklineAnchor.html("");var t=n.toolbar,e=t.mainIndicators,o=t.mainStyle,r=t.lineTool,i=t.compare;e.show(),o.show(),r.show(),i.hide(),n.toolbar.resize(),n.okline=new qb({kSettings:n.kSettings,onChartReady:n.onChartReady,anchor:n.oklineAnchor}),n.kline=n.okline}),pm(fm(fm(n)),"createTV",function(){n.showLoading(),n.okline&&n.okline.destroy(),n.okline=null,n.oklineAnchor.css({display:"none"}),n.tvklineAnchor.css({display:"flex"});var t=n.toolbar,e=t.mainIndicators,o=t.mainStyle,r=t.lineTool,i=t.compare;e.hide(),o.hide(),r.hide(),n.kConfig.compare?i.show():i.hide(),n.toolbar.resize(),n.tvKline=new ug({container_id:"tv-kline-wrap",kSettings:n.kSettings,onChartReady:n.onChartReady}),n.kline=n.tvKline}),pm(fm(fm(n)),"onChartReady",function(){n.hideLoading()}),pm(fm(fm(n)),"ready",function(){return new Promise(function(t,e){n.kline&&n.kline.ready(t,e)})}),pm(fm(fm(n)),"showLoading",function(){var t=Vt(n.kConfig.theme).Background;n.loaddingAnchor.css({display:"block",backgroundColor:t})}),pm(fm(fm(n)),"hideLoading",function(){n.loaddingAnchor.css({display:"none"})}),pm(fm(fm(n)),"setPeriod",function(t){n.kline.setPeriod(t)}),pm(fm(fm(n)),"setTheme",function(t){h(".kline-wrap",n.el).attr("class","kline-wrap ".concat(t)),n.toolbar.setTheme(t),n.kline.setTheme(t)}),pm(fm(fm(n)),"setReverseColor",function(t){n.kline.setReverseColor(t)}),pm(fm(fm(n)),"setLanguage",function(t){n.toolbar.setLanguage(t),n.kline.setLanguage(t)}),pm(fm(fm(n)),"updateToolbar",function(t){if(t){var e=t.compare,o=t.priceType;n.kSettings.updateCompare(e),n.toolbar.mainIndicators.reset(),n.isOriginal()||(n.toolbar.mainIndicators.hide(),e?n.toolbar.compare.show():n.toolbar.compare.hide()),n.toolbar.priceType.setSelected(o)}}),pm(fm(fm(n)),"updateConfig",function(t){n.updateToolbar(t),n.kline.updateConfig(t)}),pm(fm(fm(n)),"setSymbol",function(t,e){n.updateToolbar(e),n.kline.setSymbol(t,e)}),pm(fm(fm(n)),"setDepth",function(t){n.kline.setDepth&&n.kline.setDepth(t)}),pm(fm(fm(n)),"updateLastData",function(t){var e=n.kline.updateLastData;e&&e(t)}),pm(fm(fm(n)),"switchToggle",function(t){var e=n.toolbar.toggle;if(t)return e.show(),void n.toolbar.resize();e.hide(),n.isOriginal()||n.createOKline()}),pm(fm(fm(n)),"switchFullscreen",function(t){n.fullscreen=t,n.resize(),n.emit(S.FULL_SCREEN,t)}),pm(fm(fm(n)),"resize",function(t,e){if(n.fullscreen)n.layout(window.innerWidth,window.innerHeight);else{var o=n.anchor[0].getBoundingClientRect();t=t||o.width||n.kConfig.width,e=e||o.height||n.kConfig.height,n.layout(t,e),n.kSettings.updateConfig({width:t,height:e})}}),pm(fm(fm(n)),"layout",function(t,e){var o=n.fullscreen?{position:"fixed",zIndex:"10000"}:{position:"relative",zIndex:"auto"};n.containerAnchor.css(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){pm(t,e,n[e])})}return t}({},o,{width:"".concat(t,"px"),height:"".concat(e,"px")}));var r=e-n.toolbarAnchor[0].getBoundingClientRect().height;n.kline&&n.kline.resize&&n.kline.resize(t,r),n.toolbar.resize()}),pm(fm(fm(n)),"destroy",function(){n.removeAllListeners(),n.kline.destroy()}),n.kSettings=new Eu(t);var o=n.kSettings,r=o.config,i=o.storage;return n.kConfig=r,n.kStorage=i,n.eventType=S,n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lm(t,e)}(e,s),e}();n.d(e,"CombKline",function(){return hm})}]).CombKline});