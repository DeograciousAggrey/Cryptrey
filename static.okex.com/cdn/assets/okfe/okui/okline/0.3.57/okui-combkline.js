!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CombKline=e():(t.okui=t.okui||{},t.okui.CombKline=e())}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=27)}([function(t,e){t.exports='<div class=okline-settings-container> <div class=settings-title></div> <div class=settings-content> <div class=settings-names> </div> <div class="settings-params hide"> <table> <tbody></tbody> </table> <div class=params-btns> <div class="params-btn reset-btn"></div> <div class="params-btn confirm-btn"></div> </div> </div> </div> <div class=close-btn> <i class="iconfont icon-cancel"></i> </div> <div class="back-btn hide"> <i class="iconfont icon-Unfold"></i> </div> </div> '},function(t,e){t.exports='<div class=okline-settings-container> <section class=okline-settings-header> <div class=dialog-title></div> <div class=btn-close> <i class="iconfont icon-cancel"></i> </div> </section> <section class=okline-settings-content> <div class=trade-setting-item id=showOrderInput> <div class=checkbox></div> <i class="iconfont icon-Mul_success"></i> <label class=show-order-input-text></label> </div> <div class=trade-setting-item id=showOrderLine> <div class=checkbox></div> <i class="iconfont icon-Mul_success"></i> <label class=show-order-line-text></label> </div> <div class=trade-setting-item id=showPositionLine> <div class=checkbox></div> <i class="iconfont icon-Mul_success"></i> <label class=show-position-line-text></label> </div> <div class=trade-setting-item id=showOrderRecord> <div class=checkbox></div> <i class="iconfont icon-Mul_success"></i> <label class=show-order-record-text></label> </div> </section> <section class=okline-settings-footer> <button class="btn-group btn-cancel"></button> <button class="btn-group btn-confirm"></button> </section> </div>'},function(t,e){t.exports='<div class=kline-core> <div class=draw-line-box></div> <div class=canvas-indic> <div class=canvas-group> <canvas class="k-canvas main-canvas" style=cursor:default></canvas> <canvas class="k-canvas overlay-canvas" style=cursor:default></canvas> </div> <div class=indic-tab-box></div> </div> </div>'},function(t,e,n){var o,r,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n,c){"object"==a(e)&&void 0!==t?c(e):(r=[e],void 0===(i="function"==typeof(o=c)?o.apply(e,r):o)||(t.exports=i))}(0,function(t){"use strict";var e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function n(t,o){var r=e({},t);for(var i in o)"object"!=a(t[i])||null===t[i]||Array.isArray(t[i])?void 0!==o[i]&&(r[i]=o[i]):r[i]=n(t[i],o[i]);return r}var o={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},r={width:800,height:500,interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function i(){return"1.15 (internal id 37fbf462 @ 2020-04-24 15:44:13.516973)"}var c=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=n(r,t),t.preset){var e=o[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,n){this._innerAPI().changeSymbol(t,e+"",n)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,n){this._innerAPI().saveChartToServer(t,e,n)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=n(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=e,this._iFrame=n.querySelector("#"+this._id);var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){o.addEventListener("load",function e(){o.removeEventListener("load",e,!1),t()},!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,n=t._readyHandlers;e<n.length;e++){var o=n[e];try{o.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var e=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.1c7535a2aac5ec511ed5.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=i,t.version=i,t.widget=c,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){t.exports='<div class=k-toolbar> <div class="hide icon"></div> <div class=periods></div> <div class=main-indicators></div> <div class=main-style></div> <div class="technical-indicator icon-button"></div> <div class="line-tool icon-button"></div> <div class="compare icon-button"></div> <div class="setting icon-button"></div> <div class=fullscreen></div> <div id=k-toolbar-right> <div class=price-type></div> <div class=toggle></div> </div> <div class="popover hide"></div> </div>'},function(t,e){t.exports="<div class=kline-wrap> <div class=k-toolbar-wrap></div> <div class=kline-body-wrap id=okline-wrap></div> <div class=kline-body-wrap id=tv-kline-wrap></div> <div class=kline-loadding></div> </div> "},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,o||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=n.length,i=new Array(o),a=0;a<o;a++)i[a]=n[a].fn;return i},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var c=r?r+t:t;if(!this._events[c])return!1;var u,s,l=this._events[c],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,a),!0}for(s=1,u=new Array(f-1);s<f;s++)u[s-1]=arguments[s];l.fn.apply(l.context,u)}else{var p,h=l.length;for(s=0;s<h;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,e);break;case 3:l[s].fn.call(l[s].context,e,n);break;case 4:l[s].fn.call(l[s].context,e,n,o);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[s].fn.apply(l[s].context,u)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||c(this,i);else{for(var u=[],s=0,l=a.length;s<l;s++)(a[s].fn!==e||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u;var s=u;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=0,this.context=n,null!==e[0]){for(var o=0;o<e.length;o++)this[o]=e[o];this.length=e.length}}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"addClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.add(t);return this}},{key:"removeClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.remove(t);return this}},{key:"hasClass",value:function(t){return this[0]&&this[0].classList.contains(t)}},{key:"before",value:function(t){return this[0]&&this[0].insertAdjacentHTML("beforebegin",t),this}},{key:"after",value:function(t){return this[0]&&this[0].insertAdjacentHTML("afterend",t),this}},{key:"beforeEnd",value:function(t){return this[0]&&this[0].insertAdjacentHTML("beforeend",t),this}},{key:"afterBegin",value:function(t){return this[0]&&this[0].insertAdjacentHTML("afterbegin",t),this}},{key:"append",value:function(e){return this[0]&&(e=e instanceof t?e[0]:e).appendChild(this[0]),this}},{key:"replaceWith",value:function(e){var n=this[0];return n&&(e=e instanceof t?e[0]:e,n.parentNode.replaceChild(e,n),this[0]=e),this}},{key:"clone",value:function(){return this[0]&&this[0].cloneNode(!0)}},{key:"each",value:function(t){[].forEach.call(this,t)}},{key:"empty",value:function(){return this[0]&&(this[0].innerHTML=""),this}},{key:"find",value:function(t){return this[0]&&this[0].querySelectorAll(t)||[]}},{key:"attr",value:function(t,e){return void 0!==e?(this[0]&&this[0].setAttribute(t,e),this):this[0]&&this[0].getAttribute(t)}},{key:"css",value:function(t,e){var n=this;if(!this[0])return this;if("object"===l(t))Object.keys(t).forEach(function(e){n.css(e,t[e])});else{if(void 0===e)return getComputedStyle(this[0])[t];t=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}),this[0].style[t]=e}}},{key:"on",value:function(t,e){if(!this[0])return this;this[0].handler=this[0].handler||{};var n=this[0].handler;return n[t]=n[t]||[],n[t].push(e),this[0].addEventListener(t,e,!1),this}},{key:"off",value:function(t,e){var n=this[0];if(!n)return this;var o=n.handler;if(!o)return this;var r=Object.keys(o);if(!t)return r.forEach(function(t){o[t].forEach(function(e){n.removeEventListener(t,e)})}),n.handler={},this;if(!o[t])return this;if(!e)return o[t].forEach(function(e){n.removeEventListener(t,e)}),n.handler[t]=[],this;n.removeEventListener(t,e);var i=o[t].indexOf(e);return i>=0&&n.handler[t].splice(i,1),this}},{key:"html",value:function(t){for(var e=0;e<this.length;e++)this[e]&&(this[e].innerHTML=t);return this}},{key:"closest",value:function(e){var n=this[0];if(n)for(var o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;n;){if(o.call(n,e))return new t([n]);n=n.parentElement}return null}},{key:"parent",value:function(){return this[0]?new t([this[0].parentNode]):new t([])}},{key:"remove",value:function(){this[0]&&this[0].remove()}},{key:"rect",value:function(){return this[0]?this[0].getBoundingClientRect():{}}}]),t}();function h(t,e){if(t instanceof p)return t;var n;if("string"==typeof t&&(t=t.trim()),e=e instanceof p?e[0]:e||document,t.nodeType)n=t;else if(/</.test(t)){var o=document.createElement("div");o.innerHTML=t,n=o.firstChild}else n=e.querySelector(t);return new p([n],e)}function y(t,e){if(t instanceof p)return t;var n=(e=e instanceof p?e[0]:e||document).querySelectorAll(t);return new p(n,e)}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}h.ajax=function(t){var e=t.type,n=void 0===e?"get":e,o=t.url,r=void 0===o?"":o,i=window.utils;return i&&i.ont?i.ont({url:r,method:n}).then(function(t){return t.data}):new Promise(function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t(JSON.parse(o.responseText))},o.onerror=function(t){e(t)},o.open(n,r,!0),o.setRequestHeader("Content-type","application/json"),o.send()})};var _=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=g(this,v(e).call(this))).el=h(n.el||document),t.kSettings=n.kSettings,t.kConfig=n.kConfig,t.kStorage=n.kStorage,t.kState=n.kState,t.render(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,s),function(t,e,n){e&&b(t.prototype,e),n&&b(t,n)}(e,[{key:"render",value:function(){}}]),e}();function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O={calcDecimalDigits:function(t){var e="".concat(t),n=e.indexOf("."),o=e.indexOf("e-");if(o>-1){var r=+e.slice(o+2);return n>=0?o-(n+1)+r:r}return n<0?0:e.length-1-n},safeDigits:function(t){var e=Math.abs(+t),n=this.calcDecimalDigits(t),o=10;return e>1e3?o=2:e>100?o=3:e>1?o=4:e>.1&&(o=5),Math.min(n,o)},pricePrecision:function(t){var e=this,n=0;return t.forEach(function(t){t.forEach(function(t,o){o>0&&o<5&&(n=Math.max(e.safeDigits(t),n))})}),n},indexSymbol:function(t){return t.replace(/^(\w+-\w+).*/,"$1")},getInstIdInfo:function(t){var e=w(t.replace(/-SWAP$/,"").split("-"),5),n=e[0],o=e[1];return{baseCcy:n,quoteCcy:o,dueDate:e[2],strike:e[3],contract:e[4],uly:"".concat(n,"-").concat(o)}}},S={getSecondPeriod:function(t){var e={line:60,m:60,H:3600,D:86400,W:604800,M:2678400,Y:31536e3,"12M":31536e3};return e[t]?e[t]:(t.replace(/\D/g,"")||1)*e[t.replace(/\d/g,"")||"m"]},getBarPeriod:function(t){if("line"===t)return"1m";if("12M"===t)return"1Y";var e=t.replace(/\D/g,"")||1;if(e>=60)return"".concat(e/60,"H");var n=t.replace(/\d/g,"")||"m";return"".concat(e).concat(n)},getKlineUrl:function(t){var e=t.isV5,n=t.klineUrl,o=t.symbol,r=t.period,i=t.after,a=void 0===i?"":i,c=t.limit,u=void 0===c?1e3:c,s=t.openTimeZone;if(e){var l=this.getUtcPeriod({isV5:e,openTimeZone:s,period:this.getBarPeriod(r)});return"".concat(n,"?instId=").concat(o,"&bar=").concat(l,"&after=").concat(a,"&limit=").concat(u)}var f=this.getUtcPeriod({openTimeZone:s,period:this.getSecondPeriod(r)});return"".concat(n.replace(/<symbol>/,o),"?granularity=").concat(f,"&size=1000")},getUtcPeriod:function(t){var e=t.isV5,n=t.openTimeZone,o=t.period,r=t.isV3Websocket,i=void 0!==r&&r;if(e){return"utc0"===n&&["6H","12H","1D","2D","3D","5D","1W","1M","3M","6M","1Y"].includes(o)?"".concat(o,"utc"):o}var a={21600:"1",43200:"2",86400:"3",172800:"4",259200:"5",432000:"6",604800:"7",2678400:"8",8035200:"9",16070400:"10",31536000:"11"},c="utc0"===n&&Object.keys(a).includes(String(o)),u=c?a[Number(o)]:o,s="";return i&&(s=c?"i":"s"),u+s},getChannelArg:function(t){var e=t.isV5,n=t.product,o=t.channel,r=t.period,i=t.symbol,a=t.openTimeZone;if(e){var c=this.getUtcPeriod({isV5:e,openTimeZone:a,period:this.getBarPeriod(r)});return{channel:"".concat(o).concat(c),instId:i}}var u=this.getUtcPeriod({openTimeZone:a,period:this.getSecondPeriod(r),isV3Websocket:!0});return"".concat(n,"/").concat(o).concat(u,":").concat(i)},convertWsData:function(t){var e=t.isV5,n=t.table,o=t.data,r=t.arg,i=void 0===r?{}:r;if(!o||!o.length)return{};if(e)return{id:JSON.stringify(i),data:o,item:o[0],instId:i.instId};var a=o[0],c=a.instrument_id,u=a.candle;return{id:JSON.stringify("".concat(n,":").concat(c)),data:[u],item:u,instId:c}},sortRestData:function(t){var e=t.isV5,n=t.data;return e?n.sort(function(t,e){return+t[0]>+e[0]?1:-1}):n}},P={FULL_SCREEN:"full_screen",PRICE_TYPE:"price_type"};function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"subs",[]),this.id=t.uid++}return function(t,e,n){e&&k(t.prototype,e),n&&k(t,n)}(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"depend",value:function(){t.target.addDep(this)}},{key:"removeSub",value:function(t){var e=this.subs.indexOf(t);-1!=e&&this.subs.splice(e,1)}},{key:"notify",value:function(){this.subs.forEach(function(t){t.update()})}}]),t}();function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}C(A,"target",null),C(A,"uid",0);var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"deps",{}),this.update=e}return function(t,e,n){e&&j(t.prototype,e),n&&j(t,n)}(t,[{key:"addDep",value:function(t){this.deps[t.id]||(t.addSub(this),this.deps[t.id]=t)}},{key:"removeDeps",value:function(){var t=this;Object.keys(this.deps).forEach(function(e){t.deps[e].removeSub(t)})}}]),t}();function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t){this.data=t,this.walk(t)}function M(t){if(t&&"object"===E(t))return new T(t),t}T.prototype={walk:function(t){var e=this;Object.keys(t).forEach(function(n){e.convert(n,t[n])})},convert:function(t,e){this.defineReactive(this.data,t,e)},defineReactive:function(t,e,n){var o=new A;M(n),Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return A.target&&o.depend(),n},set:function(t){t!==n&&(n=t,M(t),o.notify())}})}};var R={CURSOR:"CURSOR",CROSS_CURSOR:"CROSS_CURSOR",LINE:"LINE",FIB_RETRACE:"FIB_RETRACE",FIB_FANS:"FIB_FANS",SEG:"SEG",STRAIGHT:"STRAIGHT",ARROW:"ARROW",RAY:"RAY",H_STRAIGHT:"H_STRAIGHT",H_RAY:"H_RAY",H_SEG:"H_SEG",V_STRAIGHT:"V_STRAIGHT",PRICE:"PRICE",BI_PARALLEL:"BI_PARALLEL",BI_PARALLEL_RAY:"BI_PARALLEL_RAY",TRI_PARALLEL:"TRI_PARALLEL",HIDE:"HIDE",DELETE:"DELETE",SHOW_ALL:"SHOW_ALL",HIDE_ALL:"HIDE_ALL",DELETE_ALL:"DELETE_ALL"},D={CURSOR:{className:"icon-kline-cursor",lang:"cursor"},CROSS_CURSOR:{className:"icon-kline_tool_a",lang:"cross_cursor"},SEG:{className:"icon-kline_tool_b",lang:"seg_line"},STRAIGHT:{className:"icon-kline_tool_c",lang:"straight_line"},RAY:{className:"icon-kline_tool_d",lang:"ray_line"},ARROW:{className:"icon-kline_tool_e",lang:"arrow_line"},H_SEG:{className:"icon-kline_tool_f",lang:"horz_seg_line"},H_STRAIGHT:{className:"icon-kline_tool_g",lang:"horz_straight_line"},H_RAY:{className:"icon-kline_tool_h",lang:"horz_ray_line"},V_STRAIGHT:{className:"icon-kline_tool_i",lang:"vert_straight_line"},PRICE:{className:"icon-kline_tool_j",lang:"price_line"},TRI_PARALLEL:{className:"icon-kline_tool_k",lang:"tri_parallel_line"},BI_PARALLEL:{className:"icon-kline_tool_l",lang:"bi_parallel_line"},BI_PARALLEL_RAY:{className:"icon-kline_tool_m",lang:"bi_parallel_ray"},FIB_RETRACE:{className:"icon-kline_tool_n",lang:"fib_retrace"},FIB_FANS:{className:"icon-kline_tool_o",lang:"fib_fans"},SHOW_ALL:{className:"icon-Mul_hide",lang:"show_all"},HIDE_ALL:{className:"icon-Mul_show",lang:"hide_all"},DELETE_ALL:{className:"icon-Mul_delete",lang:"delete_all"}},I=[423.6,261.8,250,161.8,150,100,78.6,61.8,50,38.2,23.6,0],L={HIDE:"hide",SHOW:"show",HIGHLIGHT:"highlight"},N={BEFORE:"before",DRAWING:"drawing",AFTER:"after"},F={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},B={NOTHING:"nothing",REFRESH:"refresh",LEFT_UPDATE:"left_update",RIGHT_UPDATE:"right_update"},V={FRAME:"frame",CHART:"chart",TIMELINE:"timeline",MAIN:"main",INDICATOR:"indicator"},H="provider",U={LINE:"line",MA:"MA",EMA:"EMA",INDEX:"Index",MACD:"MACD",KDJ:"KDJ",StochRSI:"StochRSI",RSI:"RSI",DMI:"DMI",OBV:"OBV",BOLL:"BOLL",SAR:"SAR",DMA:"DMA",TRIX:"TRIX",BRAR:"BRAR",VR:"VR",EMV:"EMV",WR:"WR",ROC:"ROC",MTM:"MTM",PSY:"PSY",VOLUME:"VOLUME"},Y={BACKGROUND:"background",GRID:"grid",CONTENT:"content",INDICATOR:"indicator",MAX_MIN:"max_min",INFO:"info",SELECTION:"selection",DRAW_LINE:"draw_line",LAST:"last",TRADE_POINT:"trade_point"},W={LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",FILL:"fill"},X={ALL:"All",CHART_CANVAS:"MainCanvas",OVERLY_CANVAS:"OverlayCanvas"};function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,"init",function(){e._setting={},e._config={},e._storage={},e._dataFeed={},e._dataOrderRecord={},e._dataSource={},e._dataProviders={},e._frame={},e._areas={},e._timeline={},e._plotters={},e._theme={},e._pixelRatio=1,e._cursorType=R.CROSS_CURSOR,e._chartCanvas=null,e._overlayCanvas=null,e._chartContext=null,e._overlayContext=null,e._overlayCanvasSQ=null,e._klineDom=null,e._klineSQ=null,e._documentSQ=h(document),e._chartAction={},e._indicatorAction={},e._drawAction={},e._mouseAction={},e._lineAction={},e._templateAction={},e._orderInputAction={},e._orderAction={},e._positionAction={},e._orderRecordAction={}}),G(this,"getKlineDom",function(){return e._klineDom}),G(this,"setKlineDom",function(t){e._klineDom=t}),G(this,"getKlineSQ",function(){return e._klineSQ}),G(this,"setKlineSQ",function(t){e._klineSQ=t}),G(this,"getDocumentSQ",function(){return e._documentSQ}),G(this,"getChartAction",function(){return e._chartAction}),G(this,"setChartAction",function(t){e._chartAction=t}),G(this,"getTradeAction",function(){return e._tradeAction}),G(this,"setTradeAction",function(t){e._tradeAction=t}),G(this,"getIndicatorAction",function(){return e._indicatorAction}),G(this,"setIndicatorAction",function(t){e._indicatorAction=t}),G(this,"getDrawAction",function(){return e._drawAction}),G(this,"setDrawAction",function(t){e._drawAction=t}),G(this,"getLineAction",function(){return e._lineAction}),G(this,"setLineAction",function(t){e._lineAction=t}),G(this,"getMouseAction",function(){return e._mouseAction}),G(this,"setMouseAction",function(t){e._mouseAction=t}),G(this,"getTemplateAction",function(){return e._templateAction}),G(this,"setTemplateAction",function(t){e._templateAction=t}),G(this,"getSetting",function(){return e._setting}),G(this,"setSetting",function(t){var n=t.config,o=t.storage;e._config=n,e._storage=o,e._setting=t}),G(this,"getConfig",function(){return e._config}),G(this,"getStorage",function(){return e._storage}),G(this,"getDataFeed",function(){return e._dataFeed}),G(this,"setDataFeed",function(t){e._dataFeed=t}),G(this,"getDataOrderRecord",function(){return e._dataOrderRecord}),G(this,"setDataOrderRecord",function(t){e._dataOrderRecord=t}),G(this,"getDataSource",function(){return e._dataSource}),G(this,"setDataSource",function(t){e._dataSource=t}),G(this,"getDataProviders",function(){return e._dataProviders}),G(this,"getDataProvider",function(t){return e._dataProviders[t]}),G(this,"addDataProvider",function(t,n){e._dataProviders[t]=n}),G(this,"removeDataProvider",function(t){delete e._dataProviders[t]}),G(this,"getFrame",function(){return e._frame}),G(this,"setFrame",function(t){e._frame=t}),G(this,"getAreas",function(){return e._areas}),G(this,"getArea",function(t){return e._areas[t]}),G(this,"addArea",function(t,n){e._areas[t]=n}),G(this,"removeArea",function(t){delete e._areas[t]}),G(this,"getTimeline",function(){return e._timeline}),G(this,"setTimeline",function(t){e._timeline=t}),G(this,"getPlotters",function(){return e._plotters}),G(this,"getPlotter",function(t){return e._plotters[t]}),G(this,"addPlotter",function(t,n){e._plotters[t]=n}),G(this,"removePlotter",function(t){delete e._plotters[t]}),G(this,"getTheme",function(){return e._theme}),G(this,"setTheme",function(t){e._theme=t}),G(this,"getChartCanvas",function(){return e._chartCanvas}),G(this,"setChartCanvas",function(t){e._chartContext=t.getContext("2d"),e._chartCanvas=t}),G(this,"getOverlayCanvas",function(){return e._overlayCanvas}),G(this,"setOverlayCanvas",function(t){e._overlayCanvasSQ=h(t),e._overlayContext=t.getContext("2d"),e._overlayCanvas=t}),G(this,"getOverlayCanvasSQ",function(){return e._overlayCanvasSQ}),G(this,"getChartContext",function(){return e._chartContext}),G(this,"getOverlayContext",function(){return e._overlayContext}),G(this,"getPixelRatio",function(){return e._pixelRatio}),G(this,"setPixelRatio",function(t){e._pixelRatio=t}),G(this,"getCursorType",function(){return e._cursorType}),G(this,"setCursorType",function(t){e._cursorType=t}),G(this,"getOrderInputAction",function(){return e._orderInputAction}),G(this,"setOrderInputAction",function(t){e._orderInputAction=t}),G(this,"getOrderAction",function(){return e._orderAction}),G(this,"setOrderAction",function(t){e._orderAction=t}),G(this,"getPositionAction",function(){return e._positionAction}),G(this,"setPositionAction",function(t){e._positionAction=t}),G(this,"getOrderRecordAction",function(){return e._orderRecordAction}),G(this,"setOrderRecordAction",function(t){e._orderRecordAction=t}),this.init()}return function(t,e,n){e&&z(t.prototype,e),n&&z(t,n)}(t,[{key:"getMainProvider",value:function(){return this.getDataProvider("".concat(V.MAIN,".").concat(H))}},{key:"getModuleProvider",value:function(t){return this.getDataProvider("".concat(t,".").concat(H))}},{key:"getMainLeftArea",value:function(){return this.getArea("".concat(V.MAIN,".").concat(W.LEFT))}},{key:"getMainRightArea",value:function(){return this.getArea("".concat(V.MAIN,".").concat(W.RIGHT))}},{key:"getAreaDigits",value:function(t){return t.getModuleName()===V.MAIN?this.getDataSource().getDecimalDigits():2}}]),t}());function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){J(t,e,n[e])})}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,"init",function(){var t=Q.getConfig();e.callbackMap={},e.leftNoData=!1,e.disconnected=!1,e.socket=new WebSocketCore({connectUrl:t.wsUrl}),e.connected=new Promise(function(t){e.connectedHandle=e.socket.onSocketConnected(function(){e.disconnected&&(e.getKlineData({mode:B.REFRESH}),e.disconnected=!1),t()}),e.errorHandle=e.socket.onSocketError(function(){e.disconnected=!0,e.getKlineData({mode:B.RIGHT_UPDATE})})}),e.pingHandle=e.socket.onPushDiscontinue(function(){e.socket.sendChannel("ping")}),e.pushHandle=e.socket.setPushDataResolver(function(t){var n=Q.getConfig(),o=n.isV5,r=n.dataAdapter,i=S.convertWsData(K({isV5:o},t)),a=i.id,c=i.data,u=e.callbackMap[a];u&&u({data:c.map(r),mode:B.RIGHT_UPDATE})}),e.socket.connect()}),J(this,"getKlineData",function(t){var n,o=t.mode,r=Q.getConfig(),i=r.isV5,a=r.klineUrl,c=r.product,u=r.channel,s=r.symbol;if(o===B.LEFT_UPDATE){if(!i||e.leftNoData)return;n=Q.getDataSource().getTimeAt(0)}e.leftNoData=!0;var l=i?2*Q.getTimeline().getMaxItemCount():1e3,f=Q.getChartAction().setKlineData;e.getBars({klineUrl:a,symbol:s,product:c,channel:u,callback:f,mode:o,after:n,limit:l}).then(function(t){t&&(e.leftNoData=t.length<l,e.getIndexData({mode:o,after:n,limit:l}),Q.getDataOrderRecord().getOrderRecord({mode:o,after:n}))})}),J(this,"getIndexData",function(t){var n=t.mode,o=t.after,r=t.limit,i=Q.getStorage().mainIndic,a=Q.getConfig(),c=a.symbol,u=a.compare,s=(void 0===u?{}:u).index;if(s&&i.includes(U.INDEX)){var l=s.klineUrl,f=s.product,p=s.channel,h=O.indexSymbol(c),y=Q.getChartAction().setIndexData;e.getBars({klineUrl:l,symbol:h,product:f,channel:p,callback:y,mode:n,after:o,limit:r})}}),J(this,"getBars",function(t){var n=t.klineUrl,o=t.symbol,r=t.product,i=t.channel,a=t.callback,c=t.mode,u=t.after,s=t.limit,l=Q.getConfig(),f=l.isV5,p=l.symbol,y=l.dataAdapter,d=l.openTimeZone,b=Q.getStorage().period;return h.ajax({url:S.getKlineUrl({isV5:f,klineUrl:n,symbol:o,period:b,after:u,limit:s,openTimeZone:d})}).then(function(t){if(!e.expireRequest({period:b,symbol:p})){var n=t.code,u=t.data,s=void 0===u?[]:u;if(0===Number(n)){var l=S.sortRestData({isV5:f,data:s}).map(y);a({data:l,mode:c})}return c===B.REFRESH&&e.subscribeBars({product:r,channel:i,period:b,symbol:o,callback:a}),s}}).catch(function(){c===B.REFRESH&&e.subscribeBars({product:r,channel:i,period:b,symbol:o,callback:a})})}),J(this,"subscribeBars",function(t){var n=Q.getConfig(),o=n.isV5,r=n.openTimeZone,i=S.getChannelArg(K({isV5:o,openTimeZone:r},t));e.callbackMap[JSON.stringify(i)]=t.callback;var a=JSON.stringify({op:"subscribe",args:[i]});e.socket.isConnected()?e.socket.sendChannel(a):e.connected.then(function(){e.socket.isConnected()&&e.socket.sendChannel(a)})}),J(this,"unsubscribeBars",function(t){var n=Q.getConfig(),o=n.isV5,r=n.openTimeZone,i=S.getChannelArg(K({isV5:o,openTimeZone:r},t));e.unsubscribeChannel([i])}),J(this,"unsubscribeChannel",function(t){if(t.length&&(t.forEach(function(t){delete e.callbackMap[JSON.stringify(t)]}),e.socket.isConnected())){var n=JSON.stringify({op:"unsubscribe",args:t});e.socket.sendChannel(n)}}),J(this,"unsubscribeAll",function(){var t=Object.keys(e.callbackMap).map(function(t){return JSON.parse(t)});e.unsubscribeChannel(t)}),J(this,"unsubscribeIndexData",function(){var t=Q.getConfig(),n=t.symbol,o=t.compare,r=(void 0===o?{}:o).index,i=r.product,a=r.channel,c=Q.getStorage().period,u=n.replace(/^(\w+-\w+).*/,"$1");e.unsubscribeBars({product:i,channel:a,symbol:u,period:c})}),J(this,"expireRequest",function(t){var e=t.period,n=t.symbol,o=Q.getStorage(),r=Q.getConfig();return o.period!==e||r.symbol!==n}),J(this,"destroy",function(){e.unsubscribeAll(),e.pingHandle(),e.pushHandle(),e.connectedHandle(),e.errorHandle()}),this.init()},Z={period:"15m",periodCollects:["line","1m","5m","15m","1H","4H","1D","3D","1W","1M","1Y"],mainStyle:"CandleStick",showIndics:!0,mainIndic:["MA"],selectedDeputyIndics:["VOLUME","MACD"],klineType:"Original",showLineTool:!1,custom:{showIdxIndic:!1},trade:{showOrderInput:!1,showOrderLine:!1,showPositionLine:!1,showOrderRecord:!1}},$={showPriceLine:!0,horizontalLine:{show:!0,width:1},crossCurve:{width:1},indicator:{LINE:{CLOSE:{width:1,show:!0},MA:{width:1,show:!0}},MA:{MA1:{width:1,value:5,show:!0},MA2:{width:1,value:10,show:!0},MA3:{width:1,value:20,show:!0},MA4:{width:1,value:30,show:!1},MA5:{width:1,value:60,show:!1},MA6:{width:1,value:120,show:!1}},EMA:{EMA1:{width:1,value:5,show:!0},EMA2:{width:1,value:10,show:!0},EMA3:{width:1,value:20,show:!0},EMA4:{width:1,value:30,show:!1},EMA5:{width:1,value:60,show:!1},EMA6:{width:1,value:120,show:!1}},BOLL:{N:{value:20},K:{value:2},BOLL:{width:1,show:!0},UB:{width:1,show:!0},LB:{width:1,show:!0}},SAR:{SAR:{width:1,show:!0}},IXPE:{Index:{width:1,show:!0}},VOLUME:{MA1:{width:1,value:5,show:!0},MA2:{width:1,value:10,show:!0},VOLUME:{show:!0}},MACD:{SHORT:{value:12},LONG:{value:26},MID:{value:9},DIF:{width:1,show:!0},DEA:{width:1,show:!0},MACD:{show:!0}},KDJ:{N:{value:9},M1:{value:3},M2:{value:3},K:{width:1,show:!0},D:{width:1,show:!0},J:{width:1,show:!0}},StochRSI:{N:{value:14},M:{value:14},P1:{value:3},P2:{value:3},STOCHRSI:{width:1,show:!0},MASTOCHRSI:{width:1,show:!0}},RSI:{N1:{value:6},N2:{value:12},N3:{value:24},RSI1:{width:1,show:!0},RSI2:{width:1,show:!0},RSI3:{width:1,show:!0}},DMI:{N:{value:14},MM:{value:6},PDI:{width:1,show:!0},MDI:{width:1,show:!0},ADX:{width:1,show:!0},ADXR:{width:1,show:!0}},OBV:{M:{value:30},OBV:{width:1,show:!0},MAOBV:{width:1,show:!0}},DMA:{N1:{value:10},N2:{value:50},M:{value:10},DIF:{width:1,show:!0},DIFMA:{width:1,show:!0}},TRIX:{N:{value:12},M:{value:9},TRIX:{width:1,show:!0},MATRIX:{width:1,show:!0}},BRAR:{N:{value:26},BR:{width:1,show:!0},AR:{width:1,show:!0}},VR:{N:{value:26},M:{value:6},VR:{width:1,show:!0},MAVR:{width:1,show:!0}},EMV:{N:{value:14},M:{value:9},EMV:{width:1,show:!0},MAEMV:{width:1,show:!0}},WR:{N:{value:10},N1:{value:6},WR1:{width:1,show:!0},WR2:{width:1,show:!0}},ROC:{N:{value:12},M:{value:6},ROC:{width:1,show:!0},MAROC:{width:1,show:!0}},MTM:{N:{value:12},M:{value:6},MTM:{width:1,show:!0},MAMTM:{width:1,show:!0}},PSY:{N:{value:12},M:{value:6},PSY:{width:1,show:!0},MAPSY:{width:1,show:!0}}},deputyAreaHeight:{}},tt={horizontalLine:{color:"#898989"},crossCurve:{color:"#898989"},indicator:{LINE:{CLOSE:{color:"#E64C7D"},MA:{color:"#F7B715"}},MA:{MA1:{color:"#E64C7D"},MA2:{color:"#F7B715"},MA3:{color:"#D051DA"},MA4:{color:"#38BCAF"},MA5:{color:"#CB7554"},MA6:{color:"#9BD75A"}},EMA:{EMA1:{color:"#E64C7D"},EMA2:{color:"#F7B715"},EMA3:{color:"#D051DA"},EMA4:{color:"#38BCAF"},EMA5:{color:"#CB7554"},EMA6:{color:"#9BD75A"}},BOLL:{BOLL:{color:"#E64C7D"},UB:{color:"#F7B715"},LB:{color:"#D051DA"}},IXPE:{Index:{color:"#9BD75A"}},VOLUME:{MA1:{color:"#E64C7D"},MA2:{color:"#F7B715"},VOLUME:{color:"#656565"}},MACD:{DIF:{color:"#E64C7D"},DEA:{color:"#F7B715"},MACD:{color:"#656565"}},KDJ:{K:{color:"#E64C7D"},D:{color:"#F7B715"},J:{color:"#D051DA"}},StochRSI:{STOCHRSI:{color:"#E64C7D"},MASTOCHRSI:{color:"#F7B715"}},RSI:{RSI1:{color:"#E64C7D"},RSI2:{color:"#F7B715"},RSI3:{color:"#D051DA"}},DMI:{PDI:{color:"#E64C7D"},MDI:{color:"#F7B715"},ADX:{color:"#D051DA"},ADXR:{color:"#38BCAF"}},OBV:{OBV:{color:"#E64C7D"},MAOBV:{color:"#F7B715"}},DMA:{DIF:{color:"#E64C7D"},DIFMA:{color:"#F7B715"}},TRIX:{TRIX:{color:"#E64C7D"},MATRIX:{color:"#F7B715"}},BRAR:{BR:{color:"#E64C7D"},AR:{color:"#F7B715"}},VR:{VR:{color:"#E64C7D"},MAVR:{color:"#F7B715"}},EMV:{EMV:{color:"#E64C7D"},MAEMV:{color:"#F7B715"}},WR:{WR1:{color:"#E64C7D"},WR2:{color:"#F7B715"}},ROC:{ROC:{color:"#E64C7D"},MAROC:{color:"#F7B715"}},MTM:{MTM:{color:"#E64C7D"},MAMTM:{color:"#F7B715"}},PSY:{PSY:{color:"#E64C7D"},MAPSY:{color:"#F7B715"}}}},et={horizontalLine:{color:"#606775"},crossCurve:{color:"#606775"},indicator:{LINE:{CLOSE:{color:"#FFFFFF"},MA:{color:"#F7B715"}},MA:{MA1:{color:"#FFFFFF"},MA2:{color:"#F7B715"},MA3:{color:"#D051DA"},MA4:{color:"#38BCAF"},MA5:{color:"#CB7554"},MA6:{color:"#9BD75A"}},EMA:{EMA1:{color:"#FFFFFF"},EMA2:{color:"#F7B715"},EMA3:{color:"#D051DA"},EMA4:{color:"#38BCAF"},EMA5:{color:"#CB7554"},EMA6:{color:"#9BD75A"}},BOLL:{BOLL:{color:"#FFFFFF"},UB:{color:"#F7B715"},LB:{color:"#D051DA"}},IXPE:{Index:{color:"#9BD75A"}},VOLUME:{MA1:{color:"#FFFFFF"},MA2:{color:"#F7B715"},VOLUME:{color:"#FFFFFF"}},MACD:{DIF:{color:"#FFFFFF"},DEA:{color:"#F7B715"},MACD:{color:"#FFFFFF"}},KDJ:{K:{color:"#FFFFFF"},D:{color:"#F7B715"},J:{color:"#D051DA"}},StochRSI:{STOCHRSI:{color:"#FFFFFF"},MASTOCHRSI:{color:"#F7B715"}},RSI:{RSI1:{color:"#FFFFFF"},RSI2:{color:"#F7B715"},RSI3:{color:"#D051DA"}},DMI:{PDI:{color:"#FFFFFF"},MDI:{color:"#F7B715"},ADX:{color:"#D051DA"},ADXR:{color:"#38BCAF"}},OBV:{OBV:{color:"#FFFFFF"},MAOBV:{color:"#F7B715"}},DMA:{DIF:{color:"#FFFFFF"},DIFMA:{color:"#F7B715"}},TRIX:{TRIX:{color:"#FFFFFF"},MATRIX:{color:"#F7B715"}},BRAR:{BR:{color:"#FFFFFF"},AR:{color:"#F7B715"}},VR:{VR:{color:"#FFFFFF"},MAVR:{color:"#F7B715"}},EMV:{EMV:{color:"#FFFFFF"},MAEMV:{color:"#F7B715"}},WR:{WR1:{color:"#FFFFFF"},WR2:{color:"#F7B715"}},ROC:{ROC:{color:"#FFFFFF"},MAROC:{color:"#F7B715"}},MTM:{MTM:{color:"#FFFFFF"},MAMTM:{color:"#F7B715"}},PSY:{PSY:{color:"#FFFFFF"},MAPSY:{color:"#F7B715"}}}};function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ot=function(t){var e=t.list,n=t.key,o=t.currency,r=t.lang;return e.map(function(t){var e=t.coin,i=t.instrumentId,a=t.charge,c=t.type,u="USD"===a&&"index"===n?o:a,s=r["".concat(n,"_desc")]||r["".concat(n,"_desc_").concat(c)]||"";return{symbol:e,description:"".concat(u).concat(s),full_name:i,charge:a}})},rt=function(t,e,n){var o="USD"===e?n:1,r=nt(t,6),i=r[0],a=r[1],c=r[2],u=r[3],s=r[4],l=r[5],f=Number(i);return Number.isNaN(f)&&(f=new Date(i).getTime()),[f,Number(a)*o,Number(c)*o,Number(u)*o,Number(s)*o,Number(l)]},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e?".".concat(t.replace(/^(\w+)-USD(-\w+)?$/,"$1-".concat(e,"$2"))):t},at={index:{product:"index",channel:"candle",klineUrl:"/api/index/v3/instruments/<symbol>/candles",listUrl:"/api/index/v3/instruments/list",convertName:it,convertList:ot,dataAdapter:rt},futures:{product:"futures",channel:"candle",klineUrl:"/v3/futures/pc/market/<symbol>/candles",listUrl:"/v3/futures/pc/public/contractInfo",convertList:ot,dataAdapter:rt},swap:{product:"swap",channel:"candle",klineUrl:"/v2/perpetual/pc/public/instruments/<symbol>/candles",listUrl:"/v2/perpetual/pc/public/contract/info",convertList:ot,dataAdapter:rt}},ct={index:{isV5:!0,channel:"index-candle",klineUrl:"/priapi/v5/market/index-candles",listUrl:"/api/index/v3/instruments/list",convertName:it,convertList:ot,dataAdapter:rt},futures:{isV5:!0,channel:"candle",klineUrl:"/priapi/v5/market/candles",listUrl:"/v3/futures/pc/public/contractInfo",convertList:ot,dataAdapter:rt},swap:{isV5:!0,channel:"candle",klineUrl:"/priapi/v5/market/candles",listUrl:"/v2/perpetual/pc/public/contract/info",convertList:ot,dataAdapter:rt}},ut=window.okGlobal||{},st=ut.cdnBaseUrl,lt=void 0===st?"https://static.coinall.ltd":st,ft=ut.locale,pt=void 0===ft?"zh_CN":ft,ht="zh_CN"===pt,yt={isV5:!1,kId:"",element:"",klineUrl:"",wsUrl:"",product:"",channel:"candle",symbol:"",instType:"",exchange:"",compare:void 0,rate:1,currency:"",dataAdapter:function(t){return t[0]=new Date(t[0]).getTime(),t[1]=Number(t[1]),t[2]=Number(t[2]),t[3]=Number(t[3]),t[4]=Number(t[4]),t[5]=Number(t[5]),t},cdnBaseUrl:lt,barHeight:"36",width:"",height:"",language:pt,theme:"dark",customTheme:{},periods:["line","1m","3m","5m","15m","30m","1H","2H","4H","6H","12H","1D","2D","3D","5D","1W","1M","3M","6M","1Y"],mainStyles:["CandleStick","CandleStickHLC","OHLC"],mainIndics:["MA","EMA","BOLL","SAR","None"],deputyIndics:["VOLUME","MACD","KDJ","StochRSI","RSI","DMI","OBV","BOLL","SAR","DMA","TRIX","BRAR","VR","EMV","WR","ROC","MTM","PSY"],reverseColor:!1,openTimeZone:"utc0",showVolume:!0,showFullscreen:!0,showToggle:!0,candleScale:6,enableWheelScale:!0,mainInfoStyle:"vertical",maxToolCount:20,priceType:"",logo:{position:{location:"left-bottom",x:16,y:-12},size:{width:ht?114.08:81.35,height:24},img:{light:"".concat(lt,"/cdn/assets/imgs/213/").concat(ht?"ED8F1CCD06395F05":"E903BD8B0CAF1C27",".png"),dark:"".concat(lt,"/cdn/assets/imgs/213/").concat(ht?"F82861ADABAC75BC":"F9262487814545E9",".png"),default:""}},isLongShort:!1,enableKlineOrder:!1},dt=navigator.userAgent,bt=/iphone|ipad|ipod|ios|android/i.test(dt),gt={isMobile:bt,isPC:!bt,isUC:/ucbrowser/i.test(dt)};function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,"cover",function(t){var e=t.target,o=t.keyTarget,r=t.sources,i=t.keys,a=void 0===i?[]:i,c=t.force,u=void 0===c||c,s=t.sourcesKey,l=o||e,f=void 0!==s&&s?r:l;return Object.keys(f).forEach(function(o){var i=l[o],c=r[o],s=mt(a).concat([o]);if(i&&i.constructor===Object&&c&&c.constructor===Object)n.cover(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){_t(t,e,n[e])})}return t}({},t,{target:e,keyTarget:i,sources:c,keys:s}));else if(void 0!==c&&(u||void 0===i)){var f=e,p=a.length;s.forEach(function(t,e){e===p?f[t]=n.copy(c):f=f[t]})}}),e}),_t(this,"copy",function(t){if("object"!==vt(t)||null===t)return t;var e=t.constructor===Array?[]:{};return Object.keys(t).forEach(function(o){e[o]=n.copy(t[o])}),e}),_t(this,"getDefaultStorage",function(t){t||n.copy(n.defaultStorage);var e=t.split("."),o=n.defaultStorage;return e.forEach(function(t){o=o[t]}),n.copy(o)}),_t(this,"saveStorage",function(){localStorage.setItem(n.oId,JSON.stringify(n.storage))}),_t(this,"setStorage",function(t,e){var o=t.split("."),r=o.length-1,i=n.storage,a=e;return void 0===e&&(a=n.getDefaultStorage(t)),o.forEach(function(t,e){e===r&&(i[t]=a),i=i[t]}),n.saveStorage(),a}),_t(this,"updateStorage",function(t){n.cover({target:n.storage,sources:t,sourcesKey:!0}),n.saveStorage()}),_t(this,"setConfig",function(t,e){n.config[t]=e}),_t(this,"updateConfig",function(t){n.cover({target:n.config,sources:t,sourcesKey:!0}),gt.isMobile&&(n.config.showToggle=!1);var e=t.compare;e&&n.coverCompare(e)}),_t(this,"coverCompare",function(t){if(t){var e=n.config.isV5;Object.keys(t).forEach(function(n){!0===t[n]&&(t[n]=e?ct[n]:at[n])})}n.config.compare=t}),_t(this,"updateCompare",function(t){n.coverCompare(t),n.updateCustom()}),_t(this,"updateTheme",function(t){var e=n.config.theme!==t;n.config.theme=t;var o="light"===t?tt:et;n.cover({target:n.defaultStorage,sources:o,sourcesKey:!0,force:e}),n.cover({target:n.storage,sources:o,sourcesKey:!0,force:e}),n.saveStorage()}),_t(this,"updateLanguage",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase();n.config.language=["zh_cn","en_us","zh_hk"].includes(t)?t:"en_us"}),_t(this,"updateCustom",function(){var t=n.config,e=t.compare,o=void 0===e?{}:e,r=t.mainIndics,i=t.periods,a=o.index,c=n.storage,u=c.mainIndic,s=c.custom,l=c.period,f=r.indexOf("Index"),p=u.indexOf("Index");a?(r.includes("Index")||r.splice(r.length-1,0,"Index"),s.showIdxIndic&&-1===p&&u.length<2&&u.push("Index"),u.includes("Index")||(s.showIdxIndic=!1)):(f>-1&&r.splice(f,1),p>-1&&(u.splice(p,1),s.showIdxIndic=!0)),gt.isMobile&&(n.storage.klineType="Original",n.storage.showLineTool=!1),i.includes(l)||(n.storage.period="15m")}),_t(this,"init",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kId||"okline";n.oId="".concat(e,"-original-settings-v2"),n.tId="".concat(e,"-tradingview-settings-v2"),n.config=n.copy(yt),n.updateConfig(t),n.defaultStorage=n.copy($),n.storage=n.copy(n.defaultStorage),n.configStorage=n.copy(Z),n.cover({target:n.configStorage,sources:n.config}),n.cover({target:n.storage,sources:n.configStorage,sourcesKey:!0});var o=localStorage.getItem(n.oId);o&&n.cover({target:n.storage,sources:JSON.parse(o),sourcesKey:!0});var r=n.config,i=r.theme,a=r.language,c=r.compare;n.updateTheme(i),n.updateLanguage(a),n.updateCustom(c)}),this.init(e)},Ot={Original:"Original",TradingView:"TradingView"},St=[1,2,3,4],Pt=["rgb(0, 0, 0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)","rgb(255, 120, 116)","rgb(255, 156, 110)","rgb(255, 192, 105)","rgb(255, 245, 102)","rgb(149, 222, 100)","rgb(93, 219, 211)","rgb(105, 192, 255)","rgb(133, 165, 255)","rgb(179, 127, 234)","rgb(255, 133, 192)","rgb(255, 77, 79)","rgb(255, 122, 68)","rgb(255, 169, 64)","rgb(255, 236, 60)","rgb(116, 209, 60)","rgb(54, 207, 201)","rgb(63, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 170)","rgb(245, 33, 45)","rgb(249, 84, 28)","rgb(250, 140, 21)","rgb(250, 219, 21)","rgb(82, 196, 27)","rgb(18, 194, 193)","rgb(25, 144, 255)","rgb(28, 57, 195)","rgb(114, 46, 209)","rgb(235, 46, 149)","rgb(207, 20, 35)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 7)","rgb(55, 158, 15)","rgb(10, 151, 155)","rgb(7, 109, 217)","rgb(23, 50, 177)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(168, 7, 25)","rgb(173, 33, 1)","rgb(173, 78, 1)","rgb(173, 139, 1)","rgb(35, 120, 5)","rgb(0, 109, 116)","rgb(0, 80, 179)","rgb(16, 35, 158)","rgb(57, 16, 133)","rgb(158, 17, 104)"];function kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ct(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var At=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&Ct(t.prototype,e),n&&Ct(t,n)}(t,[{key:"fromFloat",value:function(t,e){return t.toFixed(e)}},{key:"formatTime",value:function(t){return t<10?"0".concat(t.toString()):t.toString()}},{key:"isInstance",value:function(t,e){return null!==t&&void 0!==t&&t instanceof e}},{key:"getMousePosition",value:function(t){var e=t.target.getBoundingClientRect();if(gt.isMobile){var n=t.touches,o=void 0===n?[]:n;if(0===o.length)return;var r=kt(o,2),i=r[0],a=r[1];return 2===o.length?{x:(i.clientX+a.clientX)/2-e.left,y:(i.clientY+a.clientY)/2-e.top}:{x:i.clientX-e.left,y:i.clientY-e.top}}return{x:t.clientX-e.left,y:t.clientY-e.top}}},{key:"getPositionDistance",value:function(t,e,n,o){var r=Math.pow(Math.abs(t-n),2),i=Math.pow(Math.abs(e-o),2);return Math.sqrt(r+i)}},{key:"formatShort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t,o="";return Number(t)>=1e6?(n=Math.round(t/1e5)/10,o="M"):Number(t)>=1e3&&(n=Math.round(t/100)/10,o="K"),Number(n).toFixed(e)+o}},{key:"formatShortAmount",value:function(t,e,n){return e?t===U.VOLUME?this.formatShort(e,2):this.fromFloat(e,n):""}},{key:"getTimes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Date(t),o=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),a=n.getHours(),c=n.getMinutes();return e&&c<10&&(c="0".concat(c)),{year:o,month:r,date:i,hour:a,minute:c}}},{key:"average",value:function(t){if(!t.length)return 0;var e=t[0].toString().split(".")[1].length;return(t.reduce(function(t,e){return Number(t)+Number(e)})/t.length).toFixed(e)}}]),t}());function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,"getOrderRecord",function(t){var n=t.mode,o=t.after;Q.getOrderRecordAction().resetRecordPoint();var r=Q.getStorage().period;["line","1M","3M","6M","1Y"].includes(r)||Q.getConfig().enableKlineOrder&&localStorage.getItem("token")&&Promise.all([e.getHistoryOrderRecord({after:o}),e.getLastBarRecord()]).then(function(t){var o=jt(t,2),r=o[0],i=o[1];n===B.REFRESH&&r.push(i),Q.getDataSource().setTradeRecordData({mode:n,data:r}),e.setUpdated(!0)})}),Et(this,"setOrderFilled",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uTime,n=t.side,o=t.fillPx,r=Q.getDataSource().getTradeRecordData(),i=(Q.getConfig().openTimeZone,Q.getStorage().period),a=1e3*S.getSecondPeriod(i),c=Number(e)-Number(e)%a;c=c,r.forEach(function(t){if(t.time===c){var e="buy"===n?"buy":"sell";t[e]?t[e].count=+t[e].count+1:t[e]={count:1,side:e,price:o}}})}),Et(this,"getHistoryOrderRecord",function(t){var e=t.after;return new Promise(function(t){var n=Q.getConfig(),o=n.openTimeZone,r=n.symbol,i=Q.getStorage().period,a=2*Q.getTimeline().getMaxItemCount(),c="utc0"===o?"utc":"bj",u="/priapi/v5/trade/queryOrderKLine?instId=".concat(r,"&bar=").concat(i,"&typeTime=").concat(c,"&limit=").concat(a,"&after=").concat(e||(new Date).getTime());h.ajax({url:u}).then(function(e){t(e.data)}).catch(function(){t([])})})}),Et(this,"getLastBarRecord",function(){return new Promise(function(t){var e=Q.getDataSource().getLastData(),n=Q.getStorage().period,o=Q.getConfig(),r=o.symbol,i=o.instType,a=Number(e.time),c=a+1e3*S.getSecondPeriod(n),u={instType:i,instId:r,ordType:"limit,market",_start:a,_end:c};if("FUTURES"===i){var s=O.getInstIdInfo(r).uly;u.uly=s,delete u.instId}var l="/priapi/v5/trade/orders-history-archive-modify?instType=".concat(u.instType).concat(u.uly?"&uly=".concat(u.uly):"").concat(u.instId?"&instId=".concat(u.instId):"","&ordType=").concat(u.ordType,"&_start=").concat(u._start,"&_end=").concat(u._end);h.ajax({url:l}).then(function(e){var n=e.data.filter(function(t){return"buy"===t.side}),o=e.data.filter(function(t){return"sell"===t.side}),r=n.map(function(t){return t.avgPx}),i=o.map(function(t){return t.avgPx}),c=[a,At.average(r),n.length,At.average(i),o.length];t(c)}).catch(function(){t([a,0,0,0,0])})})}),this._updated=!1}return function(t,e,n){e&&xt(t.prototype,e),n&&xt(t,n)}(t,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}}]),t}();function Mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var It=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Dt(this,"setLastData",function(t){var n=e.getLastData();if(t&&n&&Number(t.close)!==n.close){var o=Number(t.close),r=n.high,i=n.low;n.close=o,n.high=Math.max(r,o),n.low=Math.min(i,o),e._rightUpdateSize=1,e.setDataMode(B.RIGHT_UPDATE)}}),this.init()}return function(t,e,n){e&&Rt(t.prototype,e),n&&Rt(t,n)}(t,[{key:"init",value:function(){this._data=[],this._orderRecordData=[],this._indexPrice=[],this._decimalDigits=0,this._leftUpdateSize=0,this._rightUpdateSize=0,this._pushSize=0,this._dataMode=B.NOTHING,this._selectedIndex=0}},{key:"resetData",value:function(){this.init(),this.setDataMode(B.REFRESH)}},{key:"getData",value:function(){return this._data}},{key:"getDataAt",value:function(t){return this._data[t]}},{key:"getTradeRecordDataAt",value:function(t){return this._orderRecordData[t]}},{key:"setTradeRecordData",value:function(t){var e=t.data,n=t.mode,o=e.map(function(t){return{time:Number(t[0]),buy:0===Number(t[2])?null:{count:t[2],side:"buy",price:t[1]},sell:0===Number(t[4])?null:{count:t[4],side:"sell",price:t[3]}}});n===B.LEFT_UPDATE&&(o=o.concat(this.getTradeRecordData()));var r=this.getData().map(function(t){var e=o.find(function(e){return e.time===t.time});return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Dt(t,e,n[e])})}return t}({},t,e)});this._orderRecordData=r}},{key:"getTradeRecordData",value:function(){return this._orderRecordData}},{key:"getTimeAt",value:function(t){var e=this.getLastIndex();if(t<0||e<0)return(new Date).getTime();var n=this.getLastData().time;return e<1?n:t<=e?this.getDataAt(t).time:n+(t-e)*(this.getDataAt(1).time-this.getDataAt(0).time)}},{key:"getSelectedIndex",value:function(){var t=Q.getTimeline().getSelectedIndex();return t>-1?Math.min(t,this.getLastIndex()):this.getLastIndex()}},{key:"getSelectedData",value:function(){return this.getDataAt(this.getSelectedIndex())}},{key:"getLastData",value:function(){return this.getDataAt(this.getLastIndex())}},{key:"getLastIndex",value:function(){return this._data.length-1}},{key:"getDataSize",value:function(){return this._data.length}},{key:"getDataRecordSize",value:function(){return this._orderRecordData.length}},{key:"getLeftUpdateSize",value:function(){return this._leftUpdateSize}},{key:"getRightUpdateSize",value:function(){return this._rightUpdateSize}},{key:"getPushSize",value:function(){return this._pushSize}},{key:"getDataMode",value:function(){return this._dataMode}},{key:"setDataMode",value:function(t){this._dataMode=t}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"convertItem",value:function(t){var e=Mt(t,6),n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5];return{time:new Date(n).getTime(),open:o,high:r,low:i,close:a,volume:c}}},{key:"convertList",value:function(t){return t.map(this.convertItem)}},{key:"refreshData",value:function(t){this._decimalDigits=O.pricePrecision(t),this._data=this.convertList(t),this.setDataMode(B.REFRESH)}},{key:"leftUpdateData",value:function(t){var e=this.convertList(t);this._data=e.concat(this._data),this._leftUpdateSize=e.length,this.setDataMode(B.LEFT_UPDATE)}},{key:"rightUpdateDate",value:function(t){for(var e=this.getLastData(),n=t.length,o=0;o<n;o++){var r=t[o],i=new Date(r[0]).getTime();if(!(i<e.time))if(this._rightUpdateSize++,i!==e.time)i>e.time&&(this._pushSize++,this._data.push(this.convertItem(r)));else{var a=this.getLastIndex();this._data[a]=this.convertItem(r)}}this._rightUpdateSize>0&&this.setDataMode(B.RIGHT_UPDATE)}},{key:"setData",value:function(t){var e=t.data,n=t.mode;if(this._leftUpdateSize=0,this._rightUpdateSize=0,this._pushSize=0,this.getLastData())switch(n){case B.REFRESH:this.refreshData(e);break;case B.LEFT_UPDATE:this.leftUpdateData(e);break;case B.RIGHT_UPDATE:this.rightUpdateDate(e)}else this.refreshData(e)}},{key:"getIndexPriceAt",value:function(t){var e=this.getDataAt(t),n=this._indexPrice.length,o=n-(this.getDataSize()-t),r=this._indexPrice[o];if(r&&e.time===r.time)return r;for(var i=n-1;i>=0;i--){var a=this._indexPrice[i];if(e.time===a.time)return a}return{close:NaN}}},{key:"setIndexPrice",value:function(t){var e=t.data,n=t.mode,o=this._indexPrice.length;if(n!==B.REFRESH&&0!==o)switch(n){case B.LEFT_UPDATE:var r=this.convertList(e);this._indexPrice=r.concat(this._indexPrice);break;case B.RIGHT_UPDATE:for(var i=o-1,a=this._indexPrice[i],c=e.length,u=0;u<c;u++){var s=this.convertItem(e[u]);s.time!==a.time?s.time>a.time&&this._indexPrice.push(s):this._indexPrice[i]=s}}else this._indexPrice=this.convertList(e)}}]),t}();function Lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._names=[],this._comps=[];var n=e.split("."),o=n.length-1;if(o>0){this._comps=n,this._names.push(n[0]);for(var r=1;r<=o;r++)this._names.push("".concat(this._names[r-1],".").concat(n[r]))}else this._comps.push(e),this._names.push(e)}return function(t,e,n){e&&Lt(t.prototype,e),n&&Lt(t,n)}(t,[{key:"getCompAt",value:function(t){return t>=0&&t<this._comps.length?this._comps[t]:""}},{key:"getNameAt",value:function(t){if(t<0){if(this._names.length>0)return this._names[this._names.length+t]}else if(t<this._names.length)return this._names[t];return""}},{key:"getModuleName",value:function(){return this.getNameAt(0)}},{key:"getAreaName",value:function(){return this.getNameAt(1)}},{key:"getName",value:function(){return this.getNameAt(-1)}}]),t}();function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vt(this,Ht(e).call(this,n.name)))._updated=!0,t._minValueIndex=-1,t._maxValueIndex=-1,t._minValue=Number.MAX_VALUE,t._maxValue=-Number.MAX_VALUE,t._outerMinValue=Number.MAX_VALUE,t._outerMaxValue=-Number.MAX_VALUE,t._ratio=0,t._top=0,t._bottom=0,t._paddingTop=20,t._paddingBottom=5,t._minInterval=36,t._selectedValue=-Number.MAX_VALUE,t._gradations=[],t._indicators=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,Nt),function(t,e,n){e&&Bt(t.prototype,e),n&&Bt(t,n)}(e,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"getPaddingTop",value:function(){return this._paddingTop}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"getPaddingBottom",value:function(){return this._paddingBottom}},{key:"getIndicators",value:function(){return this._indicators}},{key:"setIndicator",value:function(t){Array.isArray(t)||(t=[t]),this._indicators=t,this.refreshIndicator()}},{key:"removeIndicator",value:function(){this._indicators=[]}},{key:"refreshIndicator",value:function(){var t=Q.getDataSource();t.getDataSize()<1||this._indicators.forEach(function(e){var n,o=t.getDataSize();for(e.clear(),e.reserve(o),n=0;n<o;n++)e.execute(t,n)})}},{key:"getSelectedValue",value:function(){return this._selectedValue}},{key:"selectAt",value:function(t){var e=Q.getArea("".concat(this.getModuleName(),".").concat(W.LEFT));t<e.getTop()+12||t>=e.getBottom()-4?this._selectedValue=-Number.MAX_VALUE:this._selectedValue=this.toValue(t)}},{key:"unselect",value:function(){this._selectedValue=-Number.MAX_VALUE}},{key:"toValue",value:function(t){return this._outerMaxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return 0===this.getHeight()?(this._bottom+this._top)/2:this._ratio>0?this._top+Math.floor((this._outerMaxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return t==1/0||0==this._ratio?1.5:Math.floor(t*this._ratio+1.5)}}]),e}();function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zt(this,Gt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,Yt),function(t,e,n){e&&Xt(t.prototype,e),n&&Xt(t,n)}(e,[{key:"update",value:function(){this.updateIndicator(),this.updateMaxMin()}},{key:"updateIndicator",value:function(){var t=this,e=Q.getDataSource();e.getDataSize()<1||this._indicators.forEach(function(n){switch(e.getDataMode()){case B.REFRESH:case B.LEFT_UPDATE:t.refreshIndicator();break;case B.RIGHT_UPDATE:var o;n.reserve(e.getPushSize());var r=e.getDataSize();for(o=r-e.getRightUpdateSize();o<r;o++)n.execute(e,o)}})}},{key:"updateMaxMin",value:function(){var t=this.getMaxMin();this._minValueIndex=t.minValueIndex,this._maxValueIndex=t.maxValueIndex;var e=Q.getArea("".concat(this.getModuleName(),".").concat(W.LEFT)),n=this.preSetMinMax({min:t.minValue,max:t.maxValue}),o=this.preSetMinMax({min:t.outerMinValue,max:t.outerMaxValue});(this._minValue!==n.min||this._maxValue!==n.max||this._outerMinValue!==o.min||this._outerMaxValue!==o.max||e.isChanged())&&(this._updated=!0,this._minValue=n.min,this._maxValue=n.max,this._outerMinValue=o.min,this._outerMaxValue=o.max,this._top=e.getTop()+this._paddingTop,this._bottom=e.getBottom()-(this._paddingBottom+1),this._outerMaxValue>this._outerMinValue?this._ratio=(this._bottom-this._top)/(this._outerMaxValue-this._outerMinValue):this._ratio=1,this._gradations=[],this.updateGradations())}},{key:"preSetMinMax",value:function(t){var e=t.min,n=t.max;return e===n?{min:-1,max:1}:{min:e,max:n}}},{key:"getMaxMin",value:function(){for(var t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=-1,i=-1,a=Q.getTimeline(),c=a.getFirstIndex(),u=a.getLastIndex();u>=c;u--){var s=this.getSourceMinMaxAt(u),l=this.getIndicatorMinMaxAt(u);s.min<t&&(r=u,t=s.min),n=Math.min(n,t,l.min),s.max>e&&(i=u,e=s.max),o=Math.max(o,e,l.max)}return{minValueIndex:r,maxValueIndex:i,minValue:t,maxValue:e,outerMinValue:n,outerMaxValue:o}}},{key:"getSourceMinMaxAt",value:function(t){var e=Q.getDataSource().getDataAt(t);if(e){var n=e.low,o=e.high,r=e.volume,i=void 0===r?-Number.MAX_VALUE:r,a=this.getModuleName();if(a===U.VOLUME)return{min:0,max:i};if([V.MAIN,U.BOLL,U.SAR].includes(a))return{min:n,max:o}}return{min:Number.MAX_VALUE,max:-Number.MAX_VALUE}}},{key:"getIndicatorMinMaxAt",value:function(t){var e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Q.getIndicatorAction();return this._indicators.forEach(function(r){for(var i=r.getName(),a=r.getOutputCount(),c=0;c<a;c++){var u=r.getOutputAt(c),s=u.getName();if(o.getIndicatorStorage(i,s).show){var l=u.execute(t);Number.isNaN(l)||(e=Math.min(e,l),n=Math.max(n,l))}}}),{min:e,max:n}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();if(t<=0)return 0;t<=e&&(e=t>>1);for(var n,o,r=this.getOuterRange(),i=0,a=Q.getDataSource().getDecimalDigits();i>-a&&Math.floor(r)<r;)r*=10,i--;for(;(n=o=Math.pow(10,i),!(this.toHeight(n)>e))&&(n=2*o,!(this.toHeight(n)>e))&&(n=5*o,!(this.toHeight(n)>e));i++);return n}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0))for(var e=Math.floor(this.getOuterMaxValue()/t)*t;e>this.getOuterMinValue();)this._gradations.push(e),e-=t}}]),e}();function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zt(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zt(this,$t(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(e,Kt),function(t,e,n){e&&qt(t.prototype,e),n&&qt(t,n)}(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=Q.getArea("".concat(this.getModuleName(),".").concat(W.LEFT)),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getOuterMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;do{20!==n&&80!==n||this._gradations.push(n),n+=10}while(n<this.getOuterMaxValue())}else do{e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),n+=10}while(n<this.getOuterMaxValue())}}}]),e}();function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function re(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ce=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),re(this,ie(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,Kt),function(t,e,n){e&&oe(t.prototype,e),n&&oe(t,n)}(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,o=this.getOuterRange();for(n=3;!(this.toHeight(o/n)<=e);n+=2);return o/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=Q.getArea("".concat(this.getModuleName(),".").concat(W.LEFT)),e=this.calcInterval(t);if(!(e<=0)){var n=e/2;do{this._gradations.push(n),this._gradations.push(-n),n+=e}while(n<=this.getOuterMaxValue())}}},{key:"preSetMinMax",value:function(t){var e=t.min,n=t.max,o=Math.max(Math.abs(e),Math.abs(n));return{min:-o,max:o}}}]),e}();function ue(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var se=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reverseColor=e.reverseColor,this._name=""}return function(t,e,n){e&&ue(t.prototype,e),n&&ue(t,n)}(t,[{key:"getName",value:function(){return this._name}},{key:"setCustomTheme",value:function(t){var e=this;Object.keys(t).forEach(function(n){e[n]=t[n]})}}]),t}();function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye={"line-muted-opacity-50":"rgba(34, 41, 56, 0.5)","line-muted":"#222938","line-secondary":"#31394A","text-light":"#727B8F","text-secondary":"#9BA3B5","text-amplifed":"#DDE1EB","grey-700":"#9BA3B5","grey-700-opacity-60":"rgba(155, 163, 181, 0.6)","grey-200":"#31394A","grey-400":"#727B8F","green-900":"#33B06A","green-900-opacity-30":"rgba(51, 176, 106, 0.6)","red-900":"#BF4747","red-900-opacity-30":"rgba(191, 71, 71, 0.6)"},de=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fe(this,pe(e).call(this,t)))._name="dark",n._reverseColor?(n.Positive=ye["red-900"],n.Negative=ye["green-900"],n.PositiveOpacity30=ye["red-900-opacity-30"],n.NegativeOpacity30=ye["green-900-opacity-30"],n.PositiveDark="#204342",n.NegativeDark="#482E3D",n.TextPositive="#D75558",n.TextNegative="#41A064",n.PositivePriceBg="rgba(107, 44, 50, 0.9)",n.NegativePriceBg="rgba(31, 91, 66, 0.9)",n.PositivePoint="#E35E5E",n.PositivePointBorder="#9C2C2C",n.NegativePoint="#2EAD65",n.NegativePointBorder="#1D8148"):(n.Positive=ye["green-900"],n.Negative=ye["red-900"],n.PositiveOpacity30=ye["green-900-opacity-30"],n.NegativeOpacity30=ye["red-900-opacity-30"],n.PositiveDark="#482E3D",n.NegativeDark="#204342",n.TextPositive="#41A064",n.TextNegative="#D75558",n.PositivePriceBg="rgba(31, 91, 66, 0.9)",n.NegativePriceBg="rgba(107, 44, 50, 0.9)",n.PositivePoint="#2EAD65",n.PositivePointBorder="#1D8148",n.NegativePoint="#E35E5E",n.NegativePointBorder="#9C2C2C"),n.Unchanged="#FFFFFF",n.Background="#121D32",n.MainInfoBg="#25334B",n.MainInfoAlpha=.65,n.CursorColor=ye["grey-700"],n.Indicator0="#FFFFFF",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#3F4859",n.Grid1=ye["line-secondary"],n.Grid2="#FFFFFF",n.Grid3="#25334B",n.Grid4=ye["line-muted-opacity-50"],n.Grid5=ye["grey-700-opacity-60"],n.Grid6=ye["grey-200"],n.Text0="#BEC1C7",n.Text1="#FFFFFF",n.Text2="#4D5565",n.Text3="#FFFFFF",n.Text4=ye["grey-400"],n.Text5=ye["text-light"],n.Text6=ye["text-secondary"],n.Text7=ye["text-light"],n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#121D32",n.CircleColorStroke="#005DFF",n.DefaultFont="12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,se),e}();function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e={"line-muted-opacity-50":"rgba(240, 243, 247, 0.5)","line-muted":"#F0F3F7","line-secondary":"#D8DCE6","text-light":"#959DAD","text-secondary":"#3F475A","text-amplifed":"#1F2933","grey-700":"#3F475A","grey-700-opacity-60":"rgba(63, 71, 90, 0.6)","grey-500":"#60687B","grey-400":"#7B8293","green-700":"#2EAD65","green-900":"#1D8148","green-700-opacity-30":"rgba(46, 173 ,101, 0.6)","red-700":"#E35E5E","red-900":"#9C2C2C","red-700-opacity-30":"rgba(227, 94, 94, 0.6)"},we={light:function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ge(this,ve(e).call(this,t)))._name="light",n._reverseColor?(n.Positive=_e["red-700"],n.Negative=_e["green-700"],n.PositiveOpacity30=_e["red-700-opacity-30"],n.NegativeOpacity30=_e["green-700-opacity-30"],n.PositiveDark="#D2EDDC",n.NegativeDark="#FBD8D7",n.TextPositive="#EE6560",n.TextNegative="#4DB872",n.PositivePriceBg="rgba(255, 169, 169, 0.9)",n.NegativePriceBg="rgba(125, 216, 165, 0.9);",n.PositivePoint=_e["red-700"],n.PositivePointBorder=_e["red-900"],n.NegativePoint=_e["green-700"],n.NegativePointBorder=_e["green-900"]):(n.Positive=_e["green-700"],n.Negative=_e["red-700"],n.PositiveOpacity30=_e["green-700-opacity-30"],n.NegativeOpacity30=_e["red-700-opacity-30"],n.PositiveDark="#FBD8D7",n.NegativeDark="#D2EDDC",n.TextPositive="#4DB872",n.TextNegative="#EE6560",n.PositivePriceBg="rgba(125, 216, 165, 0.9);",n.NegativePriceBg="rgba(255, 169, 169, 0.9)",n.PositivePoint=_e["green-700"],n.PositivePointBorder=_e["green-900"],n.NegativePoint=_e["red-700"],n.NegativePointBorder=_e["red-900"]),n.Unchanged="#FFFFFF",n.Background="#FFFFFF",n.MainInfoBg="#25334B",n.MainInfoAlpha=.85,n.CursorColor="#898989",n.Indicator0="#E64C7D",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#000000",n.Grid1=_e["line-secondary"],n.Grid2="#25334B",n.Grid3="#25334B",n.Grid4=_e["line-muted-opacity-50"],n.Grid5=_e["grey-700-opacity-60"],n.Grid6=_e["grey-500"],n.Text0="#FFFFFF",n.Text1="#FFFFFF",n.Text2="#888888",n.Text3="#FFFFFF",n.Text4=_e["grey-400"],n.Text5=_e["text-light"],n.Text6=_e["text-secondary"],n.Text7=_e["text-secondary"],n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#FFFFFF",n.CircleColorStroke="#005DFF",n.DefaultFont="12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(e,se),e}(),dark:de};function Oe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new we[t](e),o=(e.customTheme||{})[t]||{};return n.setCustomTheme(o),n}function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ke(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var je=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ke(this,Ce(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(e,Nt),function(t,e,n){e&&Pe(t.prototype,e),n&&Pe(t,n)}(e,null,[{key:"drawLine",value:function(t,e,n,o,r){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(o<<0),.5+(r<<0)),t.stroke()}},{key:"drawLines",value:function(t,n){var o,r=n.length;for(t.beginPath(),t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);if(e.isChrome)for(t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,o,r,i,a){i<2&&(i=2);var c=o-e,u=r-n;t.beginPath();for(var s=Math.sqrt(c*c+u*u)/i+.5<<0,l=(c/=s)*a/i,f=(u/=s)*a/i,p=0;p<s;p++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+l,n+.5+f),e+=c,n+=u;t.stroke()}},{key:"createHorzDashedLine",value:function(t,e,n,o,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;r<2&&(r=2);for(var c=(n-e)/r+.5<<0,u=0;u<c;u++)t.rect(e,o,i,a),e+=r}},{key:"createHorzLine",value:function(t,e,n,o,r){t.beginPath(),t.moveTo(e,o),t.lineTo(n,o),t.strokeStyle=r,t.stroke(),t.closePath()}},{key:"createRectangles",value:function(t,e){var n,o;t.beginPath();var r=e.length;for(o=0;o<r;o++)n=e[o],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){var n;t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var o=e.length;for(n=1;n<o;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var o=t.measureText(e).width;return!(n.w<o)&&(t.fillText(e,n.x,n.y),n.x+=o,n.w-=o,!0)}}]),e}();function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Te(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(je,"isChrome",null!==navigator.userAgent.toLowerCase().match(/chrome/));var De=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Te(this,Me(e).call(this,t)))._color="Background",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(e,je),function(t,e,n){e&&Ee(t.prototype,e),n&&Ee(t,n)}(e,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Q.getTheme();t.fillStyle=n[this._color],t.fillRect(e.getLeft(),e.getTop(),e.getWidth(),e.getHeight())}}]),e}();function Ie(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Le=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.drawLineTool=e.drawLineTool;var n=Q.getMainLeftArea();null!==n?(this.areaPos={left:n.getLeft(),top:n.getTop(),right:n.getRight(),bottom:n.getBottom()},this.crossPt={},this.normalSize=4,this.selectedSize=6,this.cursorLen=4,this.cursorGapLen=3,this.theme=Q.getTheme()):this.areaPos={left:0,top:0,right:0,bottom:0}}return function(t,e,n){e&&Ie(t.prototype,e),n&&Ie(t,n)}(t,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.LineColorNormal,t.fillStyle=this.theme.LineColorNormal;var e=this.drawLineTool.getPoint(0).getPosXY();if(null!==e){var n=e.x,o=e.y,r=this.cursorLen,i=this.cursorGapLen;t.fillRect(n,o,1,1),je.drawLine(t,n-r-i,o,n-i,o),je.drawLine(t,n+r+i,o,n+i,o),je.drawLine(t,n,o-r-i,n,o-i),je.drawLine(t,n,o+r+i,n,o+i)}}},{key:"drawCircle",value:function(t,e,n){var o=e.x,r=e.y;t.beginPath(),t.arc(o,r,n,0,2*Math.PI,!1),t.fillStyle=this.theme.CircleColorFill,t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.drawLineTool.getPoint(e).getState()===L.HIGHLIGHT&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var o=0;o<this.fiboFansSequence.length;o++){var r=e.y+(100-this.fiboFansSequence[o])/100*(n.y-e.y),i={x:e.x,y:e.y},a={x:n.x,y:r};this.drawRayLines(t,i,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var o,r={x:e.x,y:e.y},i={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,r,i);o=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},je.drawLine(t,e.x,e.y,o.x,o.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.drawLineTool.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=Q.getMainLeftArea();this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.LineColorSelected,this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}},{key:"getRectCrossPt",value:function(t,e,n){var o={x:-1,y:-1},r={x:-1,y:-1},i=n.x-e.x,a=n.y-e.y;if(Math.abs(i)<2)return[o={x:e.x,y:t.top},r={x:n.x,y:t.bottom}];var c=a/i;return r.x=t.right,r.y=e.y+(t.right-e.x)*c,o.x=t.left,o.y=e.y+(t.left-e.x)*c,[o,r]}}]),t}();function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Be(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Be(this,Ve(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(e,Le),function(t,e,n){e&&Fe(t.prototype,e),n&&Fe(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){var o,r=Q.getDataSource().getDecimalDigits(),i=Q.getTheme();t.font=i.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.drawLineTool.state!==N.DRAWING&&void 0!==this.startPtValue||(this.startPtValue=this.drawLineTool.getPoint(0).getPosTV().v,this.endPtValue=this.drawLineTool.getPoint(1).getPosTV().v),this.getAreaPos();for(var a=0;a<this.fiboSequence.length;a++){var c=e.y+(100-this.fiboSequence[a])/100*(n.y-e.y);if(!(c>this.areaPos.bottom)){var u=this.startPtValue+(100-this.fiboSequence[a])/100*(this.endPtValue-this.startPtValue);o="".concat(this.fiboSequence[a].toFixed(1),"% ").concat(u.toFixed(r));var s=t.measureText(o).width;t.textBaseline="middle",t.fillText(o,this.areaPos.left,c),je.drawLine(t,this.areaPos.left+s+2,c,this.areaPos.right,c)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xe(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(t,e){return(Ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qe=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xe(this,ze(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ge(t,e)}(e,Nt),function(t,e,n){e&&We(t.prototype,e),n&&We(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Math.floor(e.getLeft()),o=Math.floor(e.getTop()),r=Math.floor(e.getRight()),i=Math.floor(e.getBottom());t.save(),t.rect(n,o,r-n,i-o),t.clip();for(var a=Q.getLineAction(),c=a.getLineCount(),u=Q.getTheme(),s=0;s<c;s++){var l=a.getLine(s),f=l.getState(),p=l.getPlotter();switch(p.theme=u,f){case N.BEFORE:p.drawCursor(t);break;case N.DRAWING:p.updateDraw(t);break;case N.AFTER:p.finishDraw(t)}}var h=a.getSelected();h&&h!==N.DRAWING&&h.getPlotter().highlight(t),t.restore()}}]),e}();function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qe(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qe(this,Ze(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(e,Nt),function(t,e,n){e&&Je(t.prototype,e),n&&Je(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Q.getTimeline(),o=Q.getModuleProvider(this.getModuleName()),r=!1;if(!e.isChanged()&&!n.isUpdated()&&!o.isUpdated()){var i=n.getFirstIndex(),a=n.getLastIndex(),c=Math.max(i,a-1),u=n.toColumnLeft(c);t.save(),t.rect(u,e.getTop(),e.getRight()-u,e.getHeight()),t.clip(),r=!0}var s=Q.getTheme();o.getGradations().forEach(function(n){je.createHorzLine(t,e.getLeft(),e.getRight(),o.toY(n),s.Grid4)}),t.fill(),r&&t.restore()}}]),e}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function on(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cn=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),on(this,rn(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,Nt),function(t,e,n){e&&nn(t.prototype,e),n&&nn(t,n)}(e,[{key:"Draw",value:function(t){return this.m_pArea=Q.getArea(this.getAreaName()),this.m_pProvider=Q.getModuleProvider(this.getModuleName()),this.m_pTheme=Q.getTheme(),this._Draw_(t)}},{key:"_Draw_",value:function(t){if(this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=Q.getChartAction().getDepthData();this.x_offset=0,this.y_offset=0;var n={},o={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pProvider.toY(e.array[this.m_ask_si].rate),o.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,o.y=this.m_pProvider.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-o.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.Background,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=Q.getChartAction().getDepthData();if(0===this.m_mode){var n=this.m_pProvider.toY(e.array[this.m_ask_si].rate)-this.y_offset,o=this.m_pProvider.toY(e.array[this.m_bid_si].rate)+this.y_offset,r=t.createLinearGradient(this.m_left,0,this.m_right,0);r.addColorStop(0,this.m_pTheme.Background),r.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=r,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.Background),i.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=i,t.fillRect(this.m_left,o,this.m_right-this.m_left,this.m_bottom-o)}else if(1===this.m_mode){var a=t.createLinearGradient(this.m_left,0,this.m_right,0);a.addColorStop(0,this.m_pTheme.Background),a.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=a,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var c=t.createLinearGradient(this.m_left,0,this.m_right,0);c.addColorStop(0,this.m_pTheme.Background),c.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=c,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.Negative,t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.Positive,t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=Q.getChartAction().getDepthData();this.m_ask_points=[];for(var e=this.m_ask_si;e>=this.m_ask_ei;e--){var n={},o={},r=this.m_ask_points.length;n.x=e==this.m_ask_si?this.m_left:this.m_ask_points[r-1].x,n.y=Math.floor(this.m_pProvider.toY(t.array[e].rate)-this.y_offset),o.x=Math.floor(this.m_left+t.array[e].amounts*this.m_Step+this.x_offset),o.y=n.y,this.m_ask_points.push(n),this.m_ask_points.push(o)}var i={},a=this.m_ask_points.length;i.x=this.m_ask_points[a-1].x,i.y=this.m_top,this.m_ask_points.push(i),this.m_bid_points=[];for(var c=this.m_bid_si;c<=this.m_bid_ei;c++){var u={},s={},l=this.m_bid_points.length;u.x=c==this.m_bid_si?this.m_left:this.m_bid_points[l-1].x,u.y=Math.ceil(this.m_pProvider.toY(t.array[c].rate)+this.y_offset),s.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),s.y=u.y,this.m_bid_points.push(u),this.m_bid_points.push(s)}var f={},p=this.m_bid_points.length;f.x=this.m_bid_points[p-1].x,f.y=this.m_bottom,this.m_bid_points.push(f)}},{key:"updateData",value:function(){var t=Q.getChartAction().getDepthData();if(t.array.length<=50)return!1;var e=this.m_pProvider.getOuterMinValue(),n=this.m_pProvider.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var o=t.asks_si;o>=t.asks_ei&&t.array[o].rate<n;o--)this.m_ask_ei=o;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var r=t.bids_si;r<=t.bids_ei&&t.array[r].rate>e;r++)this.m_bid_ei=r;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"DrawGradations",value:function(t){var e=this;if(0!==this.m_pProvider.getHeight()){var n=this.m_pProvider.getGradations();if(0!==n.length){var o=this.m_pArea.getLeft(),r=this.m_pArea.getRight(),i=[];n.forEach(function(t){var n=e.m_pProvider.toY(t);i.push({x:o,y:n,w:6,h:1}),i.push({x:r-6,y:n,w:6,h:1})}),i.length>0&&(t.fillStyle=this.m_pTheme.Grid1,je.createRectangles(t,i),t.fill())}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,o={},r={};o.x=this.m_right,o.y=e[0].y,r.x=this.m_right,r.y=e[e.length-1].y;var i={},a={};i.x=this.m_right,i.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(o),e.push(r),n.unshift(i),n.push(a),t.fillStyle=this.m_pTheme.Background,t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var c=1;c<e.length;c++)t.lineTo(Math.floor(e[c].x)+.5,Math.floor(e[c].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}}]),e}();function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ln(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ln(this,fn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(e,je),function(t,e,n){e&&sn(t.prototype,e),n&&sn(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getDataSource();if(!(e.getDataSize()<1)){var n,o=Q.getArea(this.getAreaName()),r=Q.getTimeline(),i=Q.getModuleProvider(this.getModuleName()),a=Q.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth(),f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=n;b<=u;b++){var g=e.getDataAt(b),v=i.toY(g.high),m=i.toY(g.low),_=g.open;b>0&&(_=e.getDataAt(b-1).close);var w=g.close;if(w>_){var O=i.toY(w),S=i.toY(_),P=Math.max(S-O,1);h.push({x:f,y:O,w:Math.max(l,1),h:Math.max(P,1)}),g.high>w&&(v=Math.min(v,O-1),h.push({x:p,y:v,w:1,h:O-v})),_>g.low&&(m=Math.max(m,S+1),h.push({x:p,y:S,w:1,h:m-S}))}else if(w===_){var k=i.toY(w);y.push({x:f,y:k,w:Math.max(l,1),h:1}),g.high>w&&(v=Math.min(v,k-1)),_>g.low&&(m=Math.max(m,k+1)),v<m&&y.push({x:p,y:v,w:1,h:m-v})}else{var C=i.toY(_),A=i.toY(w),j=Math.max(A-C,1);d.push({x:f,y:C,w:Math.max(l,1),h:Math.max(j,1)}),g.high>_&&(v=Math.min(v,C-1)),w>g.low&&(m=Math.max(m,A+1)),v<m&&d.push({x:p,y:v,w:1,h:m-v})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,je.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,y),t.fill()),d.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,d),t.fill())}}}]),e}();function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bn(this,gn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,je),function(t,e,n){e&&dn(t.prototype,e),n&&dn(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getDataSource();if(!(e.getDataSize()<1)){var n,o=Q.getArea(this.getAreaName()),r=Q.getTimeline(),i=Q.getModuleProvider(this.getModuleName()),a=Q.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth(),f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=[],g=n;g<=u;g++){var v=e.getDataAt(g),m=i.toY(v.high),_=i.toY(v.low),w=v.open,O=v.close;if(O>w){var S=i.toY(O),P=i.toY(w),k=Math.max(P-S,1);h.push({x:f,y:S,w:Math.max(l,1),h:Math.max(k,1)}),v.high>O&&(m=Math.min(m,S-1),y.push({x:p,y:m,w:1,h:S-m})),w>v.low&&(_=Math.max(_,P+1),y.push({x:p,y:P,w:1,h:_-P}))}else if(O===w){var C=i.toY(O);d.push({x:f,y:C,w:Math.max(l,1),h:1}),v.high>O&&(m=Math.min(m,C-1)),w>v.low&&(_=Math.max(_,C+1)),m<_&&d.push({x:p,y:m,w:1,h:_-m})}else{var A=i.toY(w),j=i.toY(O),x=Math.max(j-A,1);b.push({x:f,y:A,w:Math.max(l,1),h:Math.max(x,1)}),v.high>w&&(m=Math.min(m,A-1)),O>v.low&&(_=Math.max(_,j+1)),m<_&&b.push({x:p,y:m,w:1,h:_-m})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,je.createRectangles(t,h),t.fill()),y.length>0&&(t.strokeStyle=a.Positive,t.beginPath(),y.forEach(function(e){var n=e.x,o=e.y,r=e.h;t.moveTo(n+.5,o),t.lineTo(n+.5,o+r)}),t.stroke(),t.closePath()),d.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,d),t.fill()),b.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,b),t.fill())}}}]),e}();function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function On(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),On(this,Sn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(e,je),function(t,e,n){e&&wn(t.prototype,e),n&&wn(t,n)}(e,[{key:"Draw",value:function(){var t=Q.getDataSource();if(!(t.getDataSize()<1||t.getDataRecordSize()<1)){for(var e=Q.getTimeline(),n=Q.getModuleProvider(this.getModuleName()),o=e.getFirstIndex(),r=e.getLastIndex(),i=o,a=e.getColumnWidth(),c=e.toItemCenter(i),u=Q.getOrderRecordAction(),s=0;s<i;s++)this.resetPoint(s,t);for(var l=r;l<t.getDataRecordSize();l++)this.resetPoint(l,t);for(var f=i;f<=r;f++){var p=t.getTradeRecordDataAt(f);if(p){var h=n.toY(p.high),y=n.toY(p.low);p.buy&&u.addRecordPoint({time:p.time,side:"buy",pointX:c-5,pointY:y+2,data:p.buy}),p.sell&&u.addRecordPoint({time:p.time,side:"sell",pointX:c-5,pointY:h-16,data:p.sell}),c+=a}else c+=a}}}},{key:"resetPoint",value:function(t,e){var n=Q.getOrderRecordAction(),o=e.getTradeRecordDataAt(t);o&&(o.buy&&n.addRecordPoint({time:o.time,side:"buy",pointX:-1}),o.sell&&n.addRecordPoint({time:o.time,side:"sell",pointX:-1}))}}]),e}();function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jn(t,e){return!e||"object"!==Cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jn(this,xn(e).call(this,t))).arrowSizeRatio=.03,n.arrowSize=4,n.crossPt={x:-1,y:-1},n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}(e,Le),function(t,e,n){e&&An(t.prototype,e),n&&An(t,n)}(e,[{key:"drawArrow",value:function(t,e,n){var o=this.lenBetweenPts(e,n),r=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/o)*r[0],this.crossPt.y=e.y+(1-this.arrowSize/o)*r[1];var i=[-r[1],r[0]],a={x:i[0],y:i[1]},c={x:0,y:0};i[0]=this.arrowSize*a.x/this.lenBetweenPts(a,c),i[1]=this.arrowSize*a.y/this.lenBetweenPts(a,c);var u=[this.crossPt.x+i[0],this.crossPt.y+i[1]];je.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-i[0],this.crossPt.y-i[1]],je.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),je.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),e}();function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Dn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dn(this,In(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(e,Le),function(t,e,n){e&&Rn(t.prototype,e),n&&Rn(t,n)}(e,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),e}();function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vn(t,e){return!e||"object"!==Fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vn(this,Hn(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,Nn),function(t,e,n){e&&Bn(t.prototype,e),n&&Bn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),je.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),je.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),e}();function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zn(this,Gn(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,Nn),function(t,e,n){e&&Xn(t.prototype,e),n&&Xn(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),e}();function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zn(t,e){return!e||"object"!==Jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var eo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zn(this,$n(e).call(this,t))).fiboFansSequence=[0,38.2,50,61.8],n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&to(t,e)}(e,Le),function(t,e,n){e&&qn(t.prototype,e),n&&qn(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ao=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oo(this,ro(e).call(this,t))).fiboSequence=I,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,Ue),e}();function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function so(t,e){return!e||"object"!==co(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lo(t){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var po=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=so(this,lo(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,Le),function(t,e,n){e&&uo(t.prototype,e),n&&uo(t,n)}(e,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)je.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),e}();function ho(t){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bo(t,e){return!e||"object"!==ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bo(this,go(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(e,Le),function(t,e,n){e&&yo(t.prototype,e),n&&yo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?je.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):je.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),e}();function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Oo(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ko=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Oo(this,So(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Po(t,e)}(e,Le),function(t,e,n){e&&wo(t.prototype,e),n&&wo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],je.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),e}();function Co(t){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ao(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jo(t,e){return!e||"object"!==Co(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xo(t){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var To=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jo(this,xo(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eo(t,e)}(e,Le),function(t,e,n){e&&Ao(t.prototype,e),n&&Ao(t,n)}(e,[{key:"draw",value:function(t){var e=Q.getDataSource().getDecimalDigits();t.font=this.theme.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var n=this.ctrlPts[0][0].getPosTV().v;je.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(n.toFixed(e),this.startPoint.x+2,this.startPoint.y-15)}}]),e}();function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Do(t,e){return!e||"object"!==Mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Io(t){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lo(t,e){return(Lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var No=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Do(this,Io(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lo(t,e)}(e,Le),function(t,e,n){e&&Ro(t.prototype,e),n&&Ro(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),e}();function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vo(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ho(t){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uo(t,e){return(Uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vo(this,Ho(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uo(t,e)}(e,Le),function(t,e,n){e&&Bo(t.prototype,e),n&&Bo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),je.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),e}();function Wo(t){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zo(t,e){return!e||"object"!==Wo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Go(t){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ko=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zo(this,Go(e).call(this,t))).ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(e,Le),function(t,e,n){e&&Xo(t.prototype,e),n&&Xo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?je.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),je.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),e}();function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zo(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $o(t){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var er=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zo(this,$o(e).call(this,t))).ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(e,Nn),function(t,e,n){e&&qo(t.prototype,e),n&&qo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),je.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),je.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),je.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),e}();function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rr(t,e){return!e||"object"!==nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rr(this,ir(e).call(this,t))).ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(e,Le),function(t,e,n){e&&or(t.prototype,e),n&&or(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],je.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),e}();function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lr(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fr(t){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pr(t,e){return(pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lr(this,fr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pr(t,e)}(e,je),function(t,e,n){e&&sr(t.prototype,e),n&&sr(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getIndicatorAction(),n=Q.getFrame(),o=Q.getArea(this.getAreaName()),r=Q.getModuleProvider(this.getModuleName()),i=Q.getDataSource().getSelectedIndex(),a=Q.getTheme();t.font=a.DefaultFont,t.textAlign="left",t.textBaseline="top",t.fillStyle=a.Text4;var c={x:o.getLeft()+8,y:o.getTop()+8,w:n.getWidth()-8,h:20};r.getIndicators().forEach(function(n){var o;switch(n.getParameterCount()){case 0:o=n.getName();break;case 1:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),")");break;case 2:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),")");break;case 3:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),",").concat(n.getParameterAt(2).getValue(),")");break;case 4:o="".concat(n.getName(),"(").concat(n.getParameterAt(0).getValue(),",").concat(n.getParameterAt(1).getValue(),",").concat(n.getParameterAt(2).getValue(),",").concat(n.getParameterAt(3).getValue(),")");break;default:return}if(je.drawString(t,o,c)){var r,u,s,l,f=n.getOutputCount(),p=n.getName();for(l=0;l<f;l++){u=(r=n.getOutputAt(l)).execute(i);var h=r.getName(),y=e.getIndicatorStorage(p,h),d=y.show,b=y.color;if(d&&!isNaN(u)&&(s="  ".concat(r.getRangeName(),": ").concat(u.toFixed(O.safeDigits(u))),t.fillStyle=r.getColor()||b||a["Indicator".concat(l)],!je.drawString(t,s,c)))return}}})}}]),e}();function yr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var dr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rid=0}return function(t,e,n){e&&yr(t.prototype,e),n&&yr(t,n)}(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}();function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vr(t,e){return!e||"object"!==br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return(_r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vr(this,mr(e).call(this)))._exprA=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_r(t,e)}(e,dr),function(t,e,n){e&&gr(t.prototype,e),n&&gr(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),e}();function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pr(t,e){return!e||"object"!==Or(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cr(t,e){return(Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ar=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pr(this,kr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cr(t,e)}(e,wr),function(t,e,n){e&&Sr(t.prototype,e),n&&Sr(t,n)}(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}();function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Er(t,e){return!e||"object"!==jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rr=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Er(this,Tr(e).call(this)))._exprA=t,o._exprB=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,dr),function(t,e,n){e&&xr(t.prototype,e),n&&xr(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),e}();function Dr(t){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ir(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lr(t,e){return!e||"object"!==Dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nr(t){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Br=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,Nr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(e,Rr),function(t,e,n){e&&Ir(t.prototype,e),n&&Ir(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),e}();function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ur(t,e){return!e||"object"!==Vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ur(this,Yr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(e,Rr),function(t,e,n){e&&Hr(t.prototype,e),n&&Hr(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),e}();function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qr(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kr(t,e,n){return(Kr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jr(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zr=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Qr(this,Jr(e).call(this,n)))._name=t,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(e,wr),function(t,e,n){e&&Gr(t.prototype,e),n&&Gr(t,n)}(e,[{key:"getName",value:function(){return this._name}},{key:"getRangeName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){this._buf[t]=this._exprA.execute(t)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push(NaN);Kr(Jr(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Kr(Jr(e.prototype),"clear",this).call(this),this._buf=[]}}]),e}();function $r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ei=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ti(this,"_ds",null),ti(this,"_firstIndex",null)}return function(t,e,n){e&&$r(t.prototype,e),n&&$r(t,n)}(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();function ni(t){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ri(t,e){return!e||"object"!==ni(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ai(t,e){return(ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ti(ei,"inst",null);var ci=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ri(this,ii(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ai(t,e)}(e,dr),function(t,e,n){e&&oi(t.prototype,e),n&&oi(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getDataAt(t).close}}]),e}();function ui(t){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function li(t,e){return!e||"object"!==ui(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=li(this,fi(e).call(this)))._value=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,dr),function(t,e,n){e&&si(t.prototype,e),n&&si(t,n)}(e,[{key:"execute",value:function(){return this._value}}]),e}();function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bi(t,e){return!e||"object"!==yi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gi(t,e,n){return(gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vi(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function vi(t){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _i=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=bi(this,vi(e).call(this,t,n)))._range=-1,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mi(t,e)}(e,Rr),function(t,e,n){e&&di(t.prototype,e),n&&di(t,n)}(e,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({resultA:NaN,result:NaN});gi(vi(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){gi(vi(e.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),e}();function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Si(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pi(t){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ci=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Si(this,Pi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(e,_i),function(t,e,n){e&&Oi(t.prototype,e),n&&Oi(t,n)}(e,[{key:"calcResult",value:function(t){if(0===this._range)return NaN;var e=ei.get()._firstIndex;if(e<0)return 0;if(t>=e){var n=this._range-1;n>t-e&&(n=t-e);for(var o=0;n>=0;n--)0!==this._buf[t-n].resultA&&o++;return o}return 0}}]),e}();function Ai(t){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xi(t,e){return!e||"object"!==Ai(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ei(t){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ti(t,e){return(Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xi(this,Ei(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ti(t,e)}(e,Rr),function(t,e,n){e&&ji(t.prototype,e),n&&ji(t,n)}(e,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?e>0?1e6:-1e6:e/n}}]),e}();function Ri(t){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Di(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ii(t,e){return!e||"object"!==Ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Li(t,e,n){return(Li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ni(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fi(t,e){return(Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ii(this,Ni(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fi(t,e)}(e,_i),function(t,e,n){e&&Di(t.prototype,e),n&&Di(t,n)}(e,[{key:"initRange",value:function(){Li(Ni(e.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._buf[t-1];return this._alpha*(e-o.result)+o.result}return e}}]),e}();function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ui(t,e){return!e||"object"!==Vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yi(t){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ui(this,Yi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(e,Rr),function(t,e,n){e&&Hi(t.prototype,e),n&&Hi(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),e}();function zi(t){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qi(t,e){return!e||"object"!==zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qi(this,Ki(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ji(t,e)}(e,Bi),function(t,e,n){e&&Gi(t.prototype,e),n&&Gi(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range,r=this._buf[t-1];return o>=t+1-n?(o=t+1-n,r.result*(1-1/o)+e/o):this._alpha*(e-r.result)+r.result}return e}}]),e}();function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ta(t,e){return!e||"object"!==Zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ea(t){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function na(t,e){return(na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ta(this,ea(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&na(t,e)}(e,Rr),function(t,e,n){e&&$i(t.prototype,e),n&&$i(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),e}();function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function aa(t,e){return!e||"object"!==ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ua(t,e){return(ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,ca(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}(e,_i),function(t,e,n){e&&ia(t.prototype,e),n&&ia(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o<a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pa(t,e){return!e||"object"!==la(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ha(t){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ya(t,e){return(ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var da=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pa(this,ha(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ya(t,e)}(e,dr),function(t,e,n){e&&fa(t.prototype,e),n&&fa(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getDataAt(t).high}}]),e}();function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function va(t,e){return!e||"object"!==ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){return(_a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wa=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=va(this,ma(e).call(this)))._exprA=t,r._exprB=n,r._exprC=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_a(t,e)}(e,dr),function(t,e,n){e&&ga(t.prototype,e),n&&ga(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),e}();function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pa(t,e){return!e||"object"!==Oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Aa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pa(this,ka(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(e,wa),function(t,e,n){e&&Sa(t.prototype,e),n&&Sa(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),e}();function ja(t){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ea(t,e){return!e||"object"!==ja(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ta(t){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ma(t,e){return(Ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ra=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ea(this,Ta(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ma(t,e)}(e,_i),function(t,e,n){e&&xa(t.prototype,e),n&&xa(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o>a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function La(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Na(t){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ba=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),La(this,Na(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(e,dr),function(t,e,n){e&&Ia(t.prototype,e),n&&Ia(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getDataAt(t).low}}]),e}();function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ha(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ua(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ua(this,Ya(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(e,Rr),function(t,e,n){e&&Ha(t.prototype,e),n&&Ha(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),e}();function za(t){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ga(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qa(t,e){return!e||"object"!==za(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ka(t){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ja(t,e){return(Ja=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qa(this,Ka(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ja(t,e)}(e,_i),function(t,e,n){e&&Ga(t.prototype,e),n&&Ga(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>=t+1-n?(o=t+1-n,this._buf[t-1].result*(1-1/o)+e/o):this._buf[t-1].result+(e-this._buf[t-o].resultA)/o}return e}}]),e}();function Za(t){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tc(t,e){return!e||"object"!==Za(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ec(t){return(ec=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nc(t,e){return(nc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tc(this,ec(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nc(t,e)}(e,Rr),function(t,e,n){e&&$a(t.prototype,e),n&&$a(t,n)}(e,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),e}();function rc(t){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ac(t,e){return!e||"object"!==rc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cc(t){return(cc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uc(t,e){return(uc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ac(this,cc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uc(t,e)}(e,Rr),function(t,e,n){e&&ic(t.prototype,e),n&&ic(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),e}();function lc(t){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pc(t,e){return!e||"object"!==lc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yc(t,e){return(yc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pc(this,hc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yc(t,e)}(e,wr),function(t,e,n){e&&fc(t.prototype,e),n&&fc(t,n)}(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}();function bc(t){return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vc(t,e){return!e||"object"!==bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mc(t){return(mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _c(t,e){return(_c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wc=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=vc(this,mc(e).call(this)))._exprA=t,i._exprB=n,i._exprC=o,i._exprD=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_c(t,e)}(e,dr),function(t,e,n){e&&gc(t.prototype,e),n&&gc(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),e}();function Oc(t){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pc(t,e){return!e||"object"!==Oc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kc(t){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cc(t,e){return(Cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ac=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pc(this,kc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cc(t,e)}(e,dr),function(t,e,n){e&&Sc(t.prototype,e),n&&Sc(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getDataAt(t).open}}]),e}();function jc(t){return(jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ec(t,e){return!e||"object"!==jc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tc(t){return(Tc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mc(t,e){return(Mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rc=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ec(this,Tc(e).call(this,t,n)))._style=void 0===o?e.outputStyle.Line:o,i._color=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mc(t,e)}(e,Zr),function(t,e,n){e&&xc(t.prototype,e),n&&xc(t,n)}(e,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),e}();function Dc(t){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ic(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lc(t,e){return!e||"object"!==Dc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nc(t){return(Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fc(t,e){return(Fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Rc,"outputStyle",{None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4});var Bc=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Lc(this,Nc(e).call(this)))._name=t,i._minValue=n,i._maxValue=o,i._value=r,i._defaultValue=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fc(t,e)}(e,dr),function(t,e,n){e&&Ic(t.prototype,e),n&&Ic(t,n)}(e,[{key:"execute",value:function(){return this._value}},{key:"getName",value:function(){return this._name}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),e}();function Vc(t){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uc(t,e){return!e||"object"!==Vc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wc(t,e){return(Wc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xc=function(t){function e(t,n,o,r,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Uc(this,Yc(e).call(this,n,o,r,i)))._prefix=t,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wc(t,e)}(e,Rc),function(t,e,n){e&&Hc(t.prototype,e),n&&Hc(t,n)}(e,[{key:"getRangeName",value:function(){return this._prefix+this._exprA.getRange()}}]),e}();function zc(t){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qc(t,e){return!e||"object"!==zc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kc(t){return(Kc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jc(t,e){return(Jc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qc(this,Kc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jc(t,e)}(e,Rr),function(t,e,n){e&&Gc(t.prototype,e),n&&Gc(t,n)}(e,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),e}();function Zc(t){return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tu(t,e){return!e||"object"!==Zc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eu(t,e,n){return(eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nu(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function nu(t){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ou(t,e){return(ou=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ru=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=tu(this,nu(e).call(this,t,n,o,r)))._buf=[],i._range=-1,i._min=null,i._step=null,i._max=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ou(t,e)}(e,wc),function(t,e,n){e&&$c(t.prototype,e),n&&$c(t,n)}(e,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=ei.get(),o=n._firstIndex;if(o<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var r=n._ds.getDataAt(t).high,i=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,r>a.ep?(e.ep=r,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>i){e.longPos=!1;var c=t-this._range+1;for(c=Math.max(c,o);c<t;c++){var u=n._ds.getDataAt(c).high;r<u&&(r=u)}e.sar=r,e.ep=i,e.af=.02}}else if(e.longPos=!1,i<a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<r){e.longPos=!0;var s=t-this._range+1;for(s=Math.max(s,o);s<t;s++){var l=n._ds.getDataAt(s).low;i>l&&(i=l)}e.sar=i,e.ep=r,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});eu(nu(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){eu(nu(e.prototype),"clear",this).call(this),this._range=-1}}]),e}();function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function au(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cu(t,e){return!e||"object"!==iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uu(t,e,n){return(uu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=su(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function su(t){return(su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lu(t,e){return(lu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fu=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cu(this,su(e).call(this,t,n)))._exprC=o,r._mul=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lu(t,e)}(e,_i),function(t,e,n){e&&au(t.prototype,e),n&&au(t,n)}(e,[{key:"initRange",value:function(){uu(su(e.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>t+1-n&&(o=t+1-n),((o-1)*this._buf[t-1].result+e*this._mul)/o}return e}}]),e}();function pu(t){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yu(t,e){return!e||"object"!==pu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function du(t,e,n){return(du="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bu(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function bu(t){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gu(t,e){return(gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yu(this,bu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gu(t,e)}(e,_i),function(t,e,n){e&&hu(t.prototype,e),n&&hu(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],o=ei.get()._firstIndex;if(o<0)return n.resultMA=e,0;if(t>o){var r=this._range;r>=t+1-o?(r=t+1-o,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/r)+e/r):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-r].resultA)/r;for(var i=0,a=t-r+1;a<=t;a++)i+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(i/r)}return n.resultMA=e,0}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._stdBuf.push({resultMA:NaN});du(bu(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){du(bu(e.prototype),"clear",this).call(this),this._stdBuf=[]}}]),e}();function mu(t){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wu(t,e){return!e||"object"!==mu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ou(t){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Su(t,e){return(Su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wu(this,Ou(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Su(t,e)}(e,Rr),function(t,e,n){e&&_u(t.prototype,e),n&&_u(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),e}();function ku(t){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Au(t,e){return!e||"object"!==ku(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xu(t,e){return(xu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Eu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Au(this,ju(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xu(t,e)}(e,_i),function(t,e,n){e&&Cu(t.prototype,e),n&&Cu(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=ei.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return 0===o||o>=t+1-n?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-o].resultA}return e}}]),e}();function Tu(t){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ru(t,e){return!e||"object"!==Tu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Du(t){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Iu(t,e){return(Iu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ru(this,Du(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iu(t,e)}(e,dr),function(t,e,n){e&&Mu(t.prototype,e),n&&Mu(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getDataAt(t).volume}}]),e}();function Nu(t){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bu(t,e){return!e||"object"!==Nu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vu(t){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hu(t,e){return(Hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bu(this,Vu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hu(t,e)}(e,dr),function(t,e,n){e&&Fu(t.prototype,e),n&&Fu(t,n)}(e,[{key:"execute",value:function(t){return ei.get()._ds.getIndexPriceAt(t).close}}]),e}();function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xu(t,e){return!e||"object"!==Yu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zu(t){return(zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gu(t,e){return(Gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xu(this,zu(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gu(t,e)}(e,Nt),function(t,e,n){e&&Wu(t.prototype,e),n&&Wu(t,n)}(e,[{key:"Draw",value:function(t){var e=this,n=Q.getIndicatorAction(),o=Q.getDataSource(),r=Q.getArea(this.getAreaName()),i=Q.getTimeline(),a=Q.getModuleProvider(this.getModuleName()),c=Q.getTheme();if(0!==a.getHeight()){var u,s=i.getColumnWidth(),l=i.getFirstIndex(),f=i.getLastIndex();u=r.isChanged()||i.isUpdated()||a.isUpdated()?l:Math.max(l,f-1),a.getIndicators().forEach(function(p){var h,y,d=p.getOutputCount(),b=p.getName();for(y=0;y<d;y++){var g=(h=p.getOutputAt(y)).getStyle();g===Rc.outputStyle.VolumeStick?e.drawVolumeStick(t,c,o,u,f,i.toItemLeft(u),s,i.getItemWidth(),a):g===Rc.outputStyle.MACDStick?e.drawMACDStick(t,c,h,u,f,i.toItemLeft(u),s,i.getItemWidth(),a):g===Rc.outputStyle.SARPoint&&e.drawSARPoint(t,c,h,u,f,i.toItemCenter(u),s,i.getItemWidth(),a)}var v=i.toColumnLeft(u),m=i.toItemCenter(u);for(t.save(),t.rect(v,r.getTop(),r.getRight()-v,r.getHeight()),t.clip(),t.translate(.5,.5),y=0;y<d;y++){var _=m,w=(h=p.getOutputAt(y)).getName(),O=n.getIndicatorStorage(b,w),S=O.show,P=O.color,k=O.width;if(h.getStyle()===Rc.outputStyle.Line&&S){var C=void 0,A=[];u>l&&(C=h.execute(u-1),!1===isNaN(C)&&A.push({x:_-s,y:a.toY(C)}));for(var j=u;j<=f;j++,_+=s)C=h.execute(j),!1===isNaN(C)&&A.push({x:_,y:a.toY(C)});A.length>0&&(t.strokeStyle=h.getColor()||P||c["Indicator".concat(y)],t.lineWidth=k||1,je.drawLines(t,A))}}t.restore()})}}},{key:"drawVolumeStick",value:function(t,e,n,o,r,i,a,c,u){for(var s=i,l=[],f=[],p=[],h=o;h<=r;h++){var y=n.getDataAt(h);if(y){var d=u.toY(y.volume),b=u.toHeight(y.volume);y.close>y.open?b>1&&c>1?l.push({x:s+.5,y:d+.5,w:c-1,h:b-1}):f.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}):y.close===y.open&&h>0&&y.close>=n.getDataAt(h-1).close?b>1&&c>1?l.push({x:s+.5,y:d+.5,w:c-1,h:b-1}):f.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}):p.push({x:s,y:d,w:Math.max(c,1),h:Math.max(b,1)}),s+=a}}l.length>0&&(t.strokeStyle=e.PositiveOpacity30,je.createRectangles(t,l),t.stroke()),f.length>0&&(t.fillStyle=e.PositiveOpacity30,je.createRectangles(t,f),t.fill()),p.length>0&&(t.fillStyle=e.NegativeOpacity30,je.createRectangles(t,p),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,o,r,i,a,c,u){for(var s=i,l=u.toY(0),f=[],p=[],h=[],y=[],d=o>0?n.execute(o-1):NaN,b=o;b<=r;b++){var g=n.execute(b);if(g>=0){var v=u.toHeight(g);(0===b||g>=d)&&v>1&&c>1?f.push({x:s+.5,y:l-v+.5,w:c-1,h:v-1}):h.push({x:s,y:l-v,w:Math.max(c,1),h:Math.max(v,1)})}else{var m=u.toHeight(-g);(0===b||g>=d)&&m>1&&c>1?p.push({x:s+.5,y:l+.5,w:c-1,h:m-1}):y.push({x:s,y:l,w:Math.max(c,1),h:Math.max(m,1)})}d=g,s+=a}f.length>0&&(t.strokeStyle=e.PositiveOpacity30,je.createRectangles(t,f),t.stroke()),p.length>0&&(t.strokeStyle=e.NegativeOpacity30,je.createRectangles(t,p),t.stroke()),h.length>0&&(t.fillStyle=e.PositiveOpacity30,je.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=e.NegativeOpacity30,je.createRectangles(t,y),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,o,r,i,a,c,u){var s=c>>1;s<.5&&(s=.5),s>4&&(s=4);var l=i,f=l+s,p=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.Indicator3,t.beginPath();for(var h=o;h<=r;h++){var y=u.toY(n.execute(h));t.moveTo(f,y),t.arc(l,y,s,0,p),l+=a,f+=a}t.stroke(),t.restore()}}]),e}();function Ku(t){return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ju(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qu(t,e){return!e||"object"!==Ku(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zu(t){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $u(t,e){return($u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ts=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qu(this,Zu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$u(t,e)}(e,je),function(t,e,n){e&&Ju(t.prototype,e),n&&Ju(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Q.getModuleProvider(this.getModuleName()),o=Q.getDataSource();if(!(0===n.getHeight()||o.getDataSize()<1)){var r=o.getLastData(),i=r.close,a=r.open;if(!(i<n.getMinValue()||i>n.getMaxValue())){var c=Q.getTheme(),u=n.toY(i),s=e.getLeft(),l=e.getRight(),f=i>a?c.TextPositive:c.TextNegative;t.fillStyle=f,t.strokeStyle=f,je.createPolygon(t,[{x:s,y:u-10},{x:s,y:u+10},{x:l-12,y:u+10},{x:l-12,y:u-10},{x:s,y:u-10}]),t.globalAlpha=.9,t.fill(),t.globalAlpha=1,t.stroke(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=c.Text3;var p="-  ".concat(At.fromFloat(i,o.getDecimalDigits()));t.fillText(p,s,u+2)}}}}]),e}();function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function os(t,e){return!e||"object"!==es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rs(t){return(rs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var as=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),os(this,rs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}(e,De),function(t,e,n){e&&ns(t.prototype,e),n&&ns(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Q.getModuleProvider(this.getModuleName()),o=Q.getTimeline(),r=Q.getTheme(),i=e.getRect();if(!e.isChanged()&&!o.isUpdated()&&!n.isUpdated()){var a=o.getFirstIndex(),c=o.getLastIndex()-1,u=Math.max(a,c);i.X=o.toColumnLeft(u),i.Width=e.getRight()-i.X}t.fillStyle=r[this._color],t.clearRect(i.X,i.Y,i.Width,i.Height)}}]),e}(),cs={zh_cn:{high:"高",open:"开",low:"低",close:"收",change:"涨幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"时间",period:{my:"已添加",edit:"编辑",complete:"保存",more:"未添加",period:"周期",line:"分时",m:"分钟",H:"小时",D:"日",W:"周",M:"月",Y:"年"},str_indicator:"技术指标",str_tools:"画线工具",str_local_save:"本地保存",str_compare:"对比",str_setting:"设置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",ctools:{cursor:"光标",cross_cursor:"十字光标",seg_line:"线段",straight_line:"直线",ray_line:"射线",arrow_line:"箭头",horz_seg_line:"水平线段",horz_straight_line:"水平直线",horz_ray_line:"水平射线",vert_straight_line:"垂直直线",price_line:"价格线",tri_parallel_line:"价格通道线",bi_parallel_line:"平行直线",bi_parallel_ray:"平行射线",fib_retrace:"斐波纳契回调",fib_fans:"斐波纳契扇形",hide:"隐藏",show:"显示",delete:"删除",hide_all:"隐藏所有绘图工具",show_all:"显示所有绘图工具",delete_all:"删除所有绘图工具"},compare:{index_title:"现货指数",index_desc:"价格指数",futures_title:"交割合约价格",futures_desc_1:"当周",futures_desc_2:"次周",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永续合约价格",swap_desc:"永续"},confirm:"确定",reset:"重置",cancel:"取消",indicator_settings:"指标设置",indicator_name:{main:"主图指标",MA:"MA 移动平均线",EMA:"EMA 指数平滑移动平均线",BOLL:"BOLL 布林线",deputy:"副图指标",VOLUME:"VOLUME 成交量",MACD:"MACD 指数平滑异动移动平均线",KDJ:"KDJ 随机指标",StochRSI:"StochRSI 随机相对强弱指标",RSI:"RSI 相对强弱指标",DMI:"DMI 动向指标",OBV:"OBV 能量潮指标",DMA:"DMA 平行线差指标",TRIX:"TRIX 三重指数平滑移动平均线",BRAR:"BRAR 情绪指标",VR:"VR 成交量比率",EMV:"EMV 简易波动指标",WR:"WR 威廉姆斯指标",ROC:"ROC 变化速率",MTM:"MTM 动量指标",PSY:"PSY 心理线指标"},indicator_param:{"Short Period":"短周期","Long Period":"长周期","MA Period":"移动平均周期","Calculating Period":"计算周期","RSI Length":"RSI天数长度","Stoch Length":"随机指标长度","Standard Deviation":"标准差"},price_type:{inst_price:"最新价格",index_price:"指数价格",mark_price:"标记价格"},trade_settings:{title:"交易设置",show_order_input:"显示下单浮窗",show_order_line:"显示订单线",show_position_line:"显示持仓成本线",show_order_record:"显示买卖记录"},trade_input:{market_buy:"市价买入",market_sell:"市价卖出",market_long:"市价开多",market_short:"市价开空",limit_buy:"限价买入",limit_sell:"限价卖出",limit_long:"限价开多",limit_short:"限价开空",amount:"数量",amount_input:"请输入数量",amount_tip:"数量错误"},trade_record:{detail:"查看明细",filled:"成交",filled_unit:"笔",buy:"买入均价",sell:"卖出均价"},trade:{limit_px:"限价",tp_buy:"止盈买入",tp_sell:"止盈卖出",sl_buy:"止损买入",sl_sell:"止损卖出",trigger_px:"触发价",cancel_order:"取消订单",close:"平",close_position:"平仓",market:"市",market_close:"市价全平",drag_tp_sl:"上下拖动设置止盈止损",drag_update_order:"上下拖动修改订单"}},en_us:{high:"high",open:"open",low:"low",close:"close",change:"change",amplitude:"range",volume:"volume",year:"year",month:"month",day:"day",time:"time",period:{my:"Added",edit:"Edit",complete:"Save",more:"Unadded",period:"TIME",line:"Line(1m)",m:"m",H:"H",D:"D",W:"W",M:"M",Y:"Y"},str_indicator:"Indicator",str_tools:"Tools",str_local_save:"Save",str_compare:"Compare",str_setting:"Setting",str_fullscreen:"Fullscreen",str_fullscreen_close:"Exit Fullscreen",ctools:{cursor:"Cursor",cross_cursor:"Cross Cursor",seg_line:"Trend Line",straight_line:"Extended",ray_line:"Ray",arrow_line:"Arrow",horz_seg_line:"Horizontal Line",horz_straight_line:"Horizontal Extended",horz_ray_line:"Horizontal Ray",vert_straight_line:"Vertical Extended",price_line:"Price Line",tri_parallel_line:"Parallel Channel",bi_parallel_line:"Parallel Lines",bi_parallel_ray:"Parallel Rays",fib_retrace:"Fibonacci Retracements",fib_fans:"Fibonacci Fans",hide:"Hide",show:"Show",delete:"Delete",hide_all:"Hide All Drawing Tools",show_all:"Display All Drawing Tools",delete_all:"Delete All Drawing Tools"},compare:{index_title:"Token Index",index_desc:" Prcie Index",futures_title:"Futures Price",futures_desc_1:" Weekly",futures_desc_2:" Bi-weekly",futures_desc_4:" Quarterly",futures_desc_5:" Bi-quarterly",swap_title:"Swap Price",swap_desc:" Swap"},confirm:"Confirm",reset:"Reset",indicator_settings:"Indicator Settings",indicator_name:{main:"Main Indicators",deputy:"Sub Indicators"},price_type:{inst_price:"Last Price",index_price:"Index Price",mark_price:"Mark Price"},trade_settings:{title:"Trade settings",show_order_input:"Display floating window",show_order_line:"Display order line",show_position_line:"Display average opening price line",show_order_record:"Display trade history"},trade_input:{market_buy:"Market-buy",market_sell:"Market-sell",market_long:"Market-long",market_short:"Market-short",limit_buy:"Limit-buy",limit_sell:"Limit-sell",limit_long:"Limit-long",limit_short:"Limit-short",amount:"Amount",amount_input:"Please enter",amount_tip:"Error"},trade_record:{detail:"View details",filled:"Filed",filled_unit:"orders",buy:"Average buy price",sell:"Average sell price"},trade:{limit_px:"Limit",tp_buy:"TP-buy",tp_sell:"TP-sell",sl_buy:"SL-buy",sl_sell:"SL-sell",trigger_px:"Trigger price",cancel_order:"Cancel Order",close:"Close",close_position:"Close",market:"MKT Close All",market_close:"MKT Close All",drag_tp_sl:"Drag to set trigger price of take profit/stop loss order",drag_update_order:"Drag to set price for limit order"}},zh_hk:{high:"高",open:"開",low:"低",close:"收",change:"漲幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"時間",period:{my:"已添加",edit:"編輯",complete:"保存",more:"未添加",period:"週期",line:"分時",m:"分鐘",H:"小時",D:"日",W:"周",M:"月",Y:"年"},str_indicator:"技術指標",str_tools:"畫線工具",str_local_save:"本地保存",str_compare:"对比",str_setting:"設置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",ctools:{cursor:"光標",cross_cursor:"十字光標",seg_line:"線段",straight_line:"直線",ray_line:"射線",arrow_line:"箭頭",horz_seg_line:"水平線段",horz_straight_line:"水平直線",horz_ray_line:"水平射線",vert_straight_line:"垂直直線",price_line:"價格線",tri_parallel_line:"價格通道線",bi_parallel_line:"平行直線",bi_parallel_ray:"平行射線",fib_retrace:"斐波納契回調",fib_fans:"斐波納契扇形",hide:"隱藏",show:"顯示",delete:"删除",hide_all:"隱藏所有繪圖工具",show_all:"顯示所有繪圖工具",delete_all:"删除所有繪圖工具"},compare:{index_title:"現貨指數",index_desc:"價格指數",futures_title:"交割合約價格",futures_desc_1:"當週",futures_desc_2:"次週",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永續合約價格",swap_desc:"永續"},confirm:"確定",reset:"重置",indicator_settings:"指標設置",indicator_name:{main:"主圖指標",MA:"MA 移動平均線",EMA:"EMA 指數平滑移動平均線",BOLL:"BOLL 布林線",deputy:"副圖指標",VOLUME:"VOLUME 成交量",MACD:"MACD 指數平滑異動移動平均線",KDJ:"KDJ 隨機指標",StochRSI:"StochRSI 隨機相對強弱指標",RSI:"RSI 相對強弱指標",DMI:"DMI 動向指標",OBV:"OBV 能量潮指標",DMA:"DMA 平行線差指標",TRIX:"TRIX 三重指數平滑移動平均線",BRAR:"BRAR 情緒指標",VR:"VR 成交量比率",EMV:"EMV 簡易波動指標",WR:"WR 威廉姆斯指標",ROC:"ROC 變化速率",MTM:"MTM 動量指標",PSY:"PSY 心理線指標"},indicator_param:{"Short Period":"短周期","Long Period":"長周期","MA Period":"移動平均周期","Calculating Period":"計算周期","RSI Length":"RSI天數長度","Stoch Length":"隨機指標長度","Standard Deviation":"標準差"},price_type:{inst_price:"最新價格",index_price:"指數價格",mark_price:"標記價格"},trade_settings:{title:"交易設置",show_order_input:"顯示下單浮窗",show_order_line:"顯示訂單線",show_position_line:"顯示持倉成本線",show_order_record:"顯示買賣記錄"},trade_input:{market_buy:"市價買入",market_sell:"市價賣出",market_long:"市价开多",market_short:"市价开空",limit_buy:"限價買入",limit_sell:"限價賣出",limit_long:"限价开多",limit_short:"限价开空",amount:"數量",amount_input:"請輸入數量",amount_tip:"數量錯誤"},trade_record:{detail:"查看明細",filled:"成交",filled_unit:"筆",buy:"買入均價",sell:"賣出均價"},trade:{limit_px:"限價",tp_buy:"止盈買入",tp_sell:"止盈賣出",sl_buy:"止損買入",sl_sell:"止損賣出",trigger_px:"觸發價",cancel_order:"取消訂單",close:"平",close_position:"平倉",market:"市",market_close:"市價全平",drag_tp_sl:"上下拖動設置止盈止損",drag_update_order:"上下拖動修改訂單"}}};function us(t){return t=t&&t.toLowerCase(),cs[t]||cs.en_us}function ss(t){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){fs(t,e,n[e])})}return t}function fs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ps(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hs(t,e){return!e||"object"!==ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ys(t){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){return(ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hs(this,ys(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}(e,je),function(t,e,n){e&&ps(t.prototype,e),n&&ps(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getLineAction(),n=Q.getMouseAction(),o=Q.getDataSource(),r=o.getSelectedData();if(r&&n.isShowCrossCursor()&&!e.isDrawing()){var i=Q.getArea(this.getAreaName()),a=n.getMousePosition(),c=Q.getTheme(),u=Q.getConfig(),s=u.language,l=u.mainInfoStyle,f=u.showVolume,p=c.Text0,h=c.Text1,y=(c.Text6,c.Text7),d=us(s),b="vertical"===l,g=o.getDecimalDigits(),v=[];t.font=c.DefaultFont,t.textAlign="left",t.textBaseline="top";var m=h,_=o.getSelectedIndex(),w=o.getDataAt(_-1),O=0;_>0&&(O=(r.close-w.close)/w.close*100?(r.close-w.close)/w.close*100:0,m=c[O>=0?"TextPositive":"TextNegative"]);var S=At.getTimes(r.time),P=S.year,k=S.month,C=S.date,A=S.hour,j=S.minute;if(v.push({key:d.time,value:"".concat(P,"-").concat(k,"-").concat(C," ").concat(A,":").concat(j),color:p,horColor:y}),v.push({key:d.open,value:r.open.toFixed(g),keyColor:p,horColor:m}),v.push({key:d.high,value:r.high.toFixed(g),keyColor:p,horColor:m}),v.push({key:d.low,value:r.low.toFixed(g),keyColor:p,horColor:m}),v.push({key:d.close,value:r.close.toFixed(g),keyColor:p,horColor:m}),_>0){v.push({key:d.change,value:"".concat(O.toFixed(2),"%"),color:m,keyColor:p});var x=0;w&&(x=(r.high-r.low)/w.close*100||0),v.push({key:d.amplitude,value:"".concat(x.toFixed(2),"%"),keyColor:p})}b&&f&&v.push({key:d.volume,value:r.volume.toFixed(2),keyColor:p});var E=Q.getModuleProvider(this.getModuleName());if(b&&E)E.getIndicators().forEach(function(t){for(var e=t.getOutputCount(),n=t.getName(),o=0;o<e;o++){var r=t.getOutputAt(o),i=r.getName(),a=Q.getIndicatorAction().getIndicatorStorage(n,i),u=a.show,s=a.color,l=r.execute(_);if(u&&!Number.isNaN(l)){var f=r.getRangeName();v.push({key:d[f.toLocaleLowerCase()]||f,value:l.toFixed(g),color:r.getColor()||s||c["Indicator".concat(o)]})}}});var T=i.getLeft(),M=i.getTop(),R=i.getRight(),D=i.getWidth(),I=i.getHeight();if("vertical"===l){for(var L=1.5*parseInt(c.DefaultFont,10),N=0,F=0;F<v.length;F++){var B=v[F],V=t.measureText("".concat(B.key).concat(B.value)).width;N<V&&(N=V)}var H=(N+=10)+14;a.x<=H&&(this._lastPanelPosition="right"),a.x>=D-H&&(this._lastPanelPosition="left");var U=Math.min(v.length,Math.floor((I-14)/L)),Y=T,W=U*L+14*.55;U<v.length&&v.shift();var X={x:T+7,y:M+4.55,w:D-14,h:I-14},z=N+7;"right"===this._lastPanelPosition&&(Y=R-H,X.x=Y+7,z=R-7),t.globalAlpha=c.MainInfoAlpha,t.fillStyle=c.MainInfoBg,t.fillRect(Y,M,H,W),t.globalAlpha=1;for(var G=0;G<U;G++){var K=v[G];t.fillStyle=K.keyColor||K.color||h,je.drawString(t,K.key,ls({},X));var J=t.measureText(K.value).width;if(t.fillStyle=K.color||h,!je.drawString(t,K.value,ls({},X,{x:z-J})))break;X.y+=L,X.h-=L}}else for(var q={x:T+7,y:M+7,w:D-14,h:I-14},Z=0;Z<v.length;Z++){var $=v[Z];t.measureText($.value).width;if(t.fillStyle=$.horColor||$.color,!je.drawString(t,"  ".concat($.key,": ").concat($.value),q))break}}}}]),e}();function gs(t){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ms(t,e){return!e||"object"!==gs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ws(t,e){return(ws=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Os=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ms(this,_s(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ws(t,e)}(e,Nt),function(t,e,n){e&&vs(t.prototype,e),n&&vs(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getDataSource();if(!(e.getDataSize()<1)){var n=Q.getTimeline();if(!(n.getInnerWidth()<n.getColumnWidth())){var o=Q.getModuleProvider(this.getModuleName());if(0!==o.getHeight()){var r=n.getFirstIndex(),i=r+n.getLastIndex()>>1,a=Q.getTheme();t.font=a.DefaultFont,t.textBaseline="middle",t.fillStyle=a.Text4,t.strokeStyle=a.Text4;var c=e.getDecimalDigits();this.drawMark(t,o.getMinValue(),c,o.toY(o.getMinValue()),r,i,o.getMinValueIndex(),n),this.drawMark(t,o.getMaxValue(),c,o.toY(o.getMaxValue()),r,i,o.getMaxValueIndex(),n)}}}}},{key:"drawMark",value:function(t,e,n,o,r,i,a,c){var u,s,l,f,p=c.toItemCenter(a);p>c.getInnerWidth()/2?(t.textAlign="right",l=(u=p-4)-3,f=(s=u-7)-4):(t.textAlign="left",l=(u=p+4)+3,f=(s=u+7)+4),je.drawLine(t,u,o,s,o),je.drawLine(t,u,o,l,o+2),je.drawLine(t,u,o,l,o-2),t.fillText(At.fromFloat(e,n),f,o)}}]),e}();function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ks(t,e){return!e||"object"!==Ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cs(t){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function As(t,e){return(As=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var js=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ks(this,Cs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&As(t,e)}(e,je),function(t,e,n){e&&Ps(t.prototype,e),n&&Ps(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getDataSource();if(!(e.getDataSize()<1)){var n,o=Q.getArea(this.getAreaName()),r=Q.getTimeline(),i=Q.getModuleProvider(this.getModuleName()),a=Q.getTheme(),c=r.getFirstIndex(),u=r.getLastIndex();n=o.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,u-1);for(var s=r.getColumnWidth(),l=r.getItemWidth()>>1,f=r.toItemLeft(n),p=r.toItemCenter(n),h=[],y=[],d=[],b=n;b<=u;b++){var g=e.getDataAt(b),v=i.toY(g.high),m=i.toY(g.low),_=Math.max(m-v,1);if(g.close>g.open){var w=i.toY(g.close),O=i.toY(g.open);h.push({x:p,y:v,w:1,h:_}),h.push({x:f,y:w,w:l,h:1}),h.push({x:p,y:O,w:l,h:1})}else if(g.close===g.open){var S=i.toY(g.close);y.push({x:p,y:v,w:1,h:_}),y.push({x:f,y:S,w:l,h:1}),y.push({x:p,y:S,w:l,h:1})}else{var P=i.toY(g.open),k=i.toY(g.close);d.push({x:p,y:v,w:1,h:_}),d.push({x:f,y:P,w:l,h:1}),d.push({x:p,y:k,w:l,h:1})}f+=s,p+=s}h.length>0&&(t.fillStyle=a.Positive,je.createRectangles(t,h),t.fill()),y.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,y),t.fill()),d.length>0&&(t.fillStyle=a.Negative,je.createRectangles(t,d),t.fill())}}}]),e}();function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ts(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ms(t){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rs(t,e){return(Rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ds=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ts(this,Ms(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rs(t,e)}(e,De),function(t,e,n){e&&Es(t.prototype,e),n&&Es(t,n)}(e,[{key:"Draw",value:function(t){var e=this.getModuleName(),n=Q.getArea(this.getAreaName()),o=Q.getModuleProvider(e);if(e===V.MAIN||n.isChanged()||o.isUpdated()){var r=Q.getTheme();t.fillStyle=r[this._color],t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}();function Is(t){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ns(t,e){return!e||"object"!==Is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fs(t){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vs=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ns(this,Fs(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(e,Nt),function(t,e,n){e&&Ls(t.prototype,e),n&&Ls(t,n)}(e,[{key:"Draw",value:function(t){var e=this.getModuleName(),n=Q.getArea(this.getAreaName()),o=Q.getModuleProvider(e);if(e===V.MAIN||n.isChanged()||o.isUpdated()){var r=Q.getAreaDigits(n),i=o.getGradations();if(0!==i.length){var a=n.getLeft(),c=n.getCenter(),u=Q.getTheme();t.font=u.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=u.Text5;var s=[];i.forEach(function(n){var i=o.toY(n);s.push({x:a,y:i,w:5,h:1}),t.fillText(At.formatShortAmount(e,n,r),c,i+1)}),s.length>0&&(t.fillStyle=u.Grid1,je.createRectangles(t,s),t.fill())}}}}]),e}();function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Us(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ys(t,e){return!e||"object"!==Hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zs=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ys(this,Ws(e).call(this,t.name))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xs(t,e)}(e,Nt),function(t,e,n){e&&Us(t.prototype,e),n&&Us(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getModuleProvider(this.getModuleName()).getSelectedValue();if(e!==-Number.MAX_VALUE){var n=Q.getMouseAction().getMousePosition().y,o=Q.getTheme();t.strokeStyle=o.Grid6,t.fillStyle=o.Grid6;var r=Q.getArea(this.getAreaName()),i=r.getLeft(),a=r.getRight();je.createPolygon(t,[{x:i,y:n-10},{x:i,y:n+10},{x:a-12,y:n+10},{x:a-12,y:n-10},{x:i,y:n-10}]),t.fill(),t.stroke(),t.font=o.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=o.Text3;var c=Q.getAreaDigits(r),u=At.formatShortAmount(this.getModuleName(),e,c);t.fillText("-  ".concat(u),r.getCenter()-11,n+2),this.getModuleName()===V.MAIN?Q.getOrderInputAction().updateFastBtn(i,n,u):Q.getOrderInputAction().removeFastBtn()}}}]),e}();function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ks(t,e){return!e||"object"!==Gs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Js(t){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qs(t,e){return(qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ks(this,Js(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qs(t,e)}(e,je),function(t,e,n){e&&Qs(t.prototype,e),n&&Qs(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getTimeline(),n=Q.getLineAction(),o=Q.getMouseAction();if(o.isShowCrossCursor()&&!n.isDrawing()){var r=Q.getTheme();t.strokeStyle=r.CursorColor,t.fillStyle=r.CursorColor;var i=o.getMousePosition().y,a=e.toItemCenter(e.getSelectedIndex()),c=Q.getArea(this.getAreaName());je.drawDashedLine(t,a,c.getTop()-1,a,c.getBottom(),10,5),je.drawDashedLine(t,0,i,c.getRight(),i,10,5),t.stroke()}}}]),e}();function $s(t){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function el(t,e){return!e||"object"!==$s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nl(t){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ol(t,e){return(ol=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),el(this,nl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ol(t,e)}(e,De),function(t,e,n){e&&tl(t.prototype,e),n&&tl(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getArea(this.getAreaName()),n=Q.getTimeline();if(e.isChanged()||n.isUpdated()){var o=Q.getTheme();t.fillStyle=o[this._color],t.fillRect(e.getLeft(),e.getTop(),e.getWidth(),e.getHeight())}}}]),e}();function il(t){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function al(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cl(t,e){return!e||"object"!==il(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ul(t){return(ul=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sl(t,e){return(sl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ll=[3e5,6e5,9e5,18e5,36e5,72e5,108e5,216e5,432e5,864e5,1728e5,5184e5],fl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cl(this,ul(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sl(t,e)}(e,je),function(t,e,n){e&&al(t.prototype,e),n&&al(t,n)}(e,[{key:"Draw",value:function(t){var e=Q.getConfig().language,n=us(e),o=Q.getArea(this.getAreaName()),r=Q.getTimeline();if(o.isChanged()||r.isUpdated()){var i=Q.getDataSource();if(!(i.getDataSize()<2)){var a=i.getDataAt(1),c=i.getDataAt(0);if(a&&c){for(var u=a.time-c.time,s=ll.length,l=0;l<s&&!(u<ll[l]);l++);for(;l<s&&!(ll[l]%u==0&&ll[l]/u*r.getColumnWidth()>60);l++);var f=60*(new Date).getTimezoneOffset()*1e3,p=Q.getTheme();t.font=p.DefaultFont,t.textAlign="center",t.textBaseline="middle";for(var h=[],y=o.getTop(),d=o.getMiddle(),b=o.getLeft(),g=r.getFirstIndex(),v=r.getRightIndex(),m=g;m<v;m++){var _=i.getTimeAt(m),w=_-f,O=At.getTimes(_,!1),S=O.year,P=O.month,k=O.date,C=O.hour,A=O.minute,j="";if(l<s){var x=Math.max(864e5,ll[l]);if(w%x!=0&&w%ll[l]!=0&&(w-=u<=6e4?7e3:6e4,432e5===u&&(w-=216e5)),w%x==0)j=/en_/.test(e)?"".concat(F[P]," ").concat(k.toString()):"".concat(P.toString()).concat(n.month).concat(k.toString()).concat(n.day),t.fillStyle=p.Text6;else if(w%ll[l]==0){var E=A.toString();A<10&&(E="0".concat(E)),j="".concat(C.toString(),":").concat(E),t.fillStyle=p.Text5}}else 1===k&&C<u/36e5&&(1===P?(j=S.toString(),/en_/.test(e)||(j+=n.year)):j=/en_/.test(e)?F[P]:"".concat(P.toString()).concat(n.month),t.fillStyle=p.Text6);if(j.length>0){var T=t.measureText(j).width,M=r.toItemCenter(m);if(M-T/2<b)continue;b=M+T/2,h.push({x:M,y:y,w:1,h:4}),t.fillText(j,M,d)}}h.length>0&&(t.fillStyle=p.Grid1,je.createRectangles(t,h),t.fill())}}}}}]),e}();function pl(t){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yl(t,e){return!e||"object"!==pl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dl(t){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bl(t,e){return(bl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yl(this,dl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bl(t,e)}(e,je),function(t,e,n){e&&hl(t.prototype,e),n&&hl(t,n)}(e,[{key:"Draw",value:function(t){if(Q.getMouseAction().isShowCrossCursor()){var e=Q.getArea(this.getAreaName()),n=Q.getTimeline(),o=Q.getDataSource(),r=n.getSelectedIndex(),i=At.getTimes(o.getTimeAt(r)),a=i.year,c=i.month,u=i.date,s=i.hour,l=i.minute,f="".concat(a,"-").concat(c,"-").concat(u," ").concat(s,":").concat(l),p=Q.getTheme(),h=t.measureText(f).width;t.strokeStyle=p.Grid6,t.fillStyle=p.Grid6;var y=e.getTop()+4,d=e.getBottom()-4,b=e.getLeft()+2,g=e.getRight()-2,v=n.toItemCenter(r),m=v-h/2-5,_=v+h/2+5;m<b&&(_+=b-m,m=b),_>g&&(m-=g-_,_=g);var w=[{x:m,y:y},{x:m,y:d},{x:_,y:d},{x:_,y:y},{x:m,y:y}];je.createPolygon(t,w),t.fill(),t.stroke(),t.font=p.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=p.Text3,t.fillText(f,(m+_)/2,(y+d)/2+2)}}}]),e}();function vl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ml(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ml(this,"setSymbol",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Q.getSetting().updateConfig(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ml(t,e,n[e])})}return t}({},n,{symbol:t})),e.getKlineData()}),ml(this,"getKlineData",function(){Q.getDataSource().resetData(),Q.getLineAction().resetLines(),Q.getOrderAction().removeAllOrders(),Q.getPositionAction().removeAllPositions(),Q.getDataFeed().unsubscribeAll(),Q.getDataFeed().getKlineData({mode:B.REFRESH}),Q.getDrawAction().draw(X.ALL,!0)}),ml(this,"setKlineData",function(t){Q.getDataSource().setData(t),Q.getDrawAction().draw(X.ALL)}),ml(this,"setKlineLastData",function(t){Q.getDataSource().setLastData(t),Q.getDrawAction().draw(X.ALL)}),ml(this,"setDepth",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{asks:[],bids:[]},n=e._depthData;n.array=[];for(var o=0;o<t.asks.length;o++){var r={};r.rate=t.asks[o][0],r.amount=t.asks[o][1],n.array.push(r)}for(var i=0;i<t.bids.length;i++){var a={};a.rate=t.bids[i][0],a.amount=t.bids[i][1],n.array.push(a)}n.asks_count=t.asks.length,n.bids_count=t.bids.length,n.asks_si=n.asks_count-1,n.asks_ei=0,n.bids_si=n.asks_count,n.bids_ei=n.asks_count+n.bids_count-1;for(var c=n.asks_si;c>=n.asks_ei;c--)c===n.asks_si&&void 0!==n.array[c]?n.array[c].amounts=n.array[c].amount:void 0!==n.array[c+1]&&(n.array[c].amounts=n.array[c+1].amounts+n.array[c].amount);for(var u=n.bids_si;u<=n.bids_ei;u++)u===n.bids_si&&void 0!==n.array[u]?n.array[u].amounts=n.array[u].amount:void 0!==n.array[u-1]&&(n.array[u].amounts=n.array[u-1].amounts+n.array[u].amount);Q.getDrawAction().draw(X.ALL)}),ml(this,"getDepthData",function(){return e._depthData}),ml(this,"setIndexData",function(t){(Q.getDataSource().setIndexPrice(t),t.mode!==B.RIGHT_UPDATE)&&(Q.getMainProvider().refreshIndicator(),Q.getDrawAction().draw(X.ALL,!0))}),ml(this,"setPeriod",function(t){var n=Q.getStorage().period;if(Q.getSetting().updateStorage({period:t}),e.getKlineData(),n!==U.LINE&&t===U.LINE&&e.setChartStyle(U.LINE),n===U.LINE&&t!==U.LINE){var o=Q.getStorage().mainStyle;e.setChartStyle(o)}}),ml(this,"getChartStyle",function(){return Q.getStorage().mainStyle||"CandleStick"}),ml(this,"setTheme",function(t){Q.getSetting().updateTheme(t);var e=Q.getConfig(),n=Oe(e.theme,e),o=Q.getKlineSQ();o.attr("class","kline-core ".concat(t)),o.css({background:n.Background}),Q.setTheme(n);var r=Q.getDrawAction();r.draw(X.ALL,!0),r.setMainLogo()}),ml(this,"setReverseColor",function(t){Q.getSetting().updateConfig({reverseColor:t});var n=Q.getConfig().theme;e.setTheme(n)}),ml(this,"setLanguage",function(t){Q.getSetting().updateLanguage(t),Q.getDrawAction().draw(X.ALL)}),this._depthData={array:[],asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0}}return function(t,e,n){e&&vl(t.prototype,e),n&&vl(t,n)}(t,[{key:"setChartStyle",value:function(t){var e,n,o=Q.getStorage(),r=o.period,i=o.mainIndic,a=Q.getIndicatorAction(),c="".concat(V.MAIN,".").concat(W.LEFT),u="".concat(c,".").concat(Y.CONTENT),s="".concat(c,".").concat(Y.MAX_MIN);if(r===U.LINE)return Q.removePlotter(u),Q.removePlotter(s),a.removeMainIndicator(),void a.addMainIndicator([U.LINE]);switch(Q.getSetting().updateStorage({mainStyle:t}),a.setMainIndicator(i),e=u,t){case"CandleStick":n=new mn({name:e});break;case"CandleStickHLC":n=new hn({name:e});break;case"OHLC":n=new js({name:e})}Q.addPlotter(e,n),n=new Os({name:e=s}),Q.addPlotter(e,n),Q.getArea(c).setChanged(!0),Q.getDrawAction().draw(X.ALL)}}]),t}();function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ol(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sl(t,e){return!e||"object"!==wl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pl(t){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kl(t,e){return(kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Sl(this,Pl(e).call(this,n.name)))._areaLocation=n.areaLocation,t._left=0,t._top=0,t._right=0,t._bottom=0,t._changed=!1,t._highlighted=!1,t._pressed=!1,t._selected=!1,t.Measuring=new s,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kl(t,e)}(e,Nt),function(t,e,n){e&&Ol(t.prototype,e),n&&Ol(t,n)}(e,[{key:"getAreaLocation",value:function(){return this._areaLocation}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"measure",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"layout",value:function(t,e,n,o,r){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),o<<=0,this._bottom!==o&&(this._bottom=o,this._changed=!0),r&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"isCapturingArea",value:function(){return Q.getMouseAction().getCapturingMouseArea()===this}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),e}();function Al(t){return(Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xl(t,e){return!e||"object"!==Al(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function El(t,e,n){return(El="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tl(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Tl(t){return(Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ml(t,e){return(Ml=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rl=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xl(this,Tl(e).call(this,t)))._gridColor=t.gridColor,n._areas=[],n._highlightedArea=null,n._selectedArea=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ml(t,e)}(e,Cl),function(t,e,n){e&&jl(t.prototype,e),n&&jl(t,n)}(e,[{key:"contains",value:function(t,n){var o,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(o=this._areas[r].contains(t,n)))return o.push(this),o;return El(Tl(e.prototype),"contains",this).call(this,t,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e].getName()){this._areas.splice(e,1),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,o=this._areas.length;for(n=0;n<o;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,o,r=this._areas.length;for(o=0;o<r;o++)if(null!==(n=this._areas[o].onMouseUp(t,e)))return n;return null}}]),e}();function Dl(t){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Il(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ll(t,e){return!e||"object"!==Dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nl(t){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fl(t,e){return(Fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ll(this,Nl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fl(t,e)}(e,Cl),function(t,e,n){e&&Il(t.prototype,e),n&&Il(t,n)}(e,[{key:"onMouseMove",value:function(t,e){return this.isCapturingArea()&&Q.getTimeline().onMouseMove(t,e),Q.getMouseAction().updateCursor(this,t,e),this}},{key:"onMouseDown",value:function(t,e){return Q.getTimeline().onMouseDown(t,e),this}},{key:"onMouseUp",value:function(t,e){return Q.getTimeline().onMouseUp(t,e),null}}]),e}();function Vl(t){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ul(t,e){return!e||"object"!==Vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yl(t){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wl(t,e){return(Wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ul(this,Yl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wl(t,e)}(e,Cl),function(t,e,n){e&&Hl(t.prototype,e),n&&Hl(t,n)}(e,[{key:"onMouseMove",value:function(){return Q.getMouseAction().showCursor(),this}}]),e}();function zl(t){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ql(t,e){return!e||"object"!==zl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kl(t){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jl(t,e){return(Jl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ql=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ql(this,Kl(e).call(this,t)))._capturingLine=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jl(t,e)}(e,Cl),function(t,e,n){e&&Gl(t.prototype,e),n&&Gl(t,n)}(e,[{key:"onMouseMove",value:function(t,e){var n=Q.getLineAction(),o=Q.getMouseAction();return this.isCapturingArea()?n.onMouseDownMove(t,e)?(n.isDrawing()?o.showCrossCursor(this,t,e):o.showCursor(),this):(Q.getTimeline().onMouseMove(t,e),o.updateCursor(this,t,e),this):this._capturingLine?(o.showCursor(),this):!this._capturingLine&&n.onMouseMove(t,e)?(o.showCrossCursor(this,t,e),this):(o.updateCursor(this,t,e),this)}},{key:"onMouseLeave",value:function(t,e){this._capturingLine=!1}},{key:"onMouseDown",value:function(t,e){return Q.getTimeline().onMouseDown(t,e),Q.getLineAction().onMouseDown(t,e)&&(this._capturingLine=!0),this}},{key:"onMouseUp",value:function(t,e){Q.getTimeline().onMouseUp(t,e);var n=Q.getLineAction(),o=Q.getMouseAction(),r=null;if(this._capturingLine){if(r=this,n.onMouseUp(t,e),n.getSelected())return n.showOperation(),r;this._capturingLine=!1}return o.updateCursor(this,t,e),n.hideOperation(),r}}]),e}();function Zl(t){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tf(t,e){return!e||"object"!==Zl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ef(t){return(ef=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nf(t,e){return(nf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var of=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tf(this,ef(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nf(t,e)}(e,Cl),function(t,e,n){e&&$l(t.prototype,e),n&&$l(t,n)}(e,[{key:"onMouseMove",value:function(){return Q.getMouseAction().showCursor(),this}}]),e}();function rf(t){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function af(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cf(t,e){return!e||"object"!==rf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uf(t,e,n){return(uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sf(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function sf(t){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lf(t,e){return(lf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ff=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cf(this,sf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lf(t,e)}(e,Cl),function(t,e,n){e&&af(t.prototype,e),n&&af(t,n)}(e,[{key:"measure",value:function(t,n){uf(sf(e.prototype),"measure",this).call(this,t,28)}},{key:"onMouseMove",value:function(t,e){return Q.getMouseAction().showCursor(),this}}]),e}();function pf(t){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yf(t,e){return!e||"object"!==pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function df(t,e,n){return(df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bf(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function bf(t){return(bf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gf(t,e){return(gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vf=W.LEFT,mf=W.RIGHT,_f=W.TOP,wf=W.BOTTOM,Of=W.FILL,Sf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yf(this,bf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gf(t,e)}(e,Rl),function(t,e,n){e&&hf(t.prototype,e),n&&hf(t,n)}(e,[{key:"measure",value:function(t,n){df(bf(e.prototype),"measure",this).call(this,t,n),t=this.getMeasuredWidth(),n=this.getMeasuredHeight();for(var o=0,r=this._areas.length;o<r;o++){var i=this._areas[o];switch(i.measure(t,n),i.getAreaLocation()){case vf:case mf:t-=i.getMeasuredWidth();break;case _f:case wf:n-=i.getMeasuredHeight();break;case Of:t=0,n=0}}}},{key:"layout",value:function(t,n,o,r,i){var a,c;df(bf(e.prototype),"layout",this).call(this,t,n,o,r,i),t=this.getLeft(),n=this.getTop(),o=this.getRight(),r=this.getBottom(),i=i||this.isChanged();for(var u=0,s=this._areas.length;u<s;u++){var l=this._areas[u];switch(l.getAreaLocation()){case vf:a=l.getMeasuredWidth(),l.layout(t,n,t+a,r,i),t+=a;break;case _f:c=l.getMeasuredHeight(),l.layout(t,n,o,n+c,i),n+=c;break;case mf:a=l.getMeasuredWidth(),l.layout(o-a,n,o,r,i),o-=a;break;case wf:c=l.getMeasuredHeight(),l.layout(t,r-c,o,r,i),r-=c;break;case Of:l.layout(t,n,o,r,i),t=o,n=r}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=Q.getTheme(),n=this.getLeft(),o=this.getTop(),r=this.getRight(),i=this.getBottom();t.fillStyle=e[this.getGridColor()];for(var a=0,c=this._areas.length;a<c;a++){var u=this._areas[a];switch(u.getAreaLocation()){case vf:t.fillRect(u.getRight(),o,1,i-o),n+=u.getWidth();break;case _f:t.fillRect(n,u.getBottom(),r-n,1),o+=u.getHeight();break;case mf:t.fillRect(u.getLeft(),o,1,i-o),r-=u.getWidth();break;case wf:t.fillRect(n,u.getTop(),r-n,1),i-=u.getHeight()}}}}]),e}();function Pf(t){return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cf(t,e){return!e||"object"!==Pf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Af(t,e,n){return(Af="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jf(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function jf(t){return(jf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xf(t,e){return(xf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ef=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cf(this,jf(e).call(this,t)))._isResize=!1,n._focusedArea=null;var o=Q.getStorage().deputyAreaHeight,r=void 0===o?{}:o;return n._deputyAreaHeight=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xf(t,e)}(e,Rl),function(t,e,n){e&&kf(t.prototype,e),n&&kf(t,n)}(e,[{key:"measure",value:function(t,n){Af(jf(e.prototype),"measure",this).call(this,t,n);for(var o=Q.getDataSource().getDecimalDigits()>7?100:76,r=t-o,i=0,a=this._areas.length-2;a>=0;a-=2){var c=this._areas[a].getModuleName(),u=0;if(c===V.MAIN)u=n-i;else i+=u=(this._deputyAreaHeight[c]||.2)*n;this._areas[a].measure(r,u),this._areas[a+1].measure(o,u)}}},{key:"layout",value:function(t,n,o,r,i){if(Af(jf(e.prototype),"layout",this).call(this,t,n,o,r,i),!(this._areas.length<1)){var a,c,u,s=t+this._areas[0].getMeasuredWidth(),l=n;i||(i=this.isChanged());var f=this._areas.length;for(u=0;u<f;u++)c=l+(a=this._areas[u]).getMeasuredHeight(),a.layout(t,l,s,c,i),u++,(a=this._areas[u]).layout(s,l,o,c,i),l=c;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e,n=Q.getTheme();t.fillStyle=n.Grid1,t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var o=this._areas.length-2;for(e=0;e<o;e+=2)t.fillRect(this.getLeft(),this._areas[e].getBottom(),this.getWidth(),1);if(!Q.getConfig().enableWheelScale)for(e=0,o+=2;e<o;e+=2)if(this._areas[e].isSelected()){t.strokeStyle=n.Indicator1,t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(this._isResize){var n=this._oldY-e;if(this._oldY=e,0===n)return this;var o=Q.getMainLeftArea().getHeight()-n,r=this._focusedArea.getHeight()+n;return o<=50&&n>0||r<=50&&n<0?this:(this._deputyAreaHeight[this._focusedArea.getModuleName()]=r/this.getHeight(),Q.getDrawAction().setMainLogo(),this)}var i,a=this._areas.length;for(i=2;i<a;i+=2){var c=this._areas[i],u=c.getTop();if(e>=u-5&&e<u+5)return this._focusedArea=c,Q.getMouseAction().showCursor("row-resize"),this}return this._focusedArea=null,null}},{key:"onMouseLeave",value:function(t,e){this._focusedArea=null,this._isResize=!1}},{key:"onMouseDown",value:function(t,e){return this._focusedArea?(this._oldY=e,this._isResize=!0,this):null}},{key:"onMouseUp",value:function(t,e){return this._isResize&&Q.getSetting().updateStorage({deputyAreaHeight:this._deputyAreaHeight}),this._focusedArea=null,this._isResize=!1,this}}]),e}();function Tf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rf=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Mf(this,"drawChart",function(){var t=Q.getChartContext(),n=Q.getDataSource().getDataSize()<1?[Y.BACKGROUND]:[Y.BACKGROUND,Y.GRID,Y.CONTENT,Y.INDICATOR,Y.TRADE_POINT],o=Q.getAreas();for(var r in o){var i=o[r];At.isInstance(i,Rl)||(e.drawArea(t,i,n),i.setChanged(!1))}}),Mf(this,"drawOverlay",function(){var t=Q.getOverlayCanvas(),n=Q.getOverlayContext();n.clearRect(0,0,t.width,t.height);var o=Q.getAreas(),r=Q.getDataSource().getDataSize()<1?[Y.SELECTION]:[Y.MAX_MIN,Y.LAST,Y.SELECTION,Y.DRAW_LINE,Y.INFO];for(var i in o){var a=o[i];At.isInstance(a,Rl)?a.drawGrid(n):e.drawArea(n,a,r)}}),Mf(this,"layout",function(){var t=Q.getChartCanvas(),n=Q.getPixelRatio(),o=t.width/n,r=t.height/n,i=Q.getFrame();i.measure(o,r),i.layout(0,0,o,r),e.updateProvider(),e.updateOrderPosition()}),Mf(this,"updateProvider",function(){if(!(Q.getDataSource().getDataSize()<1)){Q.getTimeline().update();var t=Q.getDataProviders();for(var e in t)t[e].update()}}),Mf(this,"updateOrderPosition",function(){var t=Q.getMainLeftArea(),e=Q.getTimeline(),n=Q.getMainProvider();(t.isChanged()||e.isUpdated()||n.isUpdated())&&(Q.getOrderAction().reset(),Q.getPositionAction().reset())}),Mf(this,"scale",function(t){Q.getTimeline().scale(t),e.updateProvider()}),Mf(this,"resize",function(t,n){var o=Q.getKlineSQ(),r=Q.getKlineDom().getBoundingClientRect();t=t||r.width,n=n||r.height,o.css({width:"".concat(t,"px"),height:"".concat(n,"px")});var i=h(".draw-line-box",o),a=h(".indic-tab-box",o),c=i[0].getBoundingClientRect();i.css({height:"".concat(n,"px")});var u=a[0].getBoundingClientRect(),s=t-c.width,l=n-u.height,f=Q.getChartCanvas(),p=Q.getOverlayCanvas(),y=e.getPixelRatio();f.width=y*s,f.height=y*l,f.style.width="".concat(s,"px"),f.style.height="".concat(l,"px"),p.width=y*s,p.height=y*l,p.style.width="".concat(s,"px"),p.style.height="".concat(l,"px"),Q.setPixelRatio(y),Q.getChartContext().scale(y,y),Q.getOverlayContext().scale(y,y),Q.getLineAction().resize(),e.draw(X.ALL,!0),e.setMainLogo()}),Mf(this,"setMainLogo",function(){var t=Q.getConfig(),e=t.logo,n=t.theme,o=e.size,r=e.position,i=e.img,a=o.width,c=o.height,u=r.x,s=void 0===u?0:u,l=r.y,f=void 0===l?0:l,p=i[n]||i.default,y=Q.getMainLeftArea(),d=y.getWidth(),b=y.getHeight()-c,g=d-a;if(!(b<=0||g<=0)){var v=g/2,m=b/2;switch(r.location){case"left-top":v=0,m=0;break;case"left-center":v=0;break;case"left-bottom":v=0,m=b;break;case"center-top":m=0;break;case"center-bottom":m=b;break;case"right-top":v=g,m=0;break;case"right-center":v=g;break;case"right-bottom":v=g,m=b}h(".canvas-group",Q.getKlineSQ()).css({"background-image":"url(".concat(p,")"),"background-position":"".concat(v+s,"px ").concat(m+f,"px"),"background-repeat":"no-repeat","background-size":"".concat(a,"px ").concat(c,"px")})}}),Mf(this,"getPixelRatio",function(){return Math.max(1,window.devicePixelRatio)}),Mf(this,"isPixelChange",function(){return Q.getPixelRatio()!==e.getPixelRatio()})}return function(t,e,n){e&&Tf(t.prototype,e),n&&Tf(t,n)}(t,[{key:"draw",value:function(t,e){if(this.isPixelChange())this.resize();else if("hidden"!==document.visibilityState){if(e)Q.getFrame().setChanged(!0);[X.ALL,X.CHART_CANVAS].includes(t)&&(this.layout(),this.drawChart()),[X.ALL,X.OVERLY_CANVAS].includes(t)&&this.drawOverlay(),Q.getDataSource().setDataMode(B.NOTHING),Q.getTimeline().setUpdated(!1);var n=Q.getDataProviders();for(var o in n)n[o].setUpdated(!1);var r=Q.getAreas();for(var i in r)r[i].setChanged(!1)}else this.layout()}},{key:"drawArea",value:function(t,e,n){for(var o=e.getName(),r=0;r<n.length;r++){var i=Q.getPlotter(["".concat(o,".").concat(n[r])]);i&&i.Draw(t)}}}]),t}();function Df(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var If=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._exprEnv=new ei,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return function(t,e,n){e&&Df(t.prototype,e),n&&Df(t,n)}(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){var t,e;for(this._exprEnv.setFirstIndex(-1),e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){var e,n;for(this._rid++,n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),ei.set(this._exprEnv);try{var n,o;for(o=this._assigns.length,n=0;n<o;n++)this._assigns[n].assign(e);for(o=this._outputs.length,n=0;n<o;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(this._exprEnv.getFirstIndex()>=0)throw t}}}},{key:"getParameters",value:function(){var t,e,n={},o=this._params.length;for(t=0;t<o;t++)n[(e=this._params[t]).getName()]={value:e.getValue()};return n}},{key:"setParameters",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this._params.length;for(t=0;t<o;t++){var r=(n[(e=this._params[t]).getName()]||{}).value;void 0!==r&&e.setValue(r)}}}]),t}();function Lf(t){return(Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ff(t,e){return!e||"object"!==Lf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bf(t){return(Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vf(t,e){return(Vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hf=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ff(this,Bf(e).call(this));var n=new Bc("N",2,120,26);t.addParameter(n);var o=new Zr("REF_CLOSE_1",new qc(new ci,new hi(1)));t.addAssign(o);var r=new Rc("BR",new sc(new Mi(new Eu(new oc(new hi(0),new Pu(new da,o)),n),new Eu(new oc(new hi(0),new Pu(o,new Ba)),n)),new hi(100)));t.addOutput(r);var i=new Rc("AR",new sc(new Mi(new Eu(new Pu(new da,new Ac),n),new Eu(new Pu(new Ac,new Ba),n)),new hi(100)));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vf(t,e)}(e,If),function(t,e,n){e&&Nf(t.prototype,e),n&&Nf(t,n)}(e,[{key:"getName",value:function(){return"BRAR"}}]),e}();function Uf(t){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wf(t,e){return!e||"object"!==Uf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xf(t){return(Xf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zf(t,e){return(zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gf=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wf(this,Xf(e).call(this));var n=new Bc("N",2,500,20),o=new Bc("K",2,500,2);t.addParameter(n),t.addParameter(o);var r=new Zr("STD_CLOSE_N",new vu(new ci,n));t.addAssign(r);var i=new Rc("BOLL",new qa(new ci,n));t.addOutput(i);var a=new Rc("UB",new Br(i,new sc(o,r)));t.addOutput(a);var c=new Rc("LB",new Pu(i,new sc(o,r)));return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zf(t,e)}(e,If),function(t,e,n){e&&Yf(t.prototype,e),n&&Yf(t,n)}(e,[{key:"getName",value:function(){return"BOLL"}}]),e}();function Qf(t){return(Qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jf(t,e){return!e||"object"!==Qf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qf(t){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e){return(Zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $f=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Jf(this,qf(e).call(this));var n=new Bc("N1",2,60,10),o=new Bc("N2",2,250,50),r=new Bc("M",2,100,10);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Rc("DIF",new Pu(new qa(new ci,n),new qa(new ci,o)));t.addOutput(i);var a=new Rc("DIFMA",new qa(i,r));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zf(t,e)}(e,If),function(t,e,n){e&&Kf(t.prototype,e),n&&Kf(t,n)}(e,[{key:"getName",value:function(){return"DMA"}}]),e}();function tp(t){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ep(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function np(t,e){return!e||"object"!==tp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function op(t){return(op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rp(t,e){return(rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ip=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=np(this,op(e).call(this));var n=new Bc("N",2,90,14),o=new Bc("MM",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Zr("MTR",new qi(new oc(new oc(new Pu(new da,new Ba),new Ar(new Pu(new da,new qc(new ci,new hi(1))))),new Ar(new Pu(new qc(new ci,new hi(1)),new Ba))),n));t.addAssign(r);var i=new Zr("HD",new Pu(new da,new qc(new da,new hi(1))));t.addAssign(i);var a=new Zr("LD",new Pu(new qc(new Ba,new hi(1)),new Ba));t.addAssign(a);var c=new Zr("DMP",new qi(new Aa(new Xr(new oa(i,new hi(0)),new oa(i,a)),i,new hi(0)),n));t.addAssign(c);var u=new Zr("DMM",new qi(new Aa(new Xr(new oa(a,new hi(0)),new oa(a,i)),a,new hi(0)),n));t.addAssign(u);var s=new Rc("PDI",new sc(new Mi(c,r),new hi(100)));t.addOutput(s);var l=new Rc("MDI",new sc(new Mi(u,r),new hi(100)));t.addOutput(l);var f=new Rc("ADX",new qi(new sc(new Mi(new Ar(new Pu(l,s)),new Br(l,s)),new hi(100)),o));t.addOutput(f);var p=new Rc("ADXR",new qi(f,o));return t.addOutput(p),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rp(t,e)}(e,If),function(t,e,n){e&&ep(t.prototype,e),n&&ep(t,n)}(e,[{key:"getName",value:function(){return"DMI"}}]),e}();function ap(t){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function up(t,e){return!e||"object"!==ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sp(t){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lp(t,e){return(lp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=up(this,sp(e).call(this));return[7,30,0,0,0,0].forEach(function(e,n){var o=n+1,r=new Bc("EMA".concat(o),2,1e3,e);t.addParameter(r),t.addOutput(new Xc("EMA","EMA".concat(o),new Bi(new ci,r)))}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lp(t,e)}(e,If),function(t,e,n){e&&cp(t.prototype,e),n&&cp(t,n)}(e,[{key:"getName",value:function(){return"EMA"}}]),e}();function pp(t){return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yp(t,e){return!e||"object"!==pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dp(t){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bp(t,e){return(bp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=yp(this,dp(e).call(this));var n=new Bc("N",2,90,14),o=new Bc("M",2,60,9);t.addParameter(n),t.addParameter(o);var r=new Zr("VOLUME",new Mi(new qa(new Lu,n),new Lu));t.addAssign(r);var i=new Zr("MID",new sc(new Mi(new Pu(new Br(new da,new Ba),new qc(new Br(new da,new Ba),new hi(1))),new Br(new da,new Ba)),new hi(100)));t.addAssign(i);var a=new Rc("EMV",new qa(new Mi(new sc(i,new sc(r,new Pu(new da,new Ba))),new qa(new Pu(new da,new Ba),n)),n));t.addOutput(a);var c=new Rc("MAEMV",new qa(a,o));return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bp(t,e)}(e,If),function(t,e,n){e&&hp(t.prototype,e),n&&hp(t,n)}(e,[{key:"getName",value:function(){return"EMV"}}]),e}();function vp(t){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _p(t,e){return!e||"object"!==vp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wp(t){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Op(t,e){return(Op=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=_p(this,wp(e).call(this));var n=new Bc("M1",2,1e3,60);return t.addParameter(n),t.addOutput(new Rc("CLOSE",new ci,Rc.outputStyle.Line)),t.addOutput(new Xc("MA","MA",new qa(new ci,n),Rc.outputStyle.Line)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Op(t,e)}(e,If),function(t,e,n){e&&mp(t.prototype,e),n&&mp(t,n)}(e,[{key:"getName",value:function(){return"LINE"}}]),e}();function Pp(t){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cp(t,e){return!e||"object"!==Pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ap(t){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jp(t,e){return(jp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Cp(this,Ap(e).call(this));var n=new Bc("N",2,90,9),o=new Bc("M1",2,30,3),r=new Bc("M2",2,30,3);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Zr("HHV",new sa(new da,n));t.addAssign(i);var a=new Zr("LLV",new Ra(new Ba,n));t.addAssign(a);var c=new Zr("RSV",new sc(new Mi(new Pu(new ci,a),new Pu(i,a)),new hi(100)));t.addAssign(c);var u=new Rc("K",new fu(c,o,new hi(1)));t.addOutput(u);var s=new Rc("D",new fu(u,r,new hi(1)));t.addOutput(s);var l=new Rc("J",new Pu(new sc(u,new hi(3)),new sc(s,new hi(2))));return t.addOutput(l),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jp(t,e)}(e,If),function(t,e,n){e&&kp(t.prototype,e),n&&kp(t,n)}(e,[{key:"getName",value:function(){return"KDJ"}}]),e}();function Ep(t){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mp(t,e){return!e||"object"!==Ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rp(t){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dp(t,e){return(Dp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ip=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Mp(this,Rp(e).call(this));var n=new Bc("SHORT",2,200,12),o=new Bc("LONG",2,200,26),r=new Bc("MID",2,200,9);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Rc("DIF",new Pu(new Bi(new ci,n),new Bi(new ci,o)));t.addOutput(i);var a=new Rc("DEA",new Bi(i,r));t.addOutput(a);var c=new Rc("MACD",new sc(new Pu(i,a),new hi(2)),Rc.outputStyle.MACDStick);return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dp(t,e)}(e,If),function(t,e,n){e&&Tp(t.prototype,e),n&&Tp(t,n)}(e,[{key:"getName",value:function(){return"MACD"}}]),e}();function Lp(t){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Np(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fp(t,e){return!e||"object"!==Lp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bp(t){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vp(t,e){return(Vp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Fp(this,Bp(e).call(this));return[5,10,20,0,0,0].forEach(function(e,n){var o=n+1,r=new Bc("MA".concat(o),2,1e3,e);t.addParameter(r),t.addOutput(new Xc("MA","MA".concat(o),new qa(new ci,r)))}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vp(t,e)}(e,If),function(t,e,n){e&&Np(t.prototype,e),n&&Np(t,n)}(e,[{key:"getName",value:function(){return"MA"}}]),e}();function Up(t){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wp(t,e){return!e||"object"!==Up(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xp(t){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zp(t,e){return(zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wp(this,Xp(e).call(this));var n=new Bc("N",2,120,12),o=new Bc("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Rc("MTM",new Pu(new ci,new qc(new ci,n)));t.addOutput(r);var i=new Rc("MAMTM",new qa(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zp(t,e)}(e,If),function(t,e,n){e&&Yp(t.prototype,e),n&&Yp(t,n)}(e,[{key:"getName",value:function(){return"MTM"}}]),e}();function Qp(t){return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jp(t,e){return!e||"object"!==Qp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qp(t){return(qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zp(t,e){return(Zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $p=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Jp(this,qp(e).call(this));var n=new Bc("M",2,100,30);t.addParameter(n);var o=new Zr("REF_CLOSE_1",new qc(new ci,new hi(1)));t.addAssign(o);var r=new Zr("VA",new Aa(new oa(new ci,o),new Lu,new dc(new Lu)));t.addAssign(r);var i=new Rc("OBV",new Eu(new Aa(new Xi(new ci,o),new hi(0),r),new hi(0)));t.addOutput(i);var a=new Rc("MAOBV",new qa(i,n));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zp(t,e)}(e,If),function(t,e,n){e&&Kp(t.prototype,e),n&&Kp(t,n)}(e,[{key:"getName",value:function(){return"OBV"}}]),e}();function th(t){return(th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nh(t,e){return!e||"object"!==th(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oh(t){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rh(t,e){return(rh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ih=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=nh(this,oh(e).call(this));var n=new Bc("N",2,100,12),o=new Bc("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Rc("PSY",new sc(new Mi(new Ci(new oa(new ci,new qc(new ci,new hi(1))),n),n),new hi(100)));t.addOutput(r);var i=new Rc("MAPSY",new qa(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rh(t,e)}(e,If),function(t,e,n){e&&eh(t.prototype,e),n&&eh(t,n)}(e,[{key:"getName",value:function(){return"PSY"}}]),e}();function ah(t){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ch(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uh(t,e){return!e||"object"!==ah(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sh(t){return(sh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lh(t,e){return(lh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=uh(this,sh(e).call(this));var n=new Bc("N",2,120,12),o=new Bc("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Zr("REF_CLOSE_N",new qc(new ci,n));t.addAssign(r);var i=new Rc("ROC",new sc(new Mi(new Pu(new ci,r),r),new hi(100)));t.addOutput(i);var a=new Rc("MAROC",new qa(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lh(t,e)}(e,If),function(t,e,n){e&&ch(t.prototype,e),n&&ch(t,n)}(e,[{key:"getName",value:function(){return"ROC"}}]),e}();function ph(t){return(ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yh(t,e){return!e||"object"!==ph(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dh(t){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bh(t,e){return(bh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=yh(this,dh(e).call(this));var n=new Bc("N1",2,120,6),o=new Bc("N2",2,250,12),r=new Bc("N3",2,500,24);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Zr("LC",new qc(new ci,new hi(1)));t.addAssign(i);var a=new Zr("CLOSE_LC",new Pu(new ci,i));return t.addAssign(a),t.addOutput(new Rc("RSI1",new sc(new Mi(new fu(new oc(a,new hi(0)),n,new hi(1)),new fu(new Ar(a),n,new hi(1))),new hi(100)))),t.addOutput(new Rc("RSI2",new sc(new Mi(new fu(new oc(a,new hi(0)),o,new hi(1)),new fu(new Ar(a),o,new hi(1))),new hi(100)))),t.addOutput(new Rc("RSI3",new sc(new Mi(new fu(new oc(a,new hi(0)),r,new hi(1)),new fu(new Ar(a),r,new hi(1))),new hi(100)))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bh(t,e)}(e,If),function(t,e,n){e&&hh(t.prototype,e),n&&hh(t,n)}(e,[{key:"getName",value:function(){return"RSI"}}]),e}();function vh(t){return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _h(t,e){return!e||"object"!==vh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wh(t){return(wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oh(t,e){return(Oh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=_h(this,wh(e).call(this));var n=new hi(4),o=new hi(2),r=new hi(2),i=new hi(20);return t.addOutput(new Rc("SAR",new ru(n,o,r,i),Rc.outputStyle.SARPoint)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oh(t,e)}(e,If),function(t,e,n){e&&mh(t.prototype,e),n&&mh(t,n)}(e,[{key:"getName",value:function(){return"SAR"}}]),e}();function Ph(t){return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ch(t,e){return!e||"object"!==Ph(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ah(t){return(Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jh(t,e){return(jh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ch(this,Ah(e).call(this));var n=new Bc("N",3,100,14),o=new Bc("M",3,100,14),r=new Bc("P1",2,50,3),i=new Bc("P2",2,50,3);t.addParameter(n),t.addParameter(o),t.addParameter(r),t.addParameter(i);var a=new Zr("LC",new qc(new ci,new hi(1)));t.addAssign(a);var c=new Zr("CLOSE_LC",new Pu(new ci,a));t.addAssign(c);var u=new Zr("RSI",new sc(new Mi(new fu(new oc(c,new hi(0)),n,new hi(1)),new fu(new Ar(c),n,new hi(1))),new hi(100)));t.addAssign(u);var s=new Rc("STOCHRSI",new sc(new Mi(new qa(new Pu(u,new Ra(u,o)),r),new qa(new Pu(new sa(u,o),new Ra(u,o)),r)),new hi(100)));return t.addOutput(s),t.addOutput(new Xc("MASTOCHRSI","MASTOCHRSI",new qa(s,i))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jh(t,e)}(e,If),function(t,e,n){e&&kh(t.prototype,e),n&&kh(t,n)}(e,[{key:"getName",value:function(){return"StochRSI"}}]),e}();function Eh(t){return(Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Th(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mh(t,e){return!e||"object"!==Eh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rh(t){return(Rh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dh(t,e){return(Dh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ih=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Mh(this,Rh(e).call(this));var n=new Bc("N",2,100,12),o=new Bc("M",2,100,9);t.addParameter(n),t.addParameter(o);var r=new Zr("MTR",new Bi(new Bi(new Bi(new ci,n),n),n));t.addAssign(r);var i=new Rc("TRIX",new sc(new Mi(new Pu(r,new qc(r,new hi(1))),new qc(r,new hi(1))),new hi(100)));t.addOutput(i);var a=new Rc("MATRIX",new qa(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dh(t,e)}(e,If),function(t,e,n){e&&Th(t.prototype,e),n&&Th(t,n)}(e,[{key:"getName",value:function(){return"TRIX"}}]),e}();function Lh(t){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fh(t,e){return!e||"object"!==Lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bh(t){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vh(t,e){return(Vh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Fh(this,Bh(e).call(this));var n=new Bc("MA1",2,500,5),o=new Bc("MA2",2,500,10);t.addParameter(n),t.addParameter(o);var r=new Rc("VOLUME",new Lu,Rc.outputStyle.VolumeStick);return t.addOutput(r),t.addOutput(new Xc("MA","MA1",new qa(r,n))),t.addOutput(new Xc("MA","MA2",new qa(r,o))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vh(t,e)}(e,If),function(t,e,n){e&&Nh(t.prototype,e),n&&Nh(t,n)}(e,[{key:"getName",value:function(){return"VOLUME"}}]),e}();function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wh(t,e){return!e||"object"!==Uh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xh(t){return(Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zh(t,e){return(zh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wh(this,Xh(e).call(this));var n=new Bc("N",2,100,26),o=new Bc("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Zr("REF_CLOSE_1",new qc(new ci,new hi(1)));t.addAssign(r);var i=new Zr("TH",new Eu(new Aa(new oa(new ci,r),new Lu,new hi(0)),n));t.addAssign(i);var a=new Zr("TL",new Eu(new Aa(new Xa(new ci,r),new Lu,new hi(0)),n));t.addAssign(a);var c=new Zr("TQ",new Eu(new Aa(new Xi(new ci,r),new Lu,new hi(0)),n));t.addAssign(c);var u=new Rc("VR",new sc(new Mi(new Br(new sc(i,new hi(2)),c),new Br(new sc(a,new hi(2)),c)),new hi(100)));t.addOutput(u);var s=new Rc("MAVR",new qa(u,o));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zh(t,e)}(e,If),function(t,e,n){e&&Yh(t.prototype,e),n&&Yh(t,n)}(e,[{key:"getName",value:function(){return"VR"}}]),e}();function Qh(t){return(Qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jh(t,e){return!e||"object"!==Qh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qh(t){return(qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zh(t,e){return(Zh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $h=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Jh(this,qh(e).call(this));var n=new Bc("N",2,100,10),o=new Bc("N1",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Zr("HHV",new sa(new da,n));t.addAssign(r);var i=new Zr("HHV1",new sa(new da,o));t.addAssign(i);var a=new Zr("LLV",new Ra(new Ba,n));t.addAssign(a);var c=new Zr("LLV1",new Ra(new Ba,o));t.addAssign(c);var u=new Rc("WR1",new sc(new Mi(new Pu(r,new ci),new Pu(r,a)),new hi(100)));t.addOutput(u);var s=new Rc("WR2",new sc(new Mi(new Pu(i,new ci),new Pu(i,c)),new hi(100)));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zh(t,e)}(e,If),function(t,e,n){e&&Kh(t.prototype,e),n&&Kh(t,n)}(e,[{key:"getName",value:function(){return"WR"}}]),e}();function ty(t){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ey(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ny(t,e){return!e||"object"!==ty(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oy(t){return(oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ry(t,e){return(ry=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iy=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=ny(this,oy(e).call(this));var n=new Rc("Index",new Uu,Rc.outputStyle.Line);return t.addOutput(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ry(t,e)}(e,If),function(t,e,n){e&&ey(t.prototype,e),n&&ey(t,n)}(e,[{key:"getName",value:function(){return"IXPE"}}]),e}();n(6);function ay(t){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uy(t,e){return!e||"object"!==ay(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sy(t){return(sy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ly(t,e){return(ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uy(this,sy(e).call(this,t))).el.on("click",function(t){var e=h(t.target).closest("li");if(e){var o=e.attr("key"),r=e.hasClass("selected"),i=Q.getStorage().selectedDeputyIndics;if(r){if(i.length<=1)return;return e.removeClass("selected"),void n.emit("indic-click",{key:o,selected:!1})}if(i.length>=4){var a=i[0];h("li[key=".concat(a,"]"),n.el).removeClass("selected"),n.emit("indic-click",{key:a,selected:!1})}e.addClass("selected"),n.emit("indic-click",{key:o,selected:!0})}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ly(t,e)}(e,_),function(t,e,n){e&&cy(t.prototype,e),n&&cy(t,n)}(e,[{key:"render",value:function(){var t=[],e=Q.getConfig().deputyIndics,n=Q.getStorage().selectedDeputyIndics;e.forEach(function(e){t.push('<li key="'.concat(e,'" class="').concat(n.includes(e)?"selected":"",'"><span>').concat(e,"</span></li>"))}),this.el.html("<ul>".concat(t.join(""),"</ul>"))}}]),e}();n(7);function py(t){return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yy(t,e){return(yy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function by(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),by(dy(dy(n=function(t,e){return!e||"object"!==py(e)&&"function"!=typeof e?dy(t):e}(this,hy(e).call(this,t)))),"show",function(){var t=h("body");if(!t.length||n.isShow)return!1;var e=Q.getConfig().theme,o="okline-".concat(Date.now()),r=gt.isMobile?"app":"pc",i='<div style="z-index: 10012" class="okline-dialog-box '.concat(o," ").concat(r," ").concat(e,'"><div class="okline-dialog-content" /></div>');return t.beforeEnd(i),n.el=h(".".concat(o," .okline-dialog-content")),!!n.el.length&&(n.isShow=!0,!0)}),by(dy(dy(n)),"hide",function(){return!!n.isShow&&(n.el.parent()[0].remove(),n.isShow=!1,!0)}),n.isShow=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yy(t,e)}(e,_),e}(),vy=n(0),my=n.n(vy);n(8);function _y(t){return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wy(t){return(wy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oy(t,e){return(Oy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Py(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ky=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Py(Sy(Sy(n=function(t,e){return!e||"object"!==_y(e)&&"function"!=typeof e?Sy(t):e}(this,wy(e).call(this,t)))),"bindEvent",function(){h(".back-btn",n.el).on("click",n.back),h(".close-btn",n.el).on("click",n.hide),h(".reset-btn",n.el).on("click",n.resetEvent),h(".confirm-btn",n.el).on("click",n.confirmEvent),h(".settings-names",n.el).on("click",n.nameEvent),h(".settings-params",n.el).on("click",function(t){var e=h(t.target);if(n.setWidthEvent(e),n.setColorEvent(e),!n.removeDropdown(e)){var o=e.closest(".k-checkbox");if(o)n.showEvent(o);else{var r=e.closest(".width-content");if(r)n.widthEvent(r);else{var i=e.closest(".param-color");i&&n.colorEvent(i)}}}})}),Py(Sy(Sy(n)),"back",function(){h(".back-btn").addClass("hide"),h(".settings-params").addClass("hide"),h(".settings-names").removeClass("hide"),h(".settings-title",n.el).html(n.lang.indicator_settings)}),Py(Sy(Sy(n)),"resetEvent",function(){var t=Q.getSetting().getDefaultStorage("indicator.".concat(n.key));n.createParams(t),n.paramsChange(t)}),Py(Sy(Sy(n)),"confirmEvent",function(){var t={};y("tr",n.el).each(function(e){var n={},o=h(e).attr("param"),r=h(".param-show i",e);r.length>0&&(n.show=!!r.hasClass("checked"));var i=h(".param-value input",e);i.length>0&&(n.value=Number(i[0].value));var a=h(".width-content div",e);if(a.length>0){var c=a[0].style.height;n.width=parseInt(c,10)}var u=h(".color-content",e);u.length>0&&(n.color=u[0].style.backgroundColor),t[o]=n}),n.paramsChange(t),n.hide()}),Py(Sy(Sy(n)),"nameEvent",function(t){var e=h(t.target).closest(".settings-name");e&&(gt.isPC?(y(".settings-name").removeClass("checked"),e.addClass("checked")):(h(".settings-names").addClass("hide"),h(".settings-params").removeClass("hide"),h(".back-btn").removeClass("hide")),n.key=e.attr("key"),n.createParams())}),Py(Sy(Sy(n)),"paramsChange",function(t){n.emit("params-change",{key:n.key,params:t})}),Py(Sy(Sy(n)),"showEvent",function(t){var e=!t.hasClass("checked"),n="k-checkbox iconfont ".concat(e?"iconicn-d-check-outline-lg checked":"iconcheckbox-selecte");t.attr("class",n)}),Py(Sy(Sy(n)),"widthEvent",function(t){t.parent().addClass("selected");var e='<div class="param-dropdown">';St.forEach(function(t){e+='<div class="width-item"><div style="height: '.concat(t,'px"></div></div>')}),e+="</div>",t.after(e)}),Py(Sy(Sy(n)),"setWidthEvent",function(t){var e=t.closest(".width-item");if(e){var n=h("div",e)[0].style.height;h(".width-content div",h(t).closest("td")).attr("style","height: ".concat(n,";"))}}),Py(Sy(Sy(n)),"colorEvent",function(t){t.addClass("selected");var e='<div class="param-dropdown">';Pt.forEach(function(t){e+='<div class="color-item" style="background: '.concat(t,';"></div>')}),e+="</div>",h(".color-content",t).after(e)}),Py(Sy(Sy(n)),"setColorEvent",function(t){var e=t.closest(".color-item");if(e){var n=e[0].style.background;h(".color-content",h(t).closest("td")).attr("style","background: ".concat(n,";"))}}),Py(Sy(Sy(n)),"removeDropdown",function(t){var e=t.closest("td"),o=e&&e.hasClass("selected");return y(".param-dropdown",n.el).each(function(t){h(t).parent().removeClass("selected"),t.remove()}),o}),Py(Sy(Sy(n)),"createNames",function(){var t=Object.keys(n.mainNames),e=Object.keys(n.deputyNames),o=n.createType("main",t),r=n.createType("deputy",e);h(".settings-names",n.el).html(o+r),gt.isPC&&(n.createParams(),h(".settings-params").removeClass("hide"),h(".settings-name",n.el).addClass("checked"))}),Py(Sy(Sy(n)),"createType",function(t,e){var o=n.lang.indicator_name,r=void 0===o?{}:o,i='<div class="settings-type">'.concat(r[t],"</div>");return e.forEach(function(t){i+='<div class="settings-name" key="'.concat(t,'">').concat(r[t]||t,"</div>")}),i}),Py(Sy(Sy(n)),"createParams",function(t){var e=Q.getStorage().indicator;t=t||e[n.key];var o=h("tbody",n.el);o.empty();var r=n.lang.indicator_param,i=void 0===r?{}:r;gt.isMobile&&h(".settings-title",n.el).html(n.key);var a="";Object.keys(t).forEach(function(e){a+="<tr param=".concat(e,">");var o=t[e],r=o.show,c=o.value,u=o.width,s=o.color,l=n.names[n.key][e],f=i[l]||l;if(void 0!==r){var p='class="k-checkbox iconfont '.concat(r?"iconicn-d-check-outline-lg checked":"iconcheckbox-selecte",'"');a+='<td class="param-show"><i '.concat(p,"></i><span>").concat(f,"</span></td>")}else a+='<td class="param-name">'.concat(f,"</td>");void 0!==c&&(a+='<td class="param-value"><input value="'.concat(c,'" /></td>')),void 0!==u&&(a+='<td class="param-width"><div class="width-content"><div style="height: '.concat(u,'px"></div><i class="iconfont icon-Unfold" /></div></td>')),void 0!==s&&(a+='<td class="param-color"><div class="color-content" style="background: '.concat(s,';" /></td>')),a+="</tr>"}),o.html(a)}),Py(Sy(Sy(n)),"visible",function(){if(n.show()){var t=Q.getConfig().language;n.lang=us(t),n.key="MA",n.el.html(my.a);var e=n.lang,o=e.indicator_settings,r=e.reset,i=e.confirm;h(".settings-title",n.el).html(o),h(".reset-btn",n.el).html(r),h(".confirm-btn",n.el).html(i),n.createNames(),n.bindEvent()}}),Py(Sy(Sy(n)),"switchVisible",function(t){t?n.visible():n.hide()}),n.key="",n.mainNames={MA:{MA1:"MA1",MA2:"MA2",MA3:"MA3",MA4:"MA4",MA5:"MA5",MA6:"MA6"},EMA:{EMA1:"EMA1",EMA2:"EMA2",EMA3:"EMA3",EMA4:"EMA4",EMA5:"EMA5",EMA6:"EMA6"},BOLL:{N:"Calculating Period",K:"Standard Deviation",BOLL:"BOLL",UB:"UB",LB:"LB"}},n.deputyNames={VOLUME:{MA1:"MA1",MA2:"MA2",VOLUME:"VOLUME"},MACD:{SHORT:"Short Period",LONG:"Long Period",MID:"MA Period",DIF:"DIF",DEA:"DEA",MACD:"MACD"},KDJ:{N:"Calculating Period",M1:"MA Period",M2:"MA Period",K:"K",D:"D",J:"J"},StochRSI:{N:"RSI Length",M:"RSI Length",P1:"K",P2:"D",STOCHRSI:"STOCHRSI",MASTOCHRSI:"MASTOCHRSI"},RSI:{N1:"MA1",N2:"MA2",N3:"MA3",RSI1:"RSI1",RSI2:"RSI2",RSI3:"RSI3"},DMI:{N:"MA1",MM:"MA2",PDI:"PDI",MDI:"MDI",ADX:"ADX",ADXR:"ADXR"},OBV:{M:"MA Period",OBV:"OBV",MAOBV:"MAOBV"},BOLL:{N:"Calculating Period",K:"Standard Deviation",BOLL:"BOLL",UB:"UB",LB:"LB"},DMA:{N1:"Short Period",N2:"Long Period",M:"MA Period",DIF:"DMA",DIFMA:"AMA"},TRIX:{N:"MA Period",M:"MA Period",TRIX:"TRIX",MATRIX:"MATRIX"},BRAR:{N:"Calculating Period",BR:"BR",AR:"AR"},VR:{N:"Calculating Period",M:"MA Period",VR:"VR",MAVR:"MAVR"},EMV:{N:"MA Period",M:"MA Period",EMV:"EMV",MAEMV:"MAEMV"},WR:{N:"Calculating Period",N1:"Calculating Period",WR1:"WR1",WR2:"WR2"},ROC:{N:"Calculating Period",M:"MA Period",ROC:"ROC",MAROC:"MAROC"},MTM:{N:"Calculating Period",M:"MA Period",MTM:"MTM",MAMTM:"MAMTM"},PSY:{N:"Calculating Period",M:"MA Period",PSY:"PSY",MAPSY:"MAPSY"}},n.names=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Py(t,e,n[e])})}return t}({},n.mainNames,n.deputyNames),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oy(t,e)}(e,gy),e}();function Cy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ay(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jy=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ay(this,"init",function(){var t=Q.getKlineSQ();e._indicView=new fy({el:h(".indic-tab-box",t)}),e._indicView.on("indic-click",function(t){e.setDeputyIndicator(t)}),e._paramsView=new ky,e._paramsView.on("params-change",function(t){var n=t.key,o=t.params,r=e.setIndicatorParameters(n,o),i=Q.getSetting();i.cover({target:o,sources:r}),i.setStorage("indicator.".concat(n),o),Q.getDrawAction().draw(X.ALL,!0)})}),Ay(this,"destroy",function(){e._indicView.off(),e._paramsView.off()}),Ay(this,"switchSettings",function(t){e._paramsView.switchVisible(t)}),Ay(this,"setMainIndicator",function(t){var n=Q.getStorage().mainIndic;Q.getSetting().updateStorage({mainIndic:t}),e.setIndexIndicator(n,t),t&&t.length?e.addMainIndicator(t):e.removeMainIndicator(),Q.getDrawAction().draw(X.ALL)}),Ay(this,"setIndexIndicator",function(t,e){var n=t.includes(U.INDEX),o=e.includes(U.INDEX),r=Q.getSetting(),i=Q.getDataFeed();n&&!o&&(i.unsubscribeIndexData(),r.updateStorage({custom:{showIdxIndic:!1}})),!n&&o&&(i.getKlineData({mode:B.REFRESH}),r.updateStorage({custom:{showIdxIndic:!0}}))}),Ay(this,"addMainIndicator",function(t){var e=Q.getStorage().indicator,n=t.map(function(t){var n;switch(t){case U.MA:n=new Hp;break;case U.EMA:n=new fp;break;case U.BOLL:n=new Gf;break;case U.SAR:n=new Sh;break;case U.INDEX:n=new iy;break;case U.LINE:n=new Sp}var o=e[t];return o&&n.setParameters(o),n});Q.getMainProvider().setIndicator(n);var o="".concat(V.MAIN,".").concat(W.LEFT),r="".concat(o,".").concat(Y.INDICATOR),i=Q.getPlotter(r);i||(i=new Qu({name:r}),Q.addPlotter(r,i)),Q.getArea(o).setChanged(!0)}),Ay(this,"switchDeputyIndicator",function(t){var n=h(".indic-tab-box",Q.getKlineSQ());Q.getSetting().updateStorage({showIndics:t}),t?n.removeClass("hide"):n.addClass("hide"),Q.getStorage().selectedDeputyIndics.forEach(function(n){t?e.addDeputyIndicator(n):e.removeDeputyIndicator(n)}),Q.getDrawAction().resize()}),Ay(this,"setDeputyIndicator",function(t){var n=t.key,o=t.selected,r=Q.getStorage().selectedDeputyIndics,i=r.indexOf(n);o?(e.addDeputyIndicator(n),-1===i&&r.push(n)):(e.removeDeputyIndicator(n),i>-1&&r.splice(i,1)),Q.getSetting().updateStorage({selectedDeputyIndics:r});var a=Q.getDrawAction();a.draw(X.ALL,!0),a.setMainLogo()}),Ay(this,"addDeputyIndicator",function(t){var n=e.createIndicatorAndProvider(t),o=n.indic,r=n.provider;Q.getTemplateAction().createIndicatorComps(t);var i=Q.getStorage().indicator[t];i&&o.setParameters(i);var a="".concat(t,".").concat(H);if(r.setIndicator([o]),r.setMinInterval(20),Q.addDataProvider(a,r),At.isInstance(o,Gf)||At.isInstance(o,Sh)){var c="".concat(t,".").concat(W.LEFT,".").concat(Y.CONTENT),u=new js({name:c});Q.addPlotter(c,u)}}),Ay(this,"removeDeputyIndicator",function(t){var e=Q.getAreas(),n=Q.getArea(V.CHART);for(var o in e)e[o].getModuleName()===t&&(n.removeArea(o),Q.removeArea(o));var r=Q.getDataProviders();for(var i in r)r[i].getModuleName()===t&&Q.removeDataProvider(i);var a=Q.getPlotters();for(var c in a)a[c].getModuleName()===t&&Q.removePlotter(c);var u=Q.getStorage().deputyAreaHeight,s=void 0===u?{}:u;delete s[t],Q.getSetting().updateStorage({deputyAreaHeight:s})}),Ay(this,"setIndicatorParameters",function(t,e){var n=e,o=Q.getDataProviders();for(var r in o){var i=o[r],a=i.getIndicators().find(function(e){return e.getName()==t});if(!a)return n;a.setParameters(e),n=a.getParameters(),i.refreshIndicator(),Q.getArea("".concat(i.getModuleName(),".").concat(W.LEFT)).setChanged(!0)}return n}),Ay(this,"createIndicatorAndProvider",function(t){var e,n,o={name:"".concat(t,".").concat(H)};switch(t){case U.MA:e=new Hp,n=new Kt(o);break;case U.EMA:e=new fp,n=new Kt(o);break;case U.VOLUME:e=new Hh,n=new Kt(o);break;case U.MACD:e=new Ip,n=new ce(o);break;case U.DMI:e=new ip,n=new ee(o);break;case U.DMA:e=new $f,n=new Kt(o);break;case U.TRIX:e=new Ih,n=new Kt(o);break;case U.BRAR:e=new Hf,n=new Kt(o);break;case U.VR:e=new Gh,n=new Kt(o);break;case U.OBV:e=new $p,n=new Kt(o);break;case U.EMV:e=new gp,n=new Kt(o);break;case U.RSI:e=new gh,n=new ee(o);break;case U.WR:e=new $h,n=new ee(o);break;case U.SAR:e=new Sh,n=new Kt(o);break;case U.KDJ:e=new xp,n=new ee(o);break;case U.ROC:e=new fh,n=new Kt(o);break;case U.MTM:e=new Gp,n=new Kt(o);break;case U.BOLL:e=new Gf,n=new Kt(o);break;case U.PSY:e=new ih,n=new Kt(o);break;case U.StochRSI:e=new xh,n=new ee(o);break;default:return{}}return{indic:e,provider:n}}),this._indicView=null,this.init()}return function(t,e,n){e&&Cy(t.prototype,e),n&&Cy(t,n)}(t,[{key:"removeMainIndicator",value:function(){var t="".concat(V.MAIN,".").concat(W.LEFT),e="".concat(t,".").concat(Y.INDICATOR);Q.getMainProvider().removeIndicator(),Q.removePlotter(e),Q.getArea(t).setChanged(!0)}},{key:"getIndicatorStorage",value:function(t,e){var n=Q.getStorage().indicator[t]||{};return e?n[e]||{}:n}}]),t}();function xy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ey=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.t,o=void 0===n?-1:n,r=e.v,i=void 0===r?-1:r,a=e.state;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._position={time:o,value:i},this.state=a||L.HIDE}return function(t,e,n){e&&xy(t.prototype,e),n&&xy(t,n)}(t,[{key:"setPosXY",value:function(t,e){var n=Q.getTimeline().xToTime(t),o=Q.getMainProvider().toValue(e);this.setPosTV(n,o)}},{key:"setPosXYNoSnap",value:function(t,e){var n=Q.getTimeline().xToTime(t),o=Q.getMainProvider().toValue(e);this.setPosTV(n,o)}},{key:"setPosTV",value:function(t,e){this._position={time:t,value:e}}},{key:"getPosXY",value:function(){return{x:Q.getTimeline().timeToX(this._position.time),y:Q.getMainProvider().toY(this._position.value)}}},{key:"getPosTV",value:function(){return{t:this._position.time,v:this._position.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"trySelect",value:function(t,e){var n=this.getPosXY();return!(t<n.x-4||t>n.x+4||e<n.y-4||e>n.y+4)&&(this.setState(L.HIGHLIGHT),!0)}}]),t}();function Ty(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var My=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.state,o=e.points;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.drawer=null,this.state=n||N.BEFORE,this.points=o||[],this.step=0,this.type=null}return function(t,e,n){e&&Ty(t.prototype,e),n&&Ty(t,n)}(t,[{key:"isValidMouseXY",value:function(t,e){var n=Q.getMainLeftArea(),o=n.getLeft(),r=n.getTop(),i=n.getRight(),a=n.getBottom();return!(t<o||t>i||e<r||e>a)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"getType",value:function(){return this.type}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoints",value:function(){return this.points}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"onMouseMove",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===N.BEFORE?this.setBeforeDrawPos(t,e):this.state===N.DRAWING?this.setDrawPos(t,e):this.state===N.AFTER&&this.setAfterDrawPos(t,e),!0)}},{key:"onMouseDown",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===N.BEFORE?(this.setDrawPos(t,e),this.setState(N.DRAWING)):this.state===N.DRAWING&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(N.AFTER)),this.oldX=t,this.oldY=e,!0)}},{key:"onMouseDownMove",value:function(t,e){if(!1===this.isValidMouseXY(t,e))return!1;for(var n=0,o=this.points.length;n<o;n++)if(this.points[n].state==L.HIGHLIGHT)return this.setDrawPos(t,e),void this.setState(N.DRAWING);var r=Q.getTimeline(),i=Q.getMainProvider(),a=r.getItemWidth();if(Math.abs(t-this.oldX)<a&&0===Math.abs(e-this.oldY))return!0;var c=r.xToTime(this.oldX),u=i.toValue(this.oldY),s=r.xToTime(t),l=i.toValue(e);this.oldX=t,this.oldY=e;var f=s-c,p=l-u;return this.points.forEach(function(t){var e=t.getPosTV(),n=e.t,o=e.v;t.setPosTV(n+f,o+p)}),!0}},{key:"onMouseUp",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===N.DRAWING&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(N.AFTER)),!0)}},{key:"setBeforeDrawPos",value:function(t,e){this.points.forEach(function(n){n.setPosXY(t,e),n.setState(L.SHOW)})}},{key:"setDrawPos",value:function(t,e){this.points.forEach(function(n){n.getState()===L.HIGHLIGHT&&n.setPosXY(t,e)})}},{key:"setAfterDrawPos",value:function(t,e){0!==this.step&&(this.step-=1),this.points.forEach(function(t){t.setState(L.HIDE)}),0===this.step&&Q.getLineAction().setNormalMode()}},{key:"trySelect",value:function(t,e){for(var n=!1,o=0,r=this.points.length;o<r;o++)if(this.points[o].trySelect(t,e)){this.points[o].setState(L.HIGHLIGHT),n=!0;break}return!0===n?(this.select(),!0):(this.unselect(),!1)}},{key:"select",value:function(){this.points.forEach(function(t){t.getState()===L.HIDE&&t.setState(L.SHOW)})}},{key:"unselect",value:function(){this.setState(N.AFTER),this.points.forEach(function(t){t.getState()!==L.HIDE&&t.setState(L.HIDE)})}},{key:"calcDistance",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y,s=o-c,l=r-u,f=i-c,p=a-u;return Math.abs(s*p-l*f)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"calcGap",value:function(t,e,n){var o=t.sx,r=t.sy,i=t.ex,a=t.ey,c=o-e,u=r-n,s=i-e,l=a-n;return Math.abs(c*l-u*s)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"isWithRect",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y;return o>i?(o+=4,i-=4):(o-=4,i+=4),r>a?(r+=4,a-=4):(r-=4,a+=4),o<=c&&i>=c&&r<=u&&a>=u||(o>=c&&i<=c&&r<=u&&a>=u||(o<=c&&i>=c&&r>=u&&a<=u||o>=c&&i<=c&&r>=u&&a<=u))}}]),t}();function Ry(t){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Iy(t,e){return!e||"object"!==Ry(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ly(t,e,n){return(Ly="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ny(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ny(t){return(Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fy(t,e){return(Fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var By=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Iy(this,Ny(e).call(this,t))).addPoint(new Ey),n.addPoint(new Ey),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fy(t,e)}(e,My),function(t,e,n){e&&Dy(t.prototype,e),n&&Dy(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=1,Ly(Ny(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(L.SHOW),this.getPoint(1).setState(L.HIGHLIGHT)}}]),e}();function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uy(t,e,n){return(Uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yy(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Yy(t){return(Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wy(t,e){return(Wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Vy(e)&&"function"!=typeof e?Xy(t):e}(this,Yy(e).call(this,t))).type=R.SEG,n.drawer=new Yo({drawLineTool:Xy(Xy(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wy(t,e)}(e,By),function(t,e,n){e&&Hy(t.prototype,e),n&&Hy(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Uy(Yy(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Ey;return o.setPosXY(t,n),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),o)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0))}}]),e}();function Gy(t){return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qy(t){return(Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ky(t,e){return(Ky=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var qy=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Gy(e)&&"function"!=typeof e?Jy(t):e}(this,Qy(e).call(this,t))).type=R.ARROW,n.drawer=new Tn({drawLineTool:Jy(Jy(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ky(t,e)}(e,zy),e}();function Zy(t){return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function td(t,e){return!e||"object"!==Zy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ed(t,e,n){return(ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function nd(t){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function od(t,e){return(od=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=td(this,nd(e).call(this,t))).addPoint(new Ey),n.addPoint(new Ey),n.addPoint(new Ey),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&od(t,e)}(e,My),function(t,e,n){e&&$y(t.prototype,e),n&&$y(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=2,ed(nd(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(L.SHOW),this.getPoint(1).setState(L.SHOW),this.getPoint(2).setState(L.HIGHLIGHT)}},{key:"setAfterDrawPos",value:function(t,e){0!==this.step&&(this.step-=1),0===this.step?this.points.forEach(function(t){t.setState(L.HIDE)}):(this.getPoint(0).setState(L.SHOW),this.getPoint(1).setState(L.HIGHLIGHT),this.getPoint(2).setState(L.SHOW)),0===this.step&&Q.getLineAction().setNormalMode()}}]),e}();function id(t){return(id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ad(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cd(t,e,n){return(cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ud(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ud(t){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sd(t,e){return(sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ld(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var fd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==id(e)&&"function"!=typeof e?ld(t):e}(this,ud(e).call(this,t))).type=R.BI_PARALLEL_RAY,n.drawer=new Kn({drawLineTool:ld(ld(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sd(t,e)}(e,rd),function(t,e,n){e&&ad(t.prototype,e),n&&ad(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===cd(ud(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return(s.ex>s.sx&&t>s.sx-4||s.ex<s.sx&&t<s.sx+4||l.ex>l.sx&&t>l.sx-4||l.ex<l.sx&&t<l.sx+4)&&(!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)&&(this.select(),!0))}}]),e}();function pd(t){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yd(t,e,n){return(yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function dd(t){return(dd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bd(t,e){return(bd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==pd(e)&&"function"!=typeof e?gd(t):e}(this,dd(e).call(this,t))).type=R.BI_PARALLEL,n.drawer=new Yn({drawLineTool:gd(gd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bd(t,e)}(e,rd),function(t,e,n){e&&hd(t.prototype,e),n&&hd(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===yd(dd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)}}]),e}();function md(t){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wd(t,e,n){return(wd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Od(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Od(t){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sd(t,e){return(Sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var kd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==md(e)&&"function"!=typeof e?Pd(t):e}(this,Od(e).call(this,t))).type=R.FIB_FANS,n.drawer=new eo({drawLineTool:Pd(Pd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sd(t,e)}(e,By),function(t,e,n){e&&_d(t.prototype,e),n&&_d(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===wd(Od(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Ey;o.setPosXY(t,n);for(var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,a=this.getPoint(1).getPosXY().x,c=this.getPoint(1).getPosXY().y,u=Q.getMainLeftArea(),s={left:u.getLeft(),top:u.getTop(),right:u.getRight(),bottom:u.getBottom()},l=[0,38.2,50,61.8],f=0;f<l.length;f++){var p={x:r,y:i},h={x:a,y:i+(100-l[f])/100*(c-i)},y=this.drawer.getRectCrossPt(s,p,h),d=Math.pow(y[0].x-r,2)+Math.pow(y[0].y-i,2)>Math.pow(y[0].x-a,2)+Math.pow(y[0].y-c,2)?{x:y[0].x,y:y[0].y}:{x:y[1].x,y:y[1].y};if(!(d.x>r&&t<r)&&!(d.x<r&&t>r)){var b=new Ey;b.setPosXY(r,i);var g=new Ey;if(g.setPosXY(d.x,d.y),!(this.calcDistance(b,g,o)>4))return this.select(),!0}}return!1}}]),e}();function Cd(t){return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ad(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jd(t,e,n){return(jd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function xd(t){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ed(t,e){return(Ed=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Md=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Cd(e)&&"function"!=typeof e?Td(t):e}(this,xd(e).call(this,t))).type=R.FIB_RETRACE,n.drawer=new ao({drawLineTool:Td(Td(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ed(t,e)}(e,By),function(t,e,n){e&&Ad(t.prototype,e),n&&Ad(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===jd(xd(e.prototype),"trySelect",this).call(this,t,n))return!0;for(var o=this.getPoint(0).getPosXY().y,r=this.getPoint(1).getPosXY().y,i=0;i<I.length;i++){var a=o+(100-I[i])/100*(r-o);if(a<n+4&&a>n-4)return this.select(),!0}return!1}}]),e}();function Rd(t){return(Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Id(t,e,n){return(Id="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ld(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ld(t){return(Ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nd(t,e){return(Nd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Bd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Rd(e)&&"function"!=typeof e?Fd(t):e}(this,Ld(e).call(this,t))).type=R.H_RAY,n.drawer=new po({drawLineTool:Fd(Fd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nd(t,e)}(e,By),function(t,e,n){e&&Dd(t.prototype,e),n&&Dd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===L.HIGHLIGHT)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===L.HIGHLIGHT&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===Id(Ld(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.select(),!0)))}}]),e}();function Vd(t){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ud(t,e,n){return(Ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Yd(t){return(Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wd(t,e){return(Wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Vd(e)&&"function"!=typeof e?Xd(t):e}(this,Yd(e).call(this,t))).type=R.H_SEG,n.drawer=new mo({drawLineTool:Xd(Xd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wd(t,e)}(e,By),function(t,e,n){e&&Hd(t.prototype,e),n&&Hd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===L.HIGHLIGHT)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===L.HIGHLIGHT&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===Ud(Yd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(r>i&&(t>r+4||t<i-4))&&(!(r<i&&(t<r-4||t>i+4))&&(this.select(),!0)))}}]),e}();function Gd(t){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kd(t,e,n){return(Kd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Jd(t){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qd(t,e){return(qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var $d=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Gd(e)&&"function"!=typeof e?Zd(t):e}(this,Jd(e).call(this,t))).type=R.H_STRAIGHT,n.drawer=new ko({drawLineTool:Zd(Zd(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qd(t,e)}(e,By),function(t,e,n){e&&Qd(t.prototype,e),n&&Qd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==L.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===Kd(Jd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().y;return!(n>o+4||n<o-4)&&(this.select(),!0)}}]),e}();function tb(t){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nb(t,e,n){return(nb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ob(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ob(t){return(ob=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rb(t,e){return(rb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ab=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==tb(e)&&"function"!=typeof e?ib(t):e}(this,ob(e).call(this,t))).type=R.PRICE,n.drawer=new To({drawLineTool:ib(ib(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rb(t,e)}(e,zy),function(t,e,n){e&&eb(t.prototype,e),n&&eb(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==L.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===nb(ob(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y;return!(t<o-4)&&(!(n>=r+4||n<=r-4)&&(this.select(),!0))}}]),e}();function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ub(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sb(t,e,n){return(sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function lb(t){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fb(t,e){return(fb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var hb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==cb(e)&&"function"!=typeof e?pb(t):e}(this,lb(e).call(this,t))).type=R.RAY,n.drawer=new No({drawLineTool:pb(pb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fb(t,e)}(e,By),function(t,e,n){e&&ub(t.prototype,e),n&&ub(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===sb(lb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Ey;o.setPosXY(t,n);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)))}}]),e}();function yb(t){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function db(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bb(t,e,n){return(bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function gb(t){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vb(t,e){return(vb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _b=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==yb(e)&&"function"!=typeof e?mb(t):e}(this,gb(e).call(this,t))).type=R.STRAIGHT,n.drawer=new Ko({drawLineTool:mb(mb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vb(t,e)}(e,By),function(t,e,n){e&&db(t.prototype,e),n&&db(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===bb(gb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Ey;return o.setPosXY(t,n),this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)}}]),e}();function wb(t){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ob(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sb(t,e,n){return(Sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Pb(t){return(Pb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kb(t,e){return(kb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ab=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==wb(e)&&"function"!=typeof e?Cb(t):e}(this,Pb(e).call(this,t))).type=R.TRI_PARALLEL,n.drawer=new er({drawLineTool:Cb(Cb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kb(t,e)}(e,rd),function(t,e,n){e&&Ob(t.prototype,e),n&&Ob(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Sb(Pb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s=o-(o-i+(o-c)),l=r-(r-a+(r-u)),f={sx:o,sy:r,ex:c,ey:u},p={sx:i,sy:a,ex:s,ey:l},h=i-o,y=a-r,d=s-c,b=l-u,g={sx:Math.abs(h-o),sy:Math.abs(y-r),ex:Math.abs(d-c),ey:Math.abs(b-u)};return!(this.calcGap(f,t,n)>4&&this.calcGap(p,t,n)>4&&this.calcGap(g,t,n)>4)&&(this.select(),!0)}}]),e}();function jb(t){return(jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Eb(t,e,n){return(Eb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Tb(t){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mb(t,e){return(Mb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Db=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==jb(e)&&"function"!=typeof e?Rb(t):e}(this,Tb(e).call(this,t))).type=R.V_STRAIGHT,n.drawer=new cr({drawLineTool:Rb(Rb(n))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mb(t,e)}(e,By),function(t,e,n){e&&xb(t.prototype,e),n&&xb(t,n)}(e,[{key:"setDrawPos",value:function(t,e){var n=this;this.points.forEach(function(o){o.state!==L.HIDE&&n.points[0].setPosXY(t,e)})}},{key:"trySelect",value:function(t,n){if(!0===Eb(Tb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x;return!(t>o+4||t<o-4)&&(this.select(),!0)}}]),e}();n(9);function Ib(t){return(Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nb(t,e){return!e||"object"!==Ib(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fb(t){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bb(t,e){return(Bb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vb=[R.SHOW_ALL,R.HIDE_ALL,R.HIDE,R.DELETE_ALL,R.DELETE],Hb=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nb(this,Fb(e).call(this,t))).bindEvent(),n.setLanguage(),setTimeout(function(){n.switchOperation()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bb(t,e)}(e,_),function(t,e,n){e&&Lb(t.prototype,e),n&&Lb(t,n)}(e,[{key:"bindEvent",value:function(){var t=this,e=this.el[0];this.el.on("click",function(n){var o=h(n.target).closest("li");if(o){var r=e.clientHeight,i=e.scrollTop;if(o.hasClass("arrow-top"))e.scrollTop=i-r;else if(o.hasClass("arrow-bottom"))e.scrollTop=i+r+r;else{var a=o.attr("key");if(Vb.includes(a))return t.emit("draw-operation",a),void t.switchOperation(a);t.selected(a),t.emit("draw-switch",a)}}});var n=h(".popover",this.el),o={x:0,y:0};this.el.on("mousemove",function(e){o={x:e.x,y:e.y};var r=h(e.target).closest("li");if(n.addClass("hide"),r){var i=r.attr("name");if(i){n.removeClass("hide").removeClass("bottom").addClass("right"),h(".title",n).html(i);var a=t.el[0].getBoundingClientRect(),c=n[0].getBoundingClientRect(),u=r[0].getBoundingClientRect(),s=a.right-a.left,l=u.top-a.top-(c.height-u.height)/2;r.parent().hasClass("draw-operation")&&(n.removeClass("bottom").addClass("bottom"),s=u.left-a.left-(c.width-u.width)/2,l=u.bottom-a.top),n.css({left:"".concat(s,"px"),top:"".concat(l,"px")})}}}).on("mouseleave",function(){n.addClass("hide")}),this.el.on("scroll",function(){y(".tool-panel li").each(function(t){var e=t.getBoundingClientRect(),r=o,i=r.x,a=r.y,c=e.left,u=e.right,s=e.top,l=e.bottom;if(i>=c&&i<=u&&a>=s&&a<=l){var f=h(t).attr("name");f&&h(".title",n).html(f)}}),t.resize()}),new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(){t.resize()}).observe(this.el[0],{attributes:!0})}},{key:"resize",value:function(){var t=h(".tool-panel",this.el),e=y(".arrow",t),n=this.el[0],o=n.clientWidth,r=n.clientHeight,i=n.scrollHeight,a=n.scrollTop;0==a?t.removeClass("hide-top"):t.addClass("hide-top"),a+r>=i?t.removeClass("hide-bottom"):t.addClass("hide-bottom"),0==o?e.addClass("hide"):e.removeClass("hide")}},{key:"setLanguage",value:function(){var t=us(Q.getConfig().language);y("li[key]").each(function(e){var n=(e=h(e)).attr("key");e.attr("name",D[n]?t.ctools[D[n].lang]:t.ctools[n])})}},{key:"selected",value:function(t){y("li",this.el).removeClass("selected"),h("li[key=".concat(t,"]"),this.el).addClass("selected"),this.switchOperation()}},{key:"showOperation",value:function(){h(".draw-operation",this.el).removeClass("hide")}},{key:"hideOperation",value:function(){h(".draw-operation",this.el).addClass("hide")}},{key:"switchOperation",value:function(t){var e=Q.getLineAction(),n=0===e.getLineCount()&&0!==e.getHideLineCount(),o=h(".tool-panel li[key=".concat(R.HIDE_ALL,"]"),this.el),r=h(".tool-panel li[key=".concat(R.SHOW_ALL,"]"),this.el),i=h(".popover .title",this.el);if(n?(o.addClass("hide"),r.removeClass("hide")):(o.removeClass("hide"),r.addClass("hide")),t===R.SHOW_ALL){var a=o.attr("name");i.html(a)}if(t===R.HIDE_ALL&&n){var c=r.attr("name");i.html(c)}}},{key:"render",value:function(){var t=[],e=Q.getCursorType(),n=R.FIB_FANS,o=[R.SHOW_ALL,R.HIDE_ALL,R.DELETE_ALL];Object.keys(D).forEach(function(r){var i=D[r],a="";r===n&&(a+=" tool-bottom-end"),o.includes(r)&&(a+=" tool-bottom"),e==r&&(a+=" selected");var c='key="'.concat(r,'" class="').concat(a,'"');t.push("<li ".concat(c,'><i class="iconfont ').concat(i.className,'"></i></li>'))});var r='<ul class="tool-panel"><li class="arrow arrow-top"><i class="iconfont icon-fold"></i></li>'.concat(t.join(""),'<li class="arrow arrow-bottom"><i class="iconfont icon-Unfold"></i></li></ul>'),i='<ul class="draw-operation hide"><li key="'.concat(R.HIDE,'"><i class="iconfont icon-Mul_show"></i></li><li key="').concat(R.DELETE,'"><i class="iconfont icon-Mul_delete"></i></li></ul>');this.el.html(r+i+'<div class="popover hide"><div class="title"></div><div class="triangle"></div><div class="split"></div></div>')}}]),e}();function Ub(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xb=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wb(this,"init",function(){var t=Q.getKlineSQ();e._drawView=new Hb({el:h(".draw-line-box",t)}),e._drawView.on("draw-switch",function(t){e.unselect(),e.setRunningMode(R[t]),Q.getDrawAction().draw(X.OVERLY_CANVAS)}),e._drawView.on("draw-operation",e.updateLines)}),Wb(this,"destroy",function(){e._drawView.off()}),Wb(this,"resize",function(){e._drawView.resize()}),Wb(this,"showOperation",function(){e._drawView.showOperation(),Q.getMouseAction().showCursor()}),Wb(this,"hideOperation",function(){e._drawView.hideOperation(),e.unselect(),Q.getMainLeftArea().onMouseLeave()}),Wb(this,"updateLines",function(t){switch(t){case R.SHOW_ALL:e.showAll();break;case R.HIDE:e.hideSelect();break;case R.HIDE_ALL:e.hideAll();break;case R.DELETE:e.delSelected();break;case R.DELETE_ALL:e.delAll()}e.hideOperation(),e.setNormalMode(),Q.getDrawAction().draw(X.OVERLY_CANVAS)}),Wb(this,"switchDrawLine",function(t){e.hideOperation(),Q.getSetting().updateStorage({showLineTool:t});var n=h(".draw-line-box",Q.getKlineSQ()),o=t?"auto":"0px";n.css({width:o}),Q.getDrawAction().resize()}),Wb(this,"setNormalMode",function(){e.saveLines();var t=Q.getCursorType();e._drawView.selected(t);var n=Q.getMouseAction();t!==R.CURSOR?n.hideCursor():n.showCursor()}),Wb(this,"setRunningMode",function(t){e.hideOperation();var n=e.getCurrent();null!==n&&n.state!==N.AFTER&&e.delCurrent();var o=Q.getConfig().maxToolCount;if(e.getLineCount()+e.getHideLineCount()>=o)e.setNormalMode();else{if(t===R.CURSOR)return Q.getMouseAction().showCursor(),void Q.setCursorType(t);if(t!==R.CROSS_CURSOR){var r=e.createLine(t);r&&e.addLine(r)}else Q.setCursorType(t)}}),Wb(this,"unselect",function(){var t=e.getSelected();return t?(t.unselect(),e.selected=-1,t):null}),Wb(this,"delSelected",function(){-1!=e.selected&&(e.lines.splice(e.selected,1),e.selected=-1,e.setNormalMode())}),Wb(this,"delCurrent",function(){e.lines.splice(e.getLineCount()-1,1)}),Wb(this,"delAll",function(){e.lines=[],e.hideLines=[],e.selected=-1}),Wb(this,"hideSelect",function(){var t=e.getSelected();t.unselect(),e.hideLines.push(t),e.delSelected()}),Wb(this,"hideAll",function(){e.hideLines=Ub(e.lines).concat(Ub(e.hideLines)),e.lines=[],e.selected=-1,e.hideLines.forEach(function(t){t.unselect()})}),Wb(this,"showAll",function(){e.lines=Ub(e.lines).concat(Ub(e.hideLines)),e.hideLines=[],e.selected=-1,e.lines.forEach(function(t){t.unselect()})}),Wb(this,"getLineCount",function(){return e.lines.length}),Wb(this,"addLine",function(t){e.lines.push(t)}),Wb(this,"getLine",function(t){return t<e.lines.length&&t>=0?e.lines[t]:null}),Wb(this,"createLine",function(t,e){switch(t){case R.ARROW:return new qy(e);case R.BI_PARALLEL:return new vd(e);case R.BI_PARALLEL_RAY:return new fd(e);case R.FIB_FANS:return new kd(e);case R.FIB_RETRACE:return new Md(e);case R.H_RAY:return new Bd(e);case R.H_SEG:return new zd(e);case R.H_STRAIGHT:return new $d(e);case R.PRICE:return new ab(e);case R.RAY:return new hb(e);case R.SEG:return new zy(e);case R.STRAIGHT:return new _b(e);case R.TRI_PARALLEL:return new Ab(e);case R.V_STRAIGHT:return new Db(e);default:return null}}),Wb(this,"saveLines",function(){var t=e.lines.length,n=Ub(e.lines).concat(Ub(e.hideLines)),o=Q.getStorage().line,r=void 0===o?{}:o;r[Q.getConfig().symbol]=n.map(function(e,n){var o=e.getType();return{points:e.getPoints().map(function(t){return t.getPosTV()}),type:o,hide:n>=t}}),Q.getSetting().updateStorage({line:r})}),Wb(this,"resetLines",function(){e.hideOperation(),e.lines=[],e.hideLines=[];var t=Q.getStorage().line;((void 0===t?{}:t)[Q.getConfig().symbol]||[]).forEach(function(t){var n=t.type,o=t.hide,r=t.points,i=(void 0===r?[]:r).map(function(t){return new Ey(t)}),a=e.createLine(n,{points:i,state:N.AFTER});a&&i.length&&(o?e.hideLines:e.lines).push(a)})}),Wb(this,"getCurrent",function(){return e.getLine(e.getLineCount()-1)}),Wb(this,"getSelected",function(){return e.getLine(e.selected)}),Wb(this,"getHideLineCount",function(){return e.hideLines.length}),Wb(this,"isDrawing",function(){var t=e.getSelected();if(t)return t.getState()===N.DRAWING;var n=e.getCurrent();return n&&n.getState()!==N.AFTER}),this.selected=-1,this.lines=[],this.hideLines=[],this._drawView=null,this.init()}return function(t,e,n){e&&Yb(t.prototype,e),n&&Yb(t,n)}(t,[{key:"onMouseMove",value:function(t,e){if(-1===this.selected){var n=this.getCurrent();if(n&&n.getState()!==N.AFTER)return n.onMouseMove(t,e)}else{var o=this.getSelected();if(o.getState()===N.DRAWING)return o.onMouseMove(t,e)}return this.trySelect(t,e),!1}},{key:"onMouseDown",value:function(t,e){if(this._mouseDownMove=!1,-1===this.selected){var n=this.getCurrent();if(n&&n.getState()!==N.AFTER)return n.onMouseDown(t,e)}else{var o=this.getSelected();if(o.getState()!==N.BEFORE)return o.onMouseDown(t,e)}return!1}},{key:"onMouseDownMove",value:function(t,e){if(this._mouseDownMove=!0,-1===this.selected){var n=this.getCurrent();return!(!n||n.getState()!==N.DRAWING)&&n.onMouseDownMove(t,e)}var o=this.getSelected();if(o.getState()!==N.BEFORE){if(!0===o.onMouseDownMove(t,e))for(var r=o.points,i=0;i<r.length;i++)if(r[i].state===L.HIGHLIGHT||r[i].state===L.SHOW)return!0;return!0}}},{key:"onMouseUp",value:function(t,e){if(!0===this._mouseDownMove){var n=this.getSelected();if(n&&n.getState()!==N.BEFORE)return this.unselect(),this.saveLines(),n.onMouseUp(t,e)}if(-1!==this.selected){var o=this.trySelect(t,e);return!!o&&(this.saveLines(),o.onMouseUp(t,e),!0)}var r=this.getCurrent();if(r){if(r.getState()===N.DRAWING)return!0;if(!r.isValidMouseXY(t,e))return!1;if(r.trySelect(t,e))return!0}return!1}},{key:"trySelect",value:function(t,e,n){if(n=n||this.getSelected())return n.trySelect(t,e)?n:(n.unselect(),this.selected=-1,null);for(var o=0,r=this.lines.length;o<r;o++){var i=this.lines[o];if(i.trySelect(t,e))return this.selected=o,i}return null}}]),t}();function zb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Gb=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],Qb=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],Kb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._updated=!1,this._innerLeft=0,this._innerWidth=0,this._scale=Q.getConfig().candleScale||6,this._maxItemCount=0,this._maxIndex=0,this._firstIndex=0,this._selectedIndex=-1,this._startX=-1,this._startFirstIndex=-1}return function(t,e,n){e&&zb(t.prototype,e),n&&zb(t,n)}(t,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return Gb[this._scale]}},{key:"getSpaceWidth",value:function(){return Qb[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._innerLeft+this._innerWidth-this.getColumnWidth()*this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this.getRightIndex(),this._maxIndex)}},{key:"getRightIndex",value:function(){return this._firstIndex+this._maxItemCount-1}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxItemCount",value:function(){if(0!==this._maxItemCount)return this._maxItemCount;var t=Q.getMainLeftArea();this._innerLeft=t.getLeft()+4;var e=Math.max(0,t.getWidth()-12);return this.calcColumnCount(e)}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this.getFirstColumnLeft())}},{key:"toColumnLeft",value:function(t){return this.getFirstColumnLeft()+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"xToTime",value:function(t){var e=this.toIndex(t);return Q.getDataSource().getTimeAt(e)}},{key:"timeToX",value:function(t){var e=Q.getDataSource();if(e.getDataSize()<2)return-1;var n=e.getTimeAt(0),o=e.getTimeAt(1)-n,r=Math.floor((t-n)/o);return this.toItemCenter(r)}},{key:"selectAt",value:function(t){this._selectedIndex=this.toIndex(t)}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"validateFirstIndex",value:function(t){return Math.max(Math.min(t,this._maxIndex),0)}},{key:"layout",value:function(){var t=Q.getMainLeftArea();this._innerLeft=t.getLeft()+4;var e=Math.max(0,t.getWidth()-12);this._innerWidth!==e&&(this._innerWidth=e,this._maxItemCount=this.calcColumnCount(e),this._updated=!0)}},{key:"update",value:function(){this.layout();var t=Q.getDataSource(),e=t.getDataMode(),n=t.getPushSize();if(e!==B.NOTHING&&(e!==B.RIGHT_UPDATE||0!==n)){switch(e){case B.REFRESH:var o=t.getDataSize();this._firstIndex=Math.max(o-this._maxItemCount,0),this._selectedIndex=-1;break;case B.LEFT_UPDATE:var r=Math.max(t.getLeftUpdateSize()-5,0);this._firstIndex+=r,this._selectedIndex>=0&&(this._selectedIndex+=r);break;case B.RIGHT_UPDATE:var i=this.getRightIndex();this._maxIndex===i&&(this._firstIndex+=n,this._selectedIndex>=0&&(this._selectedIndex+=n))}this._updated=!0,this._maxIndex=t.getLastIndex()}}},{key:"updateData",value:function(){0===this._firstIndex&&Q.getDataFeed().getKlineData({mode:B.LEFT_UPDATE})}},{key:"isMove",value:function(){return this._isMove}},{key:"onMouseDown",value:function(t){this._isMove=!1,this._startX=t,this._startFirstIndex=this._firstIndex}},{key:"onMouseMove",value:function(t){this._isMove=!0,this._firstIndex=this.validateFirstIndex(this._startFirstIndex-this.calcColumnCount(t-this._startX)),this._selectedIndex=this._selectedIndex+this._firstIndex-this._startFirstIndex,this._updated=!0,this.updateData()}},{key:"onMouseUp",value:function(){this._isMove=!1}},{key:"onMouseWheel",value:function(t){this.onMouseDown(0),this.onMouseMove(-t*(t<0?3:1)),this.onMouseUp()}},{key:"scale",value:function(t){this._scale=Math.min(Math.max(this._scale+t,0),Gb.length-1);var e=this.calcColumnCount(this._innerWidth),n=this.getLastIndex();this._firstIndex=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*e/this._maxItemCount)),this._maxItemCount=e;var o=Q.getMouseAction().getMousePosition().x;this._selectedIndex=gt.isMobile?-1:this.toIndex(o),this._updated=!0,this.updateData()}}]),t}();function Jb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var qb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadTemplate()}return function(t,e,n){e&&Jb(t.prototype,e),n&&Jb(t,n)}(t,[{key:"loadTemplate",value:function(){var t=new Sf({name:V.FRAME,gridColor:"Grid1"});Q.setFrame(t),Q.addArea(V.FRAME,t);var e="".concat(V.TIMELINE,".").concat(W.BOTTOM),n=new ff({name:e,areaLocation:W.BOTTOM});Q.addArea(e,n),t.addArea(n);var o=new Ef({name:V.CHART,areaLocation:W.FILL});Q.addArea(V.CHART,o),t.addArea(o),this.chartAreaGroupComps()}},{key:"chartAreaGroupComps",value:function(){this.createMainComps(),this.createTimelineComps()}},{key:"createMainComps",value:function(){var t=Q.getArea(V.CHART),e="".concat(V.MAIN,".").concat(W.LEFT),n=new ql({name:e});Q.addArea(e,n),t.addArea(n);var o="".concat(V.MAIN,".").concat(W.RIGHT),r=new of({name:o});Q.addArea(o,r),t.addArea(r);var i="".concat(V.MAIN,".").concat(H),a=new Kt({name:i});Q.addDataProvider(i,a),a.setPaddingTop(28),a.setPaddingBottom(12);var c="".concat(e,".").concat(Y.BACKGROUND),u=new as({name:c});Q.addPlotter(c,u),c="".concat(e,".").concat(Y.GRID),u=new tn({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.CONTENT),u=new mn({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.TRADE_POINT),u=new kn({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.MAX_MIN),u=new Os({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.INFO),u=new bs({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.SELECTION),u=new Zs({name:c}),Q.addPlotter(c,u),c="".concat(e,".").concat(Y.DRAW_LINE),u=new Qe({name:c}),Q.addPlotter(c,u),c="".concat(o,".").concat(Y.BACKGROUND),u=new Ds({name:c}),Q.addPlotter(c,u),c="".concat(o,".").concat(Y.GRID),u=new cn({name:c}),Q.addPlotter(c,u),c="".concat(o,".").concat(Y.CONTENT),u=new Vs({name:c}),Q.addPlotter(c,u),c="".concat(o,".").concat(Y.SELECTION),u=new zs({name:c}),Q.addPlotter(c,u),c="".concat(o,".").concat(Y.LAST),u=new ts({name:c}),Q.addPlotter(c,u)}},{key:"createIndicatorComps",value:function(t){var e=Q.getArea(V.CHART),n="".concat(t,".").concat(W.LEFT),o=new Bl({name:n});Q.addArea(n,o),e.addArea(o);var r="".concat(t,".").concat(W.RIGHT),i=new Xl({name:r});Q.addArea(r,i),e.addArea(i);var a="".concat(n,".").concat(Y.BACKGROUND),c=new as({name:a});Q.addPlotter(a,c),a="".concat(n,".").concat(Y.GRID),c=new tn({name:a}),Q.addPlotter(a,c),a="".concat(n,".").concat(Y.INDICATOR),c=new Qu({name:a}),Q.addPlotter(a,c),a="".concat(n,".").concat(Y.INFO),c=new hr({name:a}),Q.addPlotter(a,c),a="".concat(n,".").concat(Y.SELECTION),c=new Zs({name:a}),Q.addPlotter(a,c),a="".concat(r,".").concat(Y.BACKGROUND),c=new Ds({name:a}),Q.addPlotter(a,c),a="".concat(r,".").concat(Y.CONTENT),c=new Vs({name:a}),Q.addPlotter(a,c),a="".concat(r,".").concat(Y.SELECTION),c=new zs({name:a}),Q.addPlotter(a,c)}},{key:"createTimelineComps",value:function(){var t=new Kb;Q.setTimeline(t);var e="".concat(V.TIMELINE,".").concat(W.BOTTOM),n="".concat(e,".").concat(Y.BACKGROUND),o=new rl({name:n});Q.addPlotter(n,o),n="".concat(e,".").concat(Y.CONTENT),o=new fl({name:n}),Q.addPlotter(n,o),n="".concat(e,".").concat(Y.SELECTION),o=new gl({name:n}),Q.addPlotter(n,o)}}]),t}();function Zb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tg=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$b(this,"init",function(){e._mouseDrag=!1,e._capturingMouseArea=null,e._selectedFrame=null,e._mousePosition={},e._showCrossCursor=!1,e.registerEvent()}),$b(this,"destroy",function(){Q.getDocumentSQ().off(),Q.getOverlayCanvasSQ().off()}),$b(this,"showCursor",function(t){e.hideCrossCursor(),Q.getOverlayCanvas().style.cursor=t||"default"}),$b(this,"hideCursor",function(){Q.getOverlayCanvas().style.cursor="none"}),$b(this,"showCrossCursor",function(t,n,o){e.hideCursor(),e.hideCrossCursor(),e._showCrossCursor=!0;var r=t.getModuleName();Q.getModuleProvider(r).selectAt(o),Q.getTimeline().selectAt(n)}),$b(this,"hideCrossCursor",function(){e._showCrossCursor=!1;var t=Q.getDataProviders();for(var n in t)t[n].unselect();Q.getTimeline().unselect()}),$b(this,"updateCursor",function(t,n,o){switch(Q.getCursorType()){case R.CURSOR:e.showCursor();break;case R.CROSS_CURSOR:e.showCrossCursor(t,n,o);break;default:e.hideCursor()}}),$b(this,"onMouseDown",function(t){t.preventDefault();var n=At.getMousePosition(t),o=n.x,r=n.y,i=Q.getFrame().contains(o,r);if(i)for(var a,c=i.length-1;c>=0;c--)if(a=(a=i[c]).onMouseDown(o,r,t.button))return void(e._capturingMouseArea=a)}),$b(this,"onMouseUp",function(t){t.preventDefault();var n=At.getMousePosition(t),o=n.x,r=n.y,i=Q.getConfig().enableWheelScale,a=Q.getTimeline().isMove();if(e._capturingMouseArea&&!e._capturingMouseArea.onMouseUp(o,r)&&!i&&!a){var c=Q.getOverlayCanvasSQ();e._selectedFrame?(c.off("mousewheel"),e._selectedFrame.select(null),e._selectedFrame=null):(c.on("mousewheel",e.onMouseWheel),e._selectedFrame=Q.getFrame(),e._selectedFrame.select(e._capturingMouseArea))}e._capturingMouseArea=null,Q.getDrawAction().draw(X.ALL)}),$b(this,"onMouseMove",function(t){t.preventDefault();var n=At.getMousePosition(t),o=n.x,r=n.y;if(e._mousePosition={x:o,y:r},e._capturingMouseArea)return e._capturingMouseArea.onMouseMove(o,r),void Q.getDrawAction().draw(X.ALL);var i=Q.getFrame().contains(o,r);if(i){for(var a=i.length-1;a>=0&&!i[a].onMouseMove(o,r);a--);Q.getDrawAction().draw(X.OVERLY_CANVAS)}}),$b(this,"onMouseLeave",function(t){t.preventDefault();var n=At.getMousePosition(t)||e._mousePosition,o=n.x,r=n.y;e._capturingMouseArea&&(e._capturingMouseArea.onMouseLeave(o,r),e._capturingMouseArea=null),e.hideCrossCursor(),Q.getDrawAction().draw(X.OVERLY_CANVAS);var i=Q.getArea(V.CHART),a=i.getLeft(),c=i.getRight(),u=i.getTop(),s=i.getBottom();(o<=a||o>=c||r<=u||r>=s)&&Q.getOrderInputAction().removeFastBtn()}),$b(this,"onTouchScale",function(t){t.preventDefault();var n=Zb(t.touches,2),o=n[0],r=n[1],i=At.getPositionDistance(o.pageX,o.pageY,r.pageX,r.pageY);if(0!==e._distance){var a=-1;i>e._distance&&(a=1),e._distance=i,Q.getDrawAction().scale(a)}else e._distance=i}),$b(this,"onMouseWheel",function(t){t.preventDefault(),e._mouseWheelEvent=t;var n=Q.getDrawAction(),o=t.deltaX,r=t.deltaY,i=t.wheelDelta;Math.abs(o)>Math.abs(r)?Q.getTimeline().onMouseWheel(o):n.scale(i>0?1:-1),n.draw(X.ALL)}),$b(this,"onKeyDown",function(t){46!==t.keyCode&&8!==t.keyCode||Q.getLineAction().updateLines(R.DELETE)}),$b(this,"onVisibilitychange",function(){"visible"===document.visibilityState&&Q.getDrawAction().draw(X.ALL,!0)}),$b(this,"registerEvent",function(){Q.getDocumentSQ().on("visibilitychange",e.onVisibilitychange),Q.getOverlayCanvasSQ().on("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),gt.isMobile?e.registerAppEvent():e.registerPCEvent()}),$b(this,"registerAppEvent",function(){h(Q.getOverlayCanvas()).on("touchstart",function(t){clearTimeout(e._touchMoving),e.onMouseDown(t);var n=t.touches;1===(void 0===n?[]:n).length&&(e._startPosition=At.getMousePosition(t),e._touchMoving=setTimeout(function(){e.onMouseLeave(t),e.onMouseMove(t)},500)),t.preventDefault()}).on("touchmove",function(t){var n=t.touches,o=void 0===n?[]:n;if(1===o.length){var r=At.getMousePosition(t),i=e._startPosition;if(At.getPositionDistance(r.x,r.y,i.x,i.y)<5)return;e.onMouseMove(t)}2===o.length&&e.onTouchScale(t),clearTimeout(e._touchMoving)}).on("touchend",function(t){clearTimeout(e._touchMoving),e._distance=0,e._capturingMouseArea&&e.onMouseLeave(t)})}),$b(this,"registerPCEvent",function(){var t=Q.getOverlayCanvasSQ();t.on("mousedown",e.onMouseDown).on("mousemove",e.onMouseMove).on("mouseleave",e.onMouseLeave).on("mouseup",e.onMouseUp),Q.getDocumentSQ().on("keydown",e.onKeyDown),Q.getConfig().enableWheelScale&&t.on("mousewheel",e.onMouseWheel)}),$b(this,"isShowCrossCursor",function(){return e._showCrossCursor}),$b(this,"getMousePosition",function(){return e._mousePosition}),$b(this,"getCapturingMouseArea",function(){return e._capturingMouseArea}),this.init()},eg=n(1),ng=n.n(eg);n(10);function og(t){return(og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rg(t){return(rg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ig(t,e){return(ig=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ag(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ug=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cg(ag(ag(n=function(t,e){return!e||"object"!==og(e)&&"function"!=typeof e?ag(t):e}(this,rg(e).call(this,t)))),"bindEvent",function(){h(".btn-close",n.el).on("click",n.hide),h(".btn-cancel",n.el).on("click",n.hide),h(".btn-confirm",n.el).on("click",n.confirmEvent),y(".trade-setting-item",n.el).each(function(t){h(t).on("click",n.switchCheckbox)})}),cg(ag(ag(n)),"confirmEvent",function(){var t={showOrderInput:h("#showOrderInput",n.el).hasClass("checked"),showOrderLine:h("#showOrderLine",n.el).hasClass("checked"),showOrderRecord:h("#showOrderRecord",n.el).hasClass("checked"),showPositionLine:h("#showPositionLine",n.el).hasClass("checked")},e={oldParams:n.unSettingParams,params:t};n.emit("onTradeSettingChange",e),n.hide()}),cg(ag(ag(n)),"visible",function(){if(n.show()){n.el.html(ng.a);var t=Q.getConfig().language;n.lang=us(t);var e=us(t),o=e.trade_settings,r=e.cancel,i=e.confirm;h(".dialog-title",n.el).html(o.title),h(".show-order-input-text",n.el).html(o.show_order_input),h(".show-order-line-text",n.el).html(o.show_order_line),h(".show-position-line-text",n.el).html(o.show_position_line),h(".show-order-record-text",n.el).html(o.show_order_record),h(".btn-cancel",n.el).html(r),h(".btn-confirm",n.el).html(i);var a=Q.getStorage().trade;n.unSettingParams=JSON.parse(JSON.stringify(a));var c=a.showOrderInput,u=a.showOrderLine,s=a.showOrderRecord,l=a.showPositionLine;c&&h("#showOrderInput",n.el).addClass("checked"),u&&h("#showOrderLine",n.el).addClass("checked"),s&&h("#showOrderRecord",n.el).addClass("checked"),l&&h("#showPositionLine",n.el).addClass("checked"),n.bindEvent()}}),cg(ag(ag(n)),"switchCheckbox",function(t){var e=h(t.target).hasClass("trade-setting-item")?h(t.target):h(t.target).parent();e.hasClass("checked")?e.removeClass("checked"):e.addClass("checked")}),cg(ag(ag(n)),"switchVisible",function(t){t?n.visible():n.hide()}),n.key="",n.unSettingParams={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ig(t,e)}(e,gy),e}();function sg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lg=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),sg(this,"init",function(t){e.setTradeSetting(t),e._tradeSettingView=new ug,e._tradeSettingView.on("onTradeSettingChange",function(t){e.setTradeSettingEvent(t)})}),sg(this,"destroy",function(){e._tradeSettingView.off()}),sg(this,"switchSettings",function(t){e._tradeSettingView.switchVisible(t)}),sg(this,"setTradeSetting",function(t){Q.getConfig().enableKlineOrder?(Q.getSetting().updateStorage({trade:t}),Q.getOrderInputAction().setOrderInput(),Q.getOrderRecordAction().setOrderRecord()):Q.getSetting().updateStorage({trade:{showOrderInput:!1,showOrderLine:!1,showPositionLine:!1,showOrderRecord:!1}})}),sg(this,"setTradeSettingEvent",function(t){var e=t.oldParams,n=t.params;Q.getSetting().updateStorage({trade:n}),n.showOrderInput&&!e.showOrderInput&&Q.getOrderInputAction().setOrderInput(),!n.showOrderInput&&e.showOrderInput&&Q.getOrderInputAction().removeOrderInput(),n.showOrderRecord&&!e.showOrderRecord&&Q.getOrderRecordAction().setOrderRecord(),!n.showOrderRecord&&e.showOrderRecord&&Q.getOrderRecordAction().removeOrderRecord(),n.showOrderLine&&!e.showOrderLine&&Q.getOrderAction().setOrders(),!n.showOrderLine&&e.showOrderLine&&Q.getOrderAction().removeAllOrders(),n.showPositionLine&&!e.showPositionLine&&Q.getPositionAction().setPositions(),!n.showPositionLine&&e.showPositionLine&&Q.getPositionAction().removeAllPositions()})};n(11);function fg(t){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pg(t){return(pg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hg(t,e){return(hg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dg(yg(yg(n=function(t,e){return!e||"object"!==fg(e)&&"function"!=typeof e?yg(t):e}(this,pg(e).call(this,t)))),"init",function(){var t="okline-".concat(n.key),e=Q.getTheme(),o=e.Positive,r=e.Negative,i=Q.getConfig().isLongShort,a=n.lang.trade_input,c=a.market_buy,u=a.market_sell,s=a.market_long,l=a.market_short,f=a.limit_buy,p=a.limit_sell,y=a.amount,d=a.amount_tip,b=a.amount_input,g=a.limit_long,v=a.limit_short,m=n.isFast?f:c,_=n.isFast?p:u;i&&(m=n.isFast?g:s,_=n.isFast?v:l);var w=' \n    <div class="order-direc okline-order-input-up" style="background:'.concat(o,'">\n        <div>').concat(m,'</div>\n        <div class="price" id="askPrice">--</div>\n    </div>\n    '),O=' \n    <div class="order-direc okline-order-input-down" style="background:'.concat(r,'">\n        <div>').concat(_,'</div>\n        <div class="price" id="bidPrice">--</div>\n    </div>\n    '),S=' \n      <div class="order-direc okline-order-input-amount" >\n          <div class="amount">'.concat(y,'</div>\n          <input type="number" placeholder="').concat(b,'">\n      </div>\n    '),P='\n    <section class="okline-order-input '.concat(t,'">\n      <div class="okline-order-input-opera" id="okline-order-input-drag">\n          <i class="iconfont icon-icon_close1"></i>\n      </div>\n      ').concat(w,"\n      ").concat(S,"\n      ").concat(O,'\n      <div class="okline-order-input-opera" id="okline-order-input-close">\n          <i class="iconfont icon-cancel"></i>\n      </div>\n      <div class="okline-order-input-error-msg" style="display: none;">').concat(d,"</div>\n    </section>\n    ");n.isFast&&(P='\n      <section class="okline-order-input '.concat(t,' hidden">\n        ').concat(S,"\n        ").concat(w,"\n        ").concat(O,'\n        <div class="okline-order-input-error-msg" style="display: none;">').concat(d,'</div>\n      </section>\n\n      <div class="okline-order-input-btn" style="display: none;">\n        <i class="iconfont icon-icon_web_outline_sm_add"></i>\n      </div>\n      '));var k=h(".canvas-indic",Q.getKlineSQ());k.beforeEnd(P),n.el=h(".".concat(t),k),n.btnDragSQ=h("#okline-order-input-drag",n.el),n.btnCloseSQ=h("#okline-order-input-close",n.el),n.btnBuySQ=h(".okline-order-input-up",n.el),n.btnSellSQ=h(".okline-order-input-down",n.el),n.bidPriceSQ=h("#bidPrice",n.el),n.askPriceSQ=h("#askPrice",n.el),n.amountInputContainerSQ=h(".okline-order-input-amount",n.el),n.amountInputSQ=h(".okline-order-input-amount input",n.el),n.msgErrorSQ=h(".okline-order-input-error-msg",n.el),n.fastOpenBtnSQ=h(".okline-order-input-btn"),n.addEventListener()}),dg(yg(yg(n)),"addEventListener",function(){(n.amountInputSQ.on("focus",function(t){h(t.target).parent().addClass("focus")}),n.amountInputSQ.on("blur",function(t){h(t.target).parent().removeClass("focus")}),n.btnBuySQ.on("click",n.handlePlaceOrder),n.btnSellSQ.on("click",n.handlePlaceOrder),n.btnCloseSQ.on("click",function(){n.emit("onOrderInputClose")}),n.addMouseListener(),n.fastOpenBtnSQ.on("click",n.handleOpenFastOrder),n.isFast)&&Q.getOverlayCanvasSQ().on("mousedown",n.addMouseRightBtnListener)}),dg(yg(yg(n)),"addMouseListener",function(){var t=0,e=0;n.btnDragSQ.on("mousedown",function(o){var r=o,i=r.clientX-n.el[0].offsetLeft,a=r.clientY-n.el[0].offsetTop;return document.onmousemove=function(o){var r=o;t=r.clientX-i,e=r.clientY-a,n.visibleX(t)&&(n.el[0].style.left="".concat(t,"px")),n.visibleY(e)&&(n.el[0].style.top="".concat(e,"px")),n.el[0].style.bottom="unset",n.el[0].style.right="unset"},document.onmouseup=function(){document.onmousemove=null},!1})}),dg(yg(yg(n)),"addMouseRightBtnListener",function(t){if(n.updateLimitPrice(),n.setFastOrderTradeBtn(),2===t.button){var e=t.offsetX,o=t.offsetY;n.el.css({display:"flex",left:"".concat(e,"px"),top:"".concat(o,"px")})}0===t.button&&n.el.css({display:"none"})}),dg(yg(yg(n)),"handlePlaceOrder",function(t){var e=n.getPriceArea(t).hasClass("okline-order-input-up"),o=n.el.find("input")[0].value,r=/^\d+$|^\d+\.\d+$|^\d+(\.\d+){1,2}$/.test(o);if(o&&r)if(n.isFast){var i={px:n.fastOpenBtnSQ.attr("value"),sz:o,side:e?"buy":"sell",ordType:"limit"};n.emit("onPlaceOrder",{type:"fast",params:i})}else{var a={px:"",sz:o,side:e?"buy":"sell",ordType:"market"};n.emit("onPlaceOrder",{type:"float",params:a})}else n.showErrorMsg()}),dg(yg(yg(n)),"updateBidAskPrice",function(t){var e=t.bidPrice,o=t.askPrice;n.bidPriceSQ&&(n.bidPriceSQ.html(e),n.askPriceSQ.html(o))}),dg(yg(yg(n)),"updateLimitPrice",function(){var t=n.fastOpenBtnSQ.attr("value");n.bidPriceSQ.html(t),n.askPriceSQ.html(t)}),dg(yg(yg(n)),"visibleY",function(t){var e=Q.getMainLeftArea(),n=e.getTop()+20,o=e.getBottom()-50;return t>=n&&t<=o}),dg(yg(yg(n)),"visibleX",function(t){var e=Q.getMainLeftArea(),n=e.getLeft()+20,o=e.getRight()-300-20;return t>=n&&t<=o}),dg(yg(yg(n)),"getPriceArea",function(t){return h(t.target).hasClass("order-direc")?h(t.target):h(t.target).parent()}),dg(yg(yg(n)),"showErrorMsg",function(){n.amountInputContainerSQ[0].classList.add("error"),n.msgErrorSQ[0].style.display="block",clearTimeout(n.timer),n.timer=setTimeout(function(){n.msgErrorSQ[0].style.display="none",n.amountInputContainerSQ[0].classList.remove("error")},5e3)}),dg(yg(yg(n)),"desotry",function(){n.removeAllListeners(),n.amountInputSQ.off(),n.btnBuySQ.off(),n.btnSellSQ.off(),n.btnCloseSQ.off(),n.btnDragSQ.off(),n.el.remove()}),dg(yg(yg(n)),"desotryAll",function(){var t=h(".okline-order-input");t&&t.remove()}),dg(yg(yg(n)),"resize",function(){var t=Q.getMainLeftArea().getRight(),e=Q.getMainRightArea().getWidth(),o=Q.getMainProvider().toY(n.price);n.el[0].style.top="".concat(o,"px"),n.lineSQ[0].style.right="".concat(e,"px"),n.contentSQ[0].style.right="".concat(e+80,"px"),n.priceSQ[0].style.left="".concat(t,"px")}),dg(yg(yg(n)),"handleOpenFastOrder",function(){var t=n.fastOpenBtnSQ[0].style,e=t.left,o=t.top;n.el.css({display:"flex",left:"".concat(+e.replace("px","")-162,"px"),top:"".concat(+o.replace("px","")+24,"px")}),n.setFastOrderTradeBtn(),n.updateLimitPrice()}),dg(yg(yg(n)),"setFastOrderTradeBtn",function(){n.fastOpenBtnSQ.attr("value")<Q.getDataSource().getLastData().close?(n.btnBuySQ.css({display:"flex"}),n.btnSellSQ.css({display:"none"})):(n.btnBuySQ.css({display:"none"}),n.btnSellSQ.css({display:"flex"}))}),n.opts=t,n.key=t.key,n.data=t.data,n.isFast=t.isFast;var o=Q.getConfig().language;return n.lang=us(o),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hg(t,e)}(e,_),e}();function gg(t){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vg(t){return(vg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mg(t,e){return(mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Og="float",Sg="fast",Pg=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return wg(_g(_g(n=function(t,e){return!e||"object"!==gg(e)&&"function"!=typeof e?_g(t):e}(this,(t=vg(e)).call.apply(t,[this].concat(r))))),"draw",function(){n.init(),n.addEventListenerFloat()}),wg(_g(_g(n)),"addEventListenerFloat",function(){var t=Q.getOrderInputAction();n.on("onPlaceOrder",function(e){var n=e.type,o=e.params;switch(n){case Og:case Sg:t.handleTradePlaceOrder(o)}}),n.on("onOrderInputClose",function(){n.setStoreTradeSetting("showOrderInput",!1),n.desotry()})}),wg(_g(_g(n)),"setStoreTradeSetting",function(t,e){var n=Q.getStorage().trade;Q.getSetting().updateStorage({trade:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){wg(t,e,n[e])})}return t}({},n,wg({},t,e))})}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mg(t,e)}(e,bg),e}();function kg(t){return(kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cg(t){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ag(t,e){return(Ag=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Eg="float",Tg="fast",Mg=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return xg(jg(jg(n=function(t,e){return!e||"object"!==kg(e)&&"function"!=typeof e?jg(t):e}(this,(t=Cg(e)).call.apply(t,[this].concat(r))))),"draw",function(){n.init(),n.addEventListenerFast()}),xg(jg(jg(n)),"addEventListenerFast",function(){var t=Q.getOrderInputAction();n.on("onPlaceOrder",function(e){var n=e.type,o=e.params;switch(n){case Eg:case Tg:t.handleTradePlaceOrder(o)}})}),xg(jg(jg(n)),"updateDepth",function(){}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ag(t,e)}(e,bg),e}();var Rg=new function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"getStoreTradeSetting",function(t){return Q.getStorage().trade[t]})};function Dg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ig=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Dg(this,"setOrderInput",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.orderInputFloat=new Pg({data:t,key:"orderInputFloat"}),Rg.getStoreTradeSetting("showOrderInput"))&&(e.orderInputFloat.draw(),new Mg({data:t,isFast:!0,key:"orderInputFast"}).draw())}),Dg(this,"removeOrderInput",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new Pg({data:t,key:"orderInputFloat"}).desotryAll()}),Dg(this,"handleTradePlaceOrder",function(t){var e=Q.getConfig().onTradePlaceOrder;e&&e(t)}),Dg(this,"setOrderInputDepthPrice",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{asks:[],bids:[]};if(e.orderInputFloat){var n=t.bids.length?t.bids[0][0]:"--",o=t.asks.length?t.asks[t.asks.length-1][0]:"--";e.orderInputFloat.updateBidAskPrice({bidPrice:n,askPrice:o})}}),Dg(this,"removeFastBtn",function(){h(".okline-order-input-btn").css({display:"none"})}),Dg(this,"updateFastBtn",function(t,e,n){Rg.getStoreTradeSetting("showOrderInput")&&(h(".okline-order-input-btn").css({display:"flex",left:"".concat(t-21,"px"),top:"".concat(e-10,"px")}),h(".okline-order-input-btn").attr("value",n))})};n(12);function Lg(t){return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t){return(Ng=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fg(t,e){return(Fg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vg(Bg(Bg(n=function(t,e){return!e||"object"!==Lg(e)&&"function"!=typeof e?Bg(t):e}(this,Ng(e).call(this,t)))),"init",function(){var t="okline-".concat(n.key),e=Q.getTheme(),o=e.Positive,r=e.Negative,i=e.PositivePriceBg,a=e.NegativePriceBg,c=n.positive?o:r,u=n.positive?i:a,s='<div class="okline-price-line '.concat(t,'">');s+='<div class="line" style="border-color:'.concat(c,'"></div>'),s+='<div class="content" style="color:'.concat(c,'"></div>'),s+='<div class="price" style="background:'.concat(u,'">').concat(n.price,"</div>"),s+="</div>";var l=h(".canvas-indic",Q.getKlineSQ());l.beforeEnd(s),n.el=h(".".concat(t),l),n.lineSQ=h(".line",n.el),n.contentSQ=h(".content",n.el),n.priceSQ=h(".price",n.el),n.resize(),n.addMouseListener()}),Vg(Bg(Bg(n)),"addMouseListener",function(){var t=Q.getDataSource().getDecimalDigits(),e=Q.getMainProvider(),o=n.el[0],r=0,i=0,a=0,c=0,u=function(){a=0,c&&c!==n.price&&(o.style.top="".concat(r,"px"),n.priceSQ.html(n.price),n.emit("onDrag",{price:c}),c=0)};n.contentSQ.on("mousedown",function(t){var e=h(t.target).closest("[event]");if(e){var i=e.attr("event");if(i!==n.event.click)i===n.event.drag&&(r=parseInt(o.style.top,10),a=t.clientY);else{var c=e.attr("type");n.emit("onClick",{type:c})}}}),n.contentSQ.on("mouseenter",function(){n.el[0].style.zIndex=9}),n.contentSQ.on("mouseleave",function(){n.el[0].style.zIndex=1,u()}),n.disDrag||(n.contentSQ.on("mousemove",function(s){a&&(i=s.clientY-a+r,n.visibleY(i)?(o.style.top="".concat(i,"px"),c=e.toValue(i).toFixed(t),n.priceSQ.html(c)):u())}),n.contentSQ.on("mouseup",u))}),Vg(Bg(Bg(n)),"addItem",function(t){var e=t.html,o=t.style,r=void 0===o?"":o,i=t.type,a=void 0===i?"":i,c=t.tips,u=t.event,s='<div class="item"><div class="text"';return r&&(s+=" style='".concat(r,"'")),a&&(s+=" type='".concat(a,"'")),u&&(s+=" event=".concat(u)),s+=">".concat(e,"</div>"),c&&(s+='<div class="tips"><div class="triangle"></div>'.concat(c,"</div>")),s+="</div>",n.contentSQ.beforeEnd(s),a?h(".text[type=".concat(a,"]"),n.el):null}),Vg(Bg(Bg(n)),"updatePrice",function(t){n.price=+t;var e=Q.getMainProvider().toY(t);n.el[0].style.top="".concat(e,"px"),n.priceSQ.html(t)}),Vg(Bg(Bg(n)),"visiblePrice",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.price,e=Q.getMainProvider().toY(t);return n.visibleY(e)}),Vg(Bg(Bg(n)),"visibleY",function(t){var e=Q.getMainLeftArea(),n=e.getTop()+20,o=e.getBottom()-20;return t>=n&&t<=o}),Vg(Bg(Bg(n)),"remove",function(){n.removeAllListeners(),n.contentSQ.off(),n.el.remove()}),Vg(Bg(Bg(n)),"resize",function(){var t=Q.getMainLeftArea().getRight(),e=Q.getMainRightArea().getWidth(),o=Q.getMainProvider().toY(n.price);n.el[0].style.top="".concat(o,"px"),n.lineSQ[0].style.right="".concat(e,"px"),n.contentSQ[0].style.right="".concat(e+80,"px"),n.priceSQ[0].style.left="".concat(t,"px")}),n.positive=!0,n.update=!0;var o=Q.getDataSource().getDecimalDigits();n.opts=t,n.key=t.key,n.data=t.data,n.price=Number(t.price).toFixed(o),n.disDrag=t.disDrag,n.event={click:"click",drag:"drag"};var r=Q.getConfig().language;return n.lang=us(r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fg(t,e)}(e,_),e}();function Ug(t){return(Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yg(t){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wg(t,e){return(Wg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zg(Xg(Xg(n=function(t,e){return!e||"object"!==Ug(e)&&"function"!=typeof e?Xg(t):e}(this,Yg(e).call(this,t)))),"draw",function(){return!!n.visiblePrice()&&(n.init(),n.addEventListener(),n.setType(),n.setSize(),n.setCancel(),!0)}),zg(Xg(Xg(n)),"addEventListener",function(){var t=Q.getOrderAction();n.on("onClick",function(){t.cancelOrder(n.data)}),n.on("onDrag",function(e){var o=e.price;t.updateOrder({data:n.data,price:o})})}),zg(Xg(Xg(n)),"getTypeParams",function(){var t=n.data,e=t.kTpTriggerPx,o=t.kSlTriggerPx,r=n.lang.trade,i=r.tp_buy,a=r.tp_sell,c=r.sl_buy,u=r.sl_sell,s=r.trigger_px,l=r.limit_px,f=r.drag_update_order,p=n.positive?"<=":">=";return n.isTP?{html:"".concat(n.positive?i:a," ").concat(s).concat(p).concat(e)}:n.isSL?{html:"".concat(n.positive?c:u," ").concat(s).concat(p).concat(o)}:{html:l,tips:f,event:n.event.drag}}),zg(Xg(Xg(n)),"setType",function(){var t=n.getTypeParams();n.addItem(t)}),zg(Xg(Xg(n)),"setSize",function(){var t=n.data.kSz;n.sizeSQ=n.addItem({html:t,type:"size"})}),zg(Xg(Xg(n)),"setCancel",function(){var t=n.lang.trade.cancel_order;n.addItem({html:'<i class="iconfont icon-cancel i-cancel"></i>',event:n.event.click,tips:t})}),zg(Xg(Xg(n)),"updateData",function(t){var e=t.kSz,o=t.kPx;e!==n.data.kSz&&n.sizeSQ.html(e),o!==n.data.kPx&&n.updatePrice(o),n.data=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){zg(t,e,n[e])})}return t}({},n.data,t),n.update=!0}),n.positive="buy"===n.data.kSide,n.isTP=t.isTP,n.isSL=t.isSL,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wg(t,e)}(e,Hg),e}();function Qg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kg="limit",Jg="conditional",qg="oco",Zg=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qg(this,"setOrders",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._orders;if(e._orders=t,!Q.getStorage().trade.showOrderLine)return!1;t.forEach(function(t){var n=t.kOrdType,o=t.kOrdId,r=t.kAlgoId,i=t.kTpTriggerPx,a=t.kSlTriggerPx,c=t.kPx;if([Kg,Jg,qg].includes(n)){var u=!!i,s=!!a;switch(n){case Jg:e.setOrderLine({data:t,price:u?i:a,isTP:u,isSL:s,key:"".concat(r,"-").concat(u?"tp":"sl"),disDrag:!0});break;case qg:e.setOrderLine({data:t,price:i,isTP:!0,key:"".concat(r,"-tp"),disDrag:!0}),e.setOrderLine({data:t,price:a,isSL:!0,key:"".concat(r,"-sl"),disDrag:!0});break;default:e.setOrderLine({data:t,price:c,key:"".concat(o,"-limit")})}}}),e.updateOrderLines()}),Qg(this,"setOrderLine",function(t){var n=t.key,o=t.data,r=e._orderLines[n];if(r)r.updateData(o);else{var i=new Gg(t);i.draw()&&(e._orderLines[n]=i)}}),Qg(this,"updateOrderLines",function(){Object.keys(e._orderLines).forEach(function(t){var n=e._orderLines[t];n.update?n.update=!1:(n.remove(),delete e._orderLines[t])})}),Qg(this,"removeAllOrders",function(){Object.values(e._orderLines).forEach(function(t){t.remove()}),e._orderLines={}}),Qg(this,"reset",function(){e.removeAllOrders(),e.setOrders(e._orders)}),Qg(this,"cancelOrder",function(t){var e=Q.getConfig().onCancelOrder;e&&e(t)}),Qg(this,"updateOrder",function(t){var e=t.data,n=t.price,o=Q.getConfig().onAmendOrder;o&&o({price:n,ord:e})}),this._orderLines={},this._orders=[]};function $g(t){return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tv(t){return(tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ev(t,e){return(ev=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ov(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rv="limit_close",iv="market_close",av=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ov(nv(nv(n=function(t,e){return!e||"object"!==$g(e)&&"function"!=typeof e?nv(t):e}(this,tv(e).call(this,t)))),"draw",function(){return!!n.visiblePrice()&&(n.init(),n.addEventListener(),n.setPnl(),n.setSize(),n.setLimitClose(),n.setMarketClose(),!0)}),ov(nv(nv(n)),"addEventListener",function(){var t=Q.getPositionAction();n.on("onClick",function(e){switch(e.type){case rv:t.limitClose(n.data);break;case iv:t.marketClose(n.data)}}),n.on("onDrag",function(e){var o=e.price;t.setTpSl({data:n.data,price:o})})}),ov(nv(nv(n)),"setPnl",function(){var t=n.data,e=t.kUpl,o=t.kUplRatio,r=n.lang.trade.drag_tp_sl,i=Q.getTheme(),a=i.Positive,c=i.Negative,u=Number(e)>=0?a:c,s="color: ".concat(u),l={html:"".concat(e," (").concat(o,")"),type:"kUpl",style:s};n.disDrag||(l.event=n.event.drag,l.tips=r),n.pnlSQ=n.addItem(l)}),ov(nv(nv(n)),"setSize",function(){var t=n.data,e=t.kPos,o=t.kTradeUnit,r=Q.getTheme(),i=r.Positive,a=r.Negative,c=n.positive?i:a,u="background: ".concat(c,"; color: #fff");n.sizeSQ=n.addItem({html:"".concat(e," ").concat(o),style:u,type:"kPos"})}),ov(nv(nv(n)),"setLimitClose",function(){var t=n.lang.trade,e=t.close,o=t.close_position;n.addItem({html:e,type:rv,event:n.event.click,tips:o})}),ov(nv(nv(n)),"setMarketClose",function(){var t=n.lang.trade,e=t.market,o=t.market_close;n.addItem({html:e,type:iv,event:n.event.click,tips:o})}),ov(nv(nv(n)),"updateData",function(t){var e=t.kPos,o=t.kTradeUnit,r=t.kUpl,i=t.kUplRatio,a=t.kAvgPx;e!==n.data.kPos&&n.sizeSQ.html("".concat(e," ").concat(o)),r===n.data.kUpl&&i===n.data.kUplRatio||n.pnlSQ.html("".concat(r," (").concat(i,")")),a!==n.data.kAvgPx&&n.updatePrice(a),n.data=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ov(t,e,n[e])})}return t}({},n.data,t),n.update=!0});var o=n.data,r=o.kPosSide,i=o.kPos;return n.positive="net"===r&&parseInt(i,10)>0||"long"===r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ev(t,e)}(e,Hg),e}();function cv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uv=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),cv(this,"setPositions",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._positions;if(e._positions=t,!Q.getStorage().trade.showPositionLine)return!1;t.forEach(e.setPositionLine),e.updatePositionLines()}),cv(this,"setPositionLine",function(t){var n=t.kPosId,o=t.kAvgPx,r=t.kInstType,i=e._positionLines[n];if(i)i.updateData(t);else{var a=new av({data:t,price:o,key:n,disDrag:"OPTION"===r});a.draw()&&(e._positionLines[n]=a)}}),cv(this,"updatePositionLines",function(){Object.keys(e._positionLines).forEach(function(t){var n=e._positionLines[t];n.update?n.update=!1:(n.remove(),delete e._positionLines[t])})}),cv(this,"removeAllPositions",function(){Object.values(e._positionLines).forEach(function(t){t.remove()}),e._positionLines={}}),cv(this,"reset",function(){e.removeAllPositions(),e.setPositions(e._positions)}),cv(this,"limitClose",function(t){var e=Q.getConfig().onPositionLimitClose;e&&e(t)}),cv(this,"marketClose",function(t){var e=Q.getConfig().onPositionMarketClose;e&&e(t)}),cv(this,"setTpSl",function(t){var e=t.data,n=t.price,o=Q.getConfig().onPositionTpSl,r=Q.getDataSource().getLastData();o&&o({side:"long"===e.kPosSide&&n>r.close?"tp":"sl",triggerPx:n,position:e})}),this._positionLines={},this._positions=[]};n(13);function sv(t){return(sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lv(t){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fv(t,e){return(fv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yv=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hv(pv(pv(n=function(t,e){return!e||"object"!==sv(e)&&"function"!=typeof e?pv(t):e}(this,lv(e).call(this,t)))),"init",function(){var t="okline-".concat(n.key),e=n.lang.trade_record.detail,o='\n      <section class="okline-order-record '.concat(t,'">\n        <div class="okline-order-record-points"></div>\n        <div class="okline-order-record-tooltip" >\n          <div class="okline-order-record-tooltip-wrapper">\n            <div>\n              <span class="record-amount"></span>\n              <span class="record-side"></span>\n              <span class="record-price"></span>\n            </div>\n            <span class="okline-order-record-tooltip-detail">').concat(e,"</span>\n          </div>\n        </div>\n      </section>\n    "),r=h(".canvas-indic",Q.getKlineSQ());r.beforeEnd(o),n.el=h(".".concat(t),r),n.pointsSQ=h(".okline-order-record-points",n.el),n.tooltipSQ=h(".okline-order-record-tooltip",n.el),n.btnDetailSQ=h(".okline-order-record-tooltip-detail",n.el),n.textAmountSQ=h(".record-amount",n.el),n.textSideSQ=h(".record-side",n.el),n.textPriceSQ=h(".record-price",n.el),n.addEventListener()}),hv(pv(pv(n)),"addItem",function(t){var e=t.side,o=void 0===e?"":e,r=t.time,i=void 0===r?"":r,a=t.pointX,c=void 0===a?0:a,u=t.pointY,s=void 0===u?0:u,l=t.data,f=void 0===l?{}:l,p=f.count,y=f.price,d=Q.getTheme(),b=d.PositivePoint,g=d.PositivePointBorder,v=d.NegativePoint,m=d.NegativePointBorder,_=' \n    <div \n      class="okline-order-record-btn buy buy-'.concat(i,'" \n      style="left: ').concat(c,"px; top: ").concat(s,"px; display: ").concat(c<0?"none":"block",'"\n      attr-left="').concat(c,'"\n      attr-top="').concat(s,'"\n      attr-count="').concat(p,'"\n      attr-price="').concat(y,'"\n      attr-side="').concat(o,'"\n      attr-time="').concat(i,'"\n    >\n        <div class="record-btn-bg">\n          <div class="record-btn-bg-square" style="background: ').concat(b,"; border-color: ").concat(g,';"></div>\n          <div class="record-btn-bg-triangle" style="background: ').concat(b,"; border-top-color: ").concat(g,"; border-left-color: ").concat(g,';"></div>\n        </div>\n        <span>B</span>\n    </div>\n    '),w=' \n    <div \n      class="okline-order-record-btn sell sell-'.concat(i,'" \n      style="left: ').concat(c,"px; top: ").concat(s,"px; display: ").concat(c<0?"none":"block",'"\n      attr-left="').concat(c,'"\n      attr-top="').concat(s,'"\n      attr-count="').concat(p,'"\n      attr-price="').concat(y,'"\n      attr-side="').concat(o,'"\n      attr-time="').concat(i,'"\n    >\n    <div class="record-btn-bg">\n      <div class="record-btn-bg-square" style="background: ').concat(v,"; border-color: ").concat(m,';"></div>\n      <div class="record-btn-bg-triangle" style="background: ').concat(v,"; border-bottom-color: ").concat(m,"; border-right-color: ").concat(m,';"></div>\n    </div>\n      <span>S</span>\n    </div>\n    '),O="buy"===o?_:w;n.pointsSQ.find(".".concat(o,"-").concat(i)).length?(h(".".concat(o,"-").concat(i),n.el).remove(),h(".".concat(o,"-").concat(i)).off("mouseenter"),n.pointsSQ.beforeEnd(O),h(".".concat(o,"-").concat(i)).on("mouseenter",n.openTooltip),h(".".concat(o,"-").concat(i)).on("mouseleave",n.closeTooltip)):(n.pointsSQ.beforeEnd(O),h(".".concat(o,"-").concat(i)).on("mouseenter",n.openTooltip),h(".".concat(o,"-").concat(i)).on("mouseleave",n.closeTooltip))}),hv(pv(pv(n)),"resetPoints",function(){n.pointsSQ&&n.pointsSQ.html(""),h(".okline-order-record-btn").off()}),hv(pv(pv(n)),"addEventListener",function(){n.btnDetailSQ.on("click",function(){Q.getOrderRecordAction().handleOrderDetail(n.currentHoverInfo)}),n.tooltipSQ.on("mouseenter",function(){n.isHoverTooltip=!0}),n.tooltipSQ.on("mouseleave",n.closeTooltipByWrapper)}),hv(pv(pv(n)),"desotry",function(){n.removeAllListeners(),n.btnDetailSQ.off(),n.el.remove()}),hv(pv(pv(n)),"desotryAll",function(){n.el&&n.el.remove()}),hv(pv(pv(n)),"openTooltip",function(t){n.isHoverPoint=!0;var e=h(t.target).attr("attr-count"),o=h(t.target).attr("attr-price"),r=h(t.target).attr("attr-side"),i=h(t.target).attr("attr-left"),a=h(t.target).attr("attr-top"),c=h(t.target).attr("attr-time");n.currentHoverInfo={time:c,side:r,count:e};var u="buy"===r,s=n.lang.trade_record,l=s.filled,f=s.filled_unit,p=s.buy,y=s.sell;h(n.textAmountSQ).html("".concat(l).concat(e).concat(f)),h(n.textPriceSQ).html(Number(o).toFixed(4)),h(n.textSideSQ).html(u?p:y);var d=Q.getTheme(),b=d.Positive,g=d.Negative;n.textSideSQ.css({color:u?b:g}),h(t.target).addClass("active"),n.tooltipSQ.css({display:"block",left:"".concat(i-8,"px"),top:"".concat(+a-60,"px")})}),hv(pv(pv(n)),"closeTooltip",function(){n.isHoverPoint=!1}),hv(pv(pv(n)),"closeTooltipByWrapper",function(){n.tooltipSQ.css({display:"none"}),n.isHoverTooltip=!1}),n.update=!0,n.opts=t,n.key=t.key,n.data=t.data;var o=Q.getConfig().language;return n.lang=us(o),n.isHoverPoint=!1,n.isHoverTooltip=!1,n.currentHoverInfo={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fv(t,e)}(e,_),e}();function dv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bv=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dv(this,"setOrderRecord",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.orderRecord=new yv({data:t,key:"orderRecord"}),Rg.getStoreTradeSetting("showOrderRecord")&&e.orderRecord.init()}),dv(this,"removeOrderRecord",function(){e.orderRecord.desotryAll()}),dv(this,"setOrderFilled",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q.getDataOrderRecord().setOrderFilled(t)}),dv(this,"addRecordPoint",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rg.getStoreTradeSetting("showOrderRecord")&&e.orderRecord.addItem(t)}),dv(this,"resetRecordPoint",function(){e.orderRecord&&e.orderRecord.resetPoints()}),dv(this,"handleOrderDetail",function(t){var e=t.time,n=t.side,o=Q.getStorage().period,r=Number(e),i={start:r,end:r+1e3*S.getSecondPeriod(o),side:n},a=Q.getConfig().onOrderRecordDetail;a&&a(i)})},gv=n(2),vv=n.n(gv);n(14),n(15);function mv(t){return(mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _v(t){return(_v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wv(t,e){return(wv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ov(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pv=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sv(Ov(Ov(n=function(t,e){return!e||"object"!==mv(e)&&"function"!=typeof e?Ov(t):e}(this,_v(e).call(this)))),"ready",function(t){t&&t()}),Sv(Ov(Ov(n)),"init",function(){var t=n.anchor.find(".kline-core")[0];Q.setKlineDom(t);var e=h(t);Q.setKlineSQ(e),Q.setChartCanvas(h(".main-canvas",e)[0]),Q.setOverlayCanvas(h(".overlay-canvas",e)[0]),Q.setDataSource(new It),Q.setDataFeed(new q),Q.setDataOrderRecord(new Tt),Q.setDrawAction(new Rf),Q.setChartAction(new _l),Q.setIndicatorAction(new jy),Q.setLineAction(new Xb),Q.setMouseAction(new tg),Q.setTemplateAction(new qb),Q.setTradeAction(new lg),Q.setOrderInputAction(new Ig),Q.setOrderAction(new Zg),Q.setPositionAction(new uv),Q.setOrderRecordAction(new bv),n.initFromSettings()}),Sv(Ov(Ov(n)),"destroy",function(){Q.getDataFeed().destroy(),Q.getMouseAction().destroy(),Q.getLineAction().destroy(),Q.getIndicatorAction().destroy(),Q.getTradeAction().destroy()}),Sv(Ov(Ov(n)),"initFromSettings",function(){var t=Q.getConfig().theme,e=Q.getStorage(),o=e.mainStyle,r=e.showIndics,i=e.mainIndic,a=e.showLineTool,c=e.period,u=e.trade;n.setTheme(t),n.setChartStyle(o),n.switchDeputyIndicator(r),n.setMainIndicator(i),n.switchDrawLine(a),n.setPeriod(c),n.setTradeSetting(u)}),Sv(Ov(Ov(n)),"setPeriod",function(t){Q.getChartAction().setPeriod(t)}),Sv(Ov(Ov(n)),"setMainIndicator",function(t){Q.getIndicatorAction().setMainIndicator(t)}),Sv(Ov(Ov(n)),"setChartStyle",function(t){Q.getChartAction().setChartStyle(t)}),Sv(Ov(Ov(n)),"switchDeputyIndicator",function(t){Q.getIndicatorAction().switchDeputyIndicator(t)}),Sv(Ov(Ov(n)),"switchDrawLine",function(t){Q.getLineAction().switchDrawLine(t)}),Sv(Ov(Ov(n)),"switchSettings",function(t){Q.getConfig().enableKlineOrder?Q.getTradeAction().switchSettings(t):Q.getIndicatorAction().switchSettings(t)}),Sv(Ov(Ov(n)),"setTheme",function(t){Q.getChartAction().setTheme(t)}),Sv(Ov(Ov(n)),"setReverseColor",function(t){Q.getChartAction().setReverseColor(t)}),Sv(Ov(Ov(n)),"setLanguage",function(t){Q.getChartAction().setLanguage(t)}),Sv(Ov(Ov(n)),"updateConfig",function(t){n.setSymbol(t.symbol,t)}),Sv(Ov(Ov(n)),"setSymbol",function(t,e){Q.getChartAction().setSymbol(t,e)}),Sv(Ov(Ov(n)),"setDepth",function(t){Q.getChartAction().setDepth(t),Q.getOrderInputAction().setOrderInputDepthPrice(t)}),Sv(Ov(Ov(n)),"setTradeSetting",function(t){Q.getTradeAction().init(t)}),Sv(Ov(Ov(n)),"setOrderInput",function(){Q.getOrderInputAction().setOrderInput()}),Sv(Ov(Ov(n)),"setOrders",function(t){Q.getOrderAction().setOrders(t)}),Sv(Ov(Ov(n)),"setOrderFilled",function(t){Q.getOrderRecordAction().setOrderFilled(t)}),Sv(Ov(Ov(n)),"setPositions",function(t){Q.getPositionAction().setPositions(t)}),Sv(Ov(Ov(n)),"setOrderRecord",function(t){Q.getOrderRecordAction().init(t)}),Sv(Ov(Ov(n)),"updateLastData",function(t){Q.getChartAction().setKlineLastData(t)}),Sv(Ov(Ov(n)),"resize",function(t,e){Q.getDrawAction().resize(t,e)}),Q.init();var o=t.anchor,r=t.kSettings,i=t.onChartReady,a=r.config.element;return n.anchor=h(o||a),h(vv.a).append(n.anchor),Q.setSetting(r),n.init(),i&&i(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wv(t,e)}(e,s),e}(),kv={debug:!1,fullscreen:!1,symbol:"",instType:"",interval:"",container_id:"chartContainer",timezone:"Asia/Hong_Kong",library_path:"/tradingview/",locale:"zh",client_id:"tradingview.com",user_id:"public_user_id",theme:"dark",hideHeaderWidget:!0,autosize:!0,supports_search:!1,supports_marks:!1,loading_screen:{backgroundColor:"#999",foregroundColor:"#f00"},study_count_limit:10,studies_overrides:{"Overlay.style":2},allow_symbol_change:!0,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},time_frames:[],disabled_features:["compare_symbol","display_market_status","go_to_date","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","use_localstorage_for_settings","volume_force_overlay","symbol_search_hot_key","header_widget"],enabled_features:["header_indicators","hide_last_na_study_output","adaptive_logo","dont_show_boolean_study_arguments","same_data_requery","side_toolbar_in_fullscreen_mode","disable_resolution_rebuild"],studies_access:{type:"black",tools:[{name:"Ratio",grayed:!1},{name:"Spread",grayed:!1},{name:"Correlation Coefficient",grayed:!1}]}},Cv={name:"",symbol:"",instType:"",full_name:"",ticker:"",type:"bitcoin",session:"24x7",exchange:"",timezone:"Asia/Hong_Kong",minmov:1,pricescale:1e4,has_intraday:!0,has_dwm:!0,has_fractional_volume:!0,intraday_multipliers:["1","1","3","5","15","30","60","120","240","360","720","D","W","M","12M"],has_seconds:!1,seconds_multipliers:["5"],has_daily:!0,has_weekly_and_monthly:!0,volume_precision:8,data_status:"streaming",expired:!1,limit:100,base_name:[],legs:[]},Av=["Volume","Correlation Coefficient","Spread","Ratio"];function jv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Ev(t,e,n[e])})}return t}function xv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ev(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tv=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ev(this,"convertList",function(t){var n=t.list,o=t.config;return n.map(function(t){return e.convertItem({item:t,config:o})})}),this.symbolInfo=Object.assign(Cv,n),this.config=o;var r=o.language,i=o.wsUrl;this.languageMap=us(r),this.convertNames={},this.disconnected=!1,this.currentPeriod=0,this.restCallback={},this.wsCallback={},this.restCompare={},this.restCompareData={},this.wsTime={},this.socket=new WebSocketCore({connectUrl:i});var a=this.socket;this.connected=new Promise(function(t){e.connectedHandle=a.onSocketConnected(function(){e.disconnected&&(e.resetBars(),e.disconnected=!1),t()}),e.errorHandle=a.onSocketError(function(){e.disconnected=!0,e.resetBars()})}),this.pingHandle=a.onPushDiscontinue(function(){a.sendChannel("ping")}),this.PushHandle=a.setPushDataResolver(function(t){var n=o.isV5,r=S.convertWsData(jv({isV5:n},t)),i=r.id,a=r.instId,c=r.item,u=e.wsCallback[i];if(u){var s=e.getConfig(a),l=e.convertItem({item:c,config:s});u(l),e.wsTime[i]=l.time}}),a.connect()}return function(t,e,n){e&&xv(t.prototype,e),n&&xv(t,n)}(t,[{key:"onReady",value:function(t){var e=this,n=this.config.compare;if(n){var o=Object.keys(n).map(function(t){return{value:t,name:e.languageMap.compare["".concat(t,"_title")]}});setTimeout(function(){t({symbols_types:o})},0)}else setTimeout(function(){t({})},0)}},{key:"searchSymbols",value:function(t,e,n,o){var r=this.config.compare;if(n&&r){var i=r[n].listUrl;this.getCompareData(n,i).then(function(e){var r=e.key,i=e.data;if(r===n){var a=i.filter(function(e){return e.symbol.includes(t)});o(a)}}).catch(function(){o([])})}else o([])}},{key:"resolveSymbol",value:function(t,e){var n=this,o=this.getConfig(t).convertName,r=o?o(t,this.config.currency):t;t===this.config.symbol&&(this.symbolInfo.symbol=t,this.symbolInfo.base_name=[r],this.symbolInfo.legs=[r]),t!==r&&(this.convertNames[r]=t),setTimeout(function(){e(jv({},n.symbolInfo,{symbol:n.convertNames[r]||t,name:r,full_name:r}))},0)}},{key:"getBars",value:function(t,e,n,o,r,i,a,c){var u=this,s=t.symbol,l=this.getConfig(s),f=jv({},l,{period:e}),p=S.getChannelArg(f),y=JSON.stringify(p);this.currentPeriod=e,this.restCallback[y]=r,a?h.ajax({url:S.getKlineUrl(f)}).then(function(e){var n=e.code,o=e.data;if(0===Number(n)){var i=u.convertList({list:S.sortRestData({isV5:l.isV5,data:o}),config:l});if(s===u.config.symbol){var a=i.map(Object.values),f=O.pricePrecision(a),p=Math.pow(10,f);t.pricescale=p,u.symbolInfo.pricescale=p}r(i);var h=u.wsCallback[y],d=u.wsTime[y];h&&d&&i.forEach(function(t){t.time>=d&&h(t)}),c&&c.subscribeChannel&&c.subscribeChannel()}else r([])}).catch(function(t){if(r([],{noData:!0}),!c||!c.subscribeChannel)throw t;c.subscribeChannel()}):r([],{noData:!0})}},{key:"resetBars",value:function(){var t=this;Object.keys(this.restCallback).forEach(function(e){var n=JSON.parse(e),o={subscribeChannel:function(){t.sendChannel("subscribe",[n])}},r=n.instId||n.split(":")[1];t.getBars({symbol:r},t.currentPeriod,null,null,t.restCallback[e],null,!0,o)})}},{key:"sendChannel",value:function(t,e){var n=this;if(e.length){var o=JSON.stringify({op:t,args:e});"unsubscribe"===t&&e.forEach(function(t){var e=JSON.stringify(t);delete n.restCallback[e],delete n.wsCallback[e],delete n.wsTime[e]}),this.socket.isConnected()?this.socket.sendChannel(o):this.connected.then(function(){n.socket.isConnected()&&n.socket.sendChannel(o)})}}},{key:"subscribeBars",value:function(t,e,n){var o=t.symbol,r=this.getConfig(o),i=S.getChannelArg(jv({},r,{period:e}));this.wsCallback[JSON.stringify(i)]=n,this.sendChannel("subscribe",[i])}},{key:"unsubscribeBars",value:function(t){if(this.currentPeriod){var e=t.split("_"),n=e.pop(),o=e.join(),r=this.getConfig(o),i=S.getChannelArg(jv({},r,{period:n}));this.wsCallback[JSON.stringify(i)]&&this.sendChannel("unsubscribe",[i])}}},{key:"unsubscribeAll",value:function(){var t=Object.keys(this.wsCallback).map(function(t){return JSON.parse(t)});this.sendChannel("unsubscribe",t)}},{key:"convertItem",value:function(t){var e=t.item,n=t.config,o=(0,n.dataAdapter)(e,n.charge,this.config.rate);return{time:o[0],open:o[1],high:o[2],low:o[3],close:o[4],volume:o[5]}}},{key:"getCompareData",value:function(t,e){var n=this,o=this.restCompare[t];if(o)return o;var r=h.ajax({url:e}).then(function(e){var o=e.code,r=e.data;if(0!==o)return{key:t,data:[]};var i=n.config,a=i.compare,c=i.currency,u=a[t].convertList({list:r,key:t,currency:c,lang:n.languageMap.compare});return n.restCompareData[t]=u,{key:t,data:u}});return this.restCompare[t]=r,r}},{key:"getConfig",value:function(t){var e=this.config.symbol,n=this.config.compare;if(t===e||!n)return this.config;var o=n.index,r=e.match(/^\w+-(\w+)/);if(r&&r[0]===t&&o)return jv({},this.config,o,{charge:r[1],symbol:t});for(var i=Object.keys(n),a=0,c=i.length;a<c;a++)for(var u=i[a],s=n[u],l=this.restCompareData[u]||[],f=0,p=l.length;f<p;f++){var h=l[f],y=h.full_name,d=h.charge;if(y===t)return jv({},this.config,s,{charge:d,symbol:t})}return this.config}},{key:"setLanguage",value:function(t){this.restCompare={},this.languageMap=us(t)}},{key:"destroy",value:function(){this.unsubscribeAll(),this.pingHandle(),this.PushHandle(),this.connectedHandle(),this.errorHandle()}}]),t}(),Mv=n(3),Rv={zh_hk:"zh_TW",zh_cn:"zh",en_us:"en",fr_fr:"fr",th_th:"th",rn_ru:"ru",es_es:"es",vi_vi:"vi"};function Dv(t){return"line"===t&&(t="1"),/m/.test(t)?t.replace(/m/,""):/H/.test(t)?"".concat(60*parseInt(t,10)):/Y/.test(t)?"".concat(12*parseInt(t,10),"M"):t.toUpperCase()}function Iv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lv=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Iv(this,"ready",function(t){t&&e.callbackList.push(t),e.readyState&&(e.callbackList.forEach(function(t){t()}),e.callbackList=[])}),Iv(this,"init",function(){var t=e.widgetConfig,n=t.container_id,o=t.theme,r=t.language,i=e.kSettings.storage.period,a=e.themeInstance.Background;h("#".concat(n)).css({backgroundColor:a}),e.widgetConfig.datafeed=e.datafeed,e.widgetConfig.loading_screen={backgroundColor:a},e.widgetConfig.custom_css_url=e.getCustomCSSFile(o),e.widgetConfig.locale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.toLowerCase(),Rv[t]?Rv[t]:Rv.en_us}(r),e.widgetConfig.interval=Dv(i),e.widgetConfig.overrides=e.getOverrides(),e.widgetConfig.saved_data=e.getSavedData(),e.widget=new Mv.widget(e.widgetConfig),e.widget.onChartReady(function(){e.readyState=!0,e.ready(),e.widgetConfig.onChartReady&&e.widgetConfig.onChartReady(),e.setPrecision(),e.widget.subscribe("study",e.onAddStudy),e.widget.subscribe("add_compare",e.onAddCompare),e.widget.subscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.createCompare()})}),Iv(this,"onAddStudy",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;if("Overlay"===t||"Compare"===t){e.priceScaleMode=e.priceScale.getMode();var n=e.getAllStudies(),o=e.themeInstance["Indicator".concat(n.length%6)];e.widget.applyStudiesOverrides({"compare.plot.color":o,"Overlay.lineStyle.color":o})}}),Iv(this,"onAddCompare",function(){e.priceScale.setMode(e.priceScaleMode)}),Iv(this,"onAutoSaveNeeded",function(){e.widget.save(function(t){if(t&&t.charts&&0!==t.charts.length){var n=t.charts[0],o=e.kSettings.tId,r=e.kConfig,i=r.theme,a=r.reverseColor;n.theme=i,n.reverseColor=a,localStorage.setItem(o,JSON.stringify(n))}})}),Iv(this,"getSavedData",function(){var t=e.kSettings.tId,n=e.kConfig,o=n.theme,r=n.reverseColor,i=n.symbol,a=localStorage.getItem(t);if(a){var c=JSON.parse(a),u=c.panes,s=void 0===u?[]:u,l=c.theme,f=c.reverseColor;if(o===l&&r===f){for(var p=0,h=s.length;p<h;p++)for(var y=s[p].sources,d=void 0===y?[]:y,b=d.length-1;b>=0;b--){var g=d[b],v=g.type,m=g.state,_=void 0===m?{}:m;if("study_Compare"!==v&&"study_Overlay"!==v){if("MainSeries"===v){_.symbol=i;var w=e.kStorage.period;_.interval=Dv(w),"line"===w&&(_.style=2)}}else d.splice(b,1)}return c}}}),Iv(this,"setPrecision",function(){var t=e.datafeed.symbolInfo,n=t.pricescale,o=Math.ceil(Math.log(n)/Math.log(10)),r={},i=e.widget.getStudiesList();i.push("Compare","Overlay"),i.forEach(function(t){Av.includes(t)||(r["".concat(t,".precision")]=o)}),r["Compare.minTick"]="".concat(n,",1,false"),r["Overlay.minTick"]="".concat(n,",1,false"),e.widget.applyStudiesOverrides(r);var a=e.widget.activeChart();e.getAllStudies().forEach(function(t){var e=t.id,n=t.name;Av.includes(n)||a.getStudyById(e).applyOverrides({precision:o})}),a._chartWidget.model().mainSeries().updateSymbolInfo(t)}),Iv(this,"createCompare",function(){var t=e.kConfig,n=t.compare,o=void 0===n?{}:n,r=t.symbol;if(o.index&&!e.creatingStudy[r]){var i=e.widget.activeChart(),a=i.getPanes().find(function(t){return t.hasMainSeries()});if(a){e.priceScale=a.getMainSourcePriceScale(),e.priceScaleMode=e.priceScale.getMode(),e.creatingStudy[r]=!0;var c=O.indexSymbol(r);i.createStudy("Compare",!1,!1,["close",c]).then(function(){e.onAddCompare(),delete e.creatingStudy[r]})}}}),Iv(this,"deleteCustomStudy",function(){var t=e.widget.activeChart();e.getAllStudies().forEach(function(e){var n=e.id,o=e.name;["Compare","Overlay"].includes(o)&&t.removeEntity(n)})}),Iv(this,"getAllStudies",function(){return e.widget.activeChart().getAllStudies()||[]}),Iv(this,"getCustomCSSFile",function(t){var n=e.kConfig.cdnBaseUrl,o="assets/okfe/okui/okline/".concat("0.3.57","/css/").concat(t,".css");return"".concat(n,"/cdn/").concat(o)}),Iv(this,"switchDeputyIndicator",function(){e.widget.activeChart()._chartWidget.showIndicators()}),Iv(this,"switchSettings",function(){var t=e.widget.activeChart()._chartWidget;(t.showChartProperties||t.showGeneralChartProperties).call(t)}),Iv(this,"setTheme",function(t){var n=e.widgetConfig.container_id;e.themeInstance=Oe(t,e.kConfig);var o=e.themeInstance.Background;h("#".concat(n)).css({backgroundColor:o}),e.kSettings.updateTheme(t),e.widget.changeTheme(t);var r=e.getOverrides();e.applyOverrides(r),e.addCustomCSSFile(e.getCustomCSSFile(t))}),Iv(this,"setReverseColor",function(t){e.kSettings.updateConfig({reverseColor:t}),e.setTheme(e.kConfig.theme)}),Iv(this,"setLanguage",function(t){e.datafeed.setLanguage(t),e.updateConfig({language:t})}),Iv(this,"updateConfig",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.datafeed.unsubscribeAll(),e.kSettings.updateConfig(t),e.kSettings.cover({target:e.widgetConfig,sources:e.kConfig}),e.init()}),Iv(this,"setPeriod",function(t){if(t!==e.kStorage.period){var n=Dv(e.kStorage.period);e.kSettings.updateStorage({period:t});var o=e.widget.activeChart(),r=o.chartType(),i=e.lastType,a=void 0===i?1:i;e.lastType=2===r?a:r,"line"===t?(o.setChartType(2),t="1"):o.setChartType(e.lastType);var c=Dv(t);n!==c&&(e.datafeed.unsubscribeAll(),o.setResolution(c,function(){}))}}),Iv(this,"setSymbol",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t!==e.kConfig.symbol){e.deleteCustomStudy(),e.datafeed.unsubscribeAll(),e.kSettings.updateConfig(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Iv(t,e,n[e])})}return t}({},n,{symbol:t}));var o=e.kSettings.storage.period;e.widget.setSymbol(t,Dv(o),function(){t===e.kConfig.symbol&&(e.setPrecision(),e.createCompare())})}else n.currency===e.kConfig.currency&&n.priceType===e.kConfig.priceType||e.updateConfig(n)}),Iv(this,"showCompareOrAdd",function(){e.widget.activeChart()._chartWidget.showCompareOrAdd()}),Iv(this,"addCustomCSSFile",function(t){e.widget.addCustomCSSFile(t)}),Iv(this,"applyOverrides",function(t){e.widget.applyOverrides(t)}),Iv(this,"getOverrides",function(){var t=e.themeInstance,n=t.Positive,o=t.Negative;return{volumePaneSize:"medium","mainSeriesProperties.lineStyle.color":"#FF0000","paneProperties.background":t.Background,"mainSeriesProperties.candleStyle.upColor":n,"mainSeriesProperties.candleStyle.downColor":o,"mainSeriesProperties.candleStyle.borderUpColor":n,"mainSeriesProperties.candleStyle.borderDownColor":o}}),Iv(this,"destroy",function(){e.readyState=!1,e.widget&&e.widget._ready&&(e.widget.unsubscribe("study",e.onAddStudy),e.widget.unsubscribe("add_compare",e.onAddCompare),e.widget.unsubscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.widget.remove(),e.datafeed.destroy())});var r=n.kSettings,i=r.config,a=r.storage;this.kSettings=r,this.kConfig=i,this.kStorage=a,this.widgetConfig=Object.assign(kv,this.kConfig,n),this.datafeed=new Tv(o,this.kConfig),this.callbackList=[],this.readyState=!1,this.creatingStudy={},this.priceScale={getMode:function(){},setMode:function(){}},this.priceScaleMode=0,this.themeInstance=Oe(this.kConfig.theme,this.kConfig),this.init()};function Nv(t){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bv(t,e){return!e||"object"!==Nv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vv(t){return(Vv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hv(t,e){return(Hv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uv=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Bv(this,Vv(e).call(this));var o=t.el,r=t.init,i=void 0===r||r,a=t.kSettings,c=t.kConfig,u=t.kStorage,s=t.kState;return n.kSettings=a,n.kConfig=c,n.kStorage=u,n.kState=s,n.el=o,n.lang=us(n.kState.language),i&&n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hv(t,e)}(e,s),function(t,e,n){e&&Fv(t.prototype,e),n&&Fv(t,n)}(e,[{key:"init",value:function(){var t=this;this.render(),this.setLanguage(),this.bindEvent(),function(t){var e=new x(t);A.target=e,t(),A.target=null}(function(){t.lang=us(t.kState.language),t.setLanguage()})}},{key:"bindEvent",value:function(){}},{key:"setLanguage",value:function(){}},{key:"render",value:function(){}},{key:"hide",value:function(){this.el.addClass("hide")}},{key:"show",value:function(){this.el.removeClass("hide")}},{key:"delete",value:function(){this.el[0].remove()}}]),e}();n(16);function Yv(t){return(Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Xv(t,e){return!e||"object"!==Yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zv(t){return(zv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gv(t,e){return(Gv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xv(this,zv(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gv(t,e)}(e,Uv),function(t,e,n){e&&Wv(t.prototype,e),n&&Wv(t,n)}(e,[{key:"render",value:function(){var t=this.kConfig.logoIcon||{},e=t.content,n=t.type;e&&(this.el.removeClass("hide"),"img"===n?this.el.html('<img src="'.concat(e,'"/>')):this.el.html("<span>".concat(e,"</span>")))}}]),e}();n(17);function Kv(t){return(Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jv(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zv(t,e){return!e||"object"!==Kv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $v(t,e,n){return($v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tm(t){return(tm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function em(t,e){return(em=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nm=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.init=!1,n=Zv(this,tm(e).call(this,t));var o=t.list,r=void 0===o?[]:o,i=t.showList,a=void 0===i?[]:i,c=t.selected;return n.list=r,n.showList=Jv(a),n.selected=c,n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&em(t,e)}(e,Uv),function(t,e,n){e&&qv(t.prototype,e),n&&qv(t,n)}(e,[{key:"init",value:function(){$v(tm(e.prototype),"init",this).call(this)}},{key:"bindEvent",value:function(){var t=this,e=this.el.parent().parent(),n=h(".dropdown",this.el),o=h(".arrow",this.el),r=o.parent("ul").hasClass("select-full");r&&(o=o.parent("ul"));var i=h(".arrow span",this.el);this.el.on("click",function(e){var r=h(e.target).closest("div");if(r&&r.hasClass("collect-icon"))return t.collectChange(r.parent().attr("key")),t.emit("collect-change",Jv(t.showList)),void e.stopPropagation();if(r=h(e.target).closest(".dropdown.edit li[ev=period], .dropdown div[ev=period]"))t.emit("period-edit",r);else if((r=h(e.target).closest("li"))&&r.attr("key")&&!r.hasClass("stop-propagation")){r.hasClass("k-checkbox")||(i.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide"));var a=r.attr("key"),c=t.selected!==a;t.selectChange(a),c&&t.emit("select-change",a),t.emit("select-click",a)}});var a=function(){n.removeClass("hide");var a=e[0].getBoundingClientRect(),c=a.width,u=a.height,s=a.bottom,l=t.el[0],f=l.offsetLeft,p=l.offsetWidth,h=n[0].offsetWidth,y=p+f-o[0].offsetWidth+(r?-10:-36);y<0&&(y=10),y+h>c&&(y=c-h-10),o.addClass("hover"),i.css({"transition-duration":"0.5s",transform:"rotate(180deg)"}),n.css({top:"".concat(u-1,"px"),left:"".concat(y,"px"),maxHeight:"".concat(window.innerHeight-s-5,"px")}),t.emit("show")},c=function(){i.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide")};if(this.el.on("mouseleave",c),gt.isMobile)return o.on("touchstart",function(){n.hasClass("hide")?a():c()}),this.el.on("touchstart",function(t){t.stopPropagation()}),void window.addEventListener("touchstart",c);o.on("mouseenter",function(){n.hasClass("hide")&&a()})}},{key:"selectChange",value:function(t){var e=this.showList,n=this.selected,o=h('.collect li[key="'.concat(n,'"]'),this.el),r=y('li[key="'.concat(n,'"]'),this.el),i=h('.collect li[key="'.concat(t,'"]'),this.el),a=y('li[key="'.concat(t,'"]'),this.el);-1==e.indexOf(n)&&o.addClass("hide"),r.removeClass("selected"),a.addClass("selected"),i.removeClass("hide"),this.selected=t}},{key:"collectChange",value:function(t){var e=this.showList,n=this.selected,o=h('.collect li[key="'.concat(t,'"]'),this.el),r=h('.dropdown li[key="'.concat(t,'"] .collect-icon'),this.el),i=h("i",r),a=e.indexOf(t);if(a>-1)return n!=t&&o.addClass("hide"),r.removeClass("collected"),i.removeClass("iconStar"),i.addClass("iconStar-o"),void e.splice(a,1);o.removeClass("hide"),r.addClass("collected"),i.addClass("iconStar"),i.removeClass("iconStar-o"),e.push(t)}},{key:"render",value:function(){this.el.html('<div class="collect"></div><div class="dropdown hide"></div><div class="border-line"></div>')}}]),e}();n(18);function om(t){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function im(t,e){return!e||"object"!==om(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function am(t,e,n){return(am="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function cm(t){return(cm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function um(t,e){return(um=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sm=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.kStorage,o=n.periodCollects,r=n.period;return t.list=t.kConfig.periods,t.showList=o,t.selected=r,im(this,cm(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&um(t,e)}(e,nm),function(t,e,n){e&&rm(t.prototype,e),n&&rm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;am(cm(e.prototype),"bindEvent",this).call(this),this.on("period-edit",function(e){var n=e.attr("type"),o=e.attr("key");switch(n){case"edit":t.setEditState();break;case"complete":t.setCompleteState();break;case"remove":t.setPeriodState(o,"bottom");break;case"add":t.setPeriodState(o,"top")}}),this.on("show",function(){h(".dropdown",t.el).addClass("complete").removeClass("edit"),t.setPeriodList()})}},{key:"setLanguage",value:function(){var t=this,e=this.lang.period;this.list.forEach(function(n){var o=n.replace(/\D/g,""),r=n.replace(/\d/g,"");y('span[key="'.concat(n,'"]'),t.el).html("".concat("line"==r?"":o).concat(e[r]))}),y(".dropdown div[lang]",this.el).each(function(t){var n=h(t),o=n.attr("lang");n.html(e[o])})}},{key:"setEditState",value:function(){h(".dropdown",this.el).addClass("edit").removeClass("complete")}},{key:"setCompleteState",value:function(){h(".dropdown",this.el).addClass("complete").removeClass("edit");var t=[];y(".top li",this.el).each(function(e){var n=h(e);n.hasClass("hide")||t.push(n.attr("key"))}),this.showList=t,this.emit("collect-change",t.concat())}},{key:"setPeriodState",value:function(t,e){y('.dropdown li[key="'.concat(t,'"]'),this.el).addClass("hide"),h(".dropdown .".concat(e,' li[key="').concat(t,'"]'),this.el).removeClass("hide")}},{key:"setPeriodList",value:function(){var t=this;y(".dropdown li[key]",this.el).removeClass("hide"),this.list.forEach(function(e){var n=t.showList.includes(e),o=h('.top li[key="'.concat(e,'"]'),t.el),r=h('.bottom li[key="'.concat(e,'"]'),t.el);n?r.addClass("hide"):o.addClass("hide")})}},{key:"setTopBottom",value:function(){var t=h(".dropdown .top",this.el),e=h(".dropdown .bottom",this.el),n=y("li.hide",t),o=y("li.hide",e);t.removeClass("hide"),e.removeClass("hide"),n&&n.length==this.list.length&&t.addClass("hide"),o&&o.length==this.list.length&&e.addClass("hide")}},{key:"render",value:function(){var t=this;am(cm(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[],a=[];this.list.forEach(function(e){var n=t.selected==e?"selected":"",o=t.showList.includes(e)?"":"hide",c='key="'.concat(e,'"');r.push('<li class="'.concat(n," ").concat(o,'" ').concat(c,"><span ").concat(c," /></li>")),i.push('<li class="'.concat(n," ").concat(o,'" ').concat(c,' ev="period" type="remove"><span ').concat(c,"></span><div>-</div></li>")),a.push('<li class="'.concat(n," ").concat(o?"":"hide",'" ').concat(c,' ev="period" type="add"><span ').concat(c,"></span><div>+</div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html("<ul>".concat(r.join(""),"</ul>"));var c='<div class="top"><div class="period-header"><div lang="my"></div><div lang="edit" ev="period" type="edit"></div><div lang="complete" ev="period" type="complete"></div></div><ul>'.concat(i.join(""),"</ul></div>"),u='<div class="bottom"><div class="period-header"><div lang="more"></div></div><ul>'.concat(a.join(""),"</ul></div>");o.addClass("complete"),o.html("".concat(c).concat(u))}}]),e}();function lm(t){return(lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pm(t,e){return!e||"object"!==lm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hm(t){return(hm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ym(t,e){return(ym=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dm=Ot.Original,bm=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pm(this,hm(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ym(t,e)}(e,Uv),function(t,e,n){e&&fm(t.prototype,e),n&&fm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target).closest("li");if(n){var o=!n.hasClass("selected");n.removeClass("selected"),o&&t.kStorage.klineType===dm&&n.addClass("selected"),t.emit("switch",o)}})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_indicator)}},{key:"renderOriginal",value:function(){var t=h("li",this.el);this.kStorage.showIndics?t.addClass("selected"):t.removeClass("selected")}},{key:"renderTradingView",value:function(){h("li",this.el).removeClass("selected")}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconzhibiaozhuanqu"></i></li>'),this.kStorage.klineType===dm?this.renderOriginal():this.renderTradingView()}}]),e}();n(19);function gm(t){return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _m(t,e){return!e||"object"!==gm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wm(t,e,n){return(wm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Om(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Om(t){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sm(t,e){return(Sm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pm=[],km=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.kConfig.mainIndics,o=t.kStorage.mainIndic;return t.list=n,t.showList=o.length>0?o:["None"],Pm=vm(o),_m(this,Om(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sm(t,e)}(e,nm),function(t,e,n){e&&mm(t.prototype,e),n&&mm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;wm(Om(e.prototype),"bindEvent",this).call(this),this.on("select-click",function(e){if(y("li",t.el).removeClass("selected"),y(".collect li",t.el).addClass("hide"),y(".dropdown li i",t.el).removeClass("iconicn-d-check-outline-lg").addClass("iconcheckbox-selecte"),"None"==e)Pm=[];else{var n=Pm.indexOf(e);n>-1?Pm.splice(n,1):Pm.push(e),Pm.length>2&&(Pm=Pm.slice(1,3)),Pm.forEach(function(e){y('li[key="'.concat(e,'"]'),t.el).addClass("selected"),h('.collect li[key="'.concat(e,'"]'),t.el).removeClass("hide"),h('.dropdown li[key="'.concat(e,'"] i'),t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")})}0==Pm.length&&(y('li[key="None"]',t.el).addClass("selected"),h('.collect li[key="None"]',t.el).removeClass("hide"),h('.dropdown li[key="None"] i',t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")),t.emit("main-indicators",vm(Pm))})}},{key:"reset",value:function(){var t=this.kConfig.mainIndics,e=this.kStorage.mainIndic;this.list=t,this.showList=e.length>0?e:["None"],Pm=vm(e),this.el.off("click"),this.el.off("mouseleave"),this.off("select-click"),this.init()}},{key:"render",value:function(){var t=this;wm(Om(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[];this.list.forEach(function(e){var n=t.showList.indexOf(e)>-1,o='key="'.concat(e,'"'),a='class="'.concat(n?"selected":"hide",' stop-propagation"'),c='class="'.concat(n?"selected":"",' k-checkbox"'),u='class="'.concat(n?"iconfont iconicn-d-check-outline-lg":"iconfont iconcheckbox-selecte",'"');r.push("<li ".concat(o," ").concat(a,"><span ").concat(o,">").concat(e,"</span></li>")),i.push("<li ".concat(o," ").concat(c,"><span ").concat(o,">").concat(e,'</span><div class="k-checkbox"><i ').concat(u,"></i></div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html('<ul class="select-full">'.concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();n(20);function Cm(t){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Am(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xm(t,e){return!e||"object"!==Cm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Em(t,e,n){return(Em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Tm(t){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mm(t,e){return(Mm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rm={CandleStick:"iconcandlestick",CandleStickHLC:"iconcandlestickhlc",OHLC:"iconohlc"},Dm=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.list=t.kConfig.mainStyles,t.selected=t.kStorage.mainStyle,xm(this,Tm(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mm(t,e)}(e,nm),function(t,e,n){e&&jm(t.prototype,e),n&&jm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;Em(Tm(e.prototype),"bindEvent",this).call(this),this.on("collect-change",function(){t.emit("style-collect",Am(t.showList))})}},{key:"render",value:function(){var t=this;Em(Tm(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[];this.list.forEach(function(e){var n='name="'.concat(e,'"'),o='key="'.concat(e,'"'),a=t.showList.indexOf(e)>-1,c='class="'.concat(t.selected==e?"selected":a||"hide",'"'),u='class="'.concat(t.selected==e?"selected":"",'"'),s='class="'.concat(a?"collected":"",' collect-icon"'),l='class="'.concat(a?"iconfont iconStar":"iconfont iconStar-o",'"');r.push("<li ".concat(n," ").concat(o," ").concat(c,'><i class="iconfont ').concat(Rm[e],'"></i></li>')),i.push("<li ".concat(o," ").concat(u,'><i class="iconfont ').concat(Rm[e],'"></i><span ').concat(o,">").concat(e,"</span><div ").concat(s,"><i ").concat(l,"></i></div></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html("<ul>".concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();n(21);function Im(t){return(Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nm(t,e){return!e||"object"!==Im(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fm(t,e,n){return(Fm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Bm(t){return(Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vm(t,e){return(Vm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hm=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.list=["inst_price","index_price","mark_price"],t.selected=t.kConfig.priceType,Nm(this,Bm(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vm(t,e)}(e,nm),function(t,e,n){e&&Lm(t.prototype,e),n&&Lm(t,n)}(e,[{key:"setLanguage",value:function(){var t=this.lang.price_type;y("span[lang]",this.el).each(function(e){var n=h(e),o=n.attr("lang");n.html(t[o])})}},{key:"setSelected",value:function(t){this.selectChange(t),this.selected?this.show():this.hide()}},{key:"render",value:function(){var t=this;this.selected||this.hide(),Fm(Bm(e.prototype),"render",this).call(this);var n=h(".collect",this.el),o=h(".dropdown",this.el),r=[],i=[],a=this.lang.price_type;this.list.forEach(function(e){var n=t.selected===e,o='key="'.concat(e,'"'),c='class="'.concat(n?"selected":"hide",'"'),u='class="'.concat(n?"selected":"",'"'),s=a[e],l="lang=".concat(e);r.push("<li ".concat(o," ").concat(c,"><span ").concat(l," >").concat(s,"</span></li>")),i.push("<li ".concat(o," ").concat(u,"><span ").concat(l," >").concat(s,"</span></li>"))}),r.push('<li class="arrow"><span><i class="iconfont iconUnfold"></i></span></li>'),n.html('<ul class="select-full">'.concat(r.join(""),"</ul>")),o.html("<ul>".concat(i.join(""),"</ul>"))}}]),e}();function Um(t){return(Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ym(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wm(t,e){return!e||"object"!==Um(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xm(t){return(Xm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zm(t,e){return(zm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gm=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wm(this,Xm(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zm(t,e)}(e,Uv),function(t,e,n){e&&Ym(t.prototype,e),n&&Ym(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target).closest("li");if(n){var o=n.hasClass("selected");o?n.removeClass("selected"):n.addClass("selected"),t.emit("switch",!o)}})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_tools)}},{key:"render",value:function(){if(gt.isMobile)this.delete();else{var t='class="'.concat(this.kStorage.showLineTool?"selected":"",'"');this.el.html("<li ".concat(t,'><i class="iconfont iconmeasure-tool"></i></li>'))}}}]),e}();function Qm(t){return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Km(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jm(t,e){return!e||"object"!==Qm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qm(t){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zm(t,e){return(Zm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $m=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jm(this,qm(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zm(t,e)}(e,Uv),function(t,e,n){e&&Km(t.prototype,e),n&&Km(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){t.emit("click",!0)})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_setting)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconmenu-administration"></i></li>')}}]),e}();function t_(t){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n_(t,e){return!e||"object"!==t_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r_(t,e){return(r_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i_=!1,a_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n_(this,o_(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r_(t,e)}(e,Uv),function(t,e,n){e&&e_(t.prototype,e),n&&e_(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){i_=!i_,gt.isMobile&&!gt.isUC&&(i_?t.requestFullscreen():t.cancelFullScreen());var e=h("i",t.el);e.removeClass("iconexitfullscreen1"),e.removeClass("iconfullscreen2"),i_?e.addClass("iconexitfullscreen1"):e.addClass("iconfullscreen2"),t.emit("click",i_),t.setLanguage(),h(".popover",t.el.parent()).addClass("hide")})}},{key:"setLanguage",value:function(){var t=i_?this.lang.str_fullscreen_close:this.lang.str_fullscreen;h("li",this.el).attr("name",t)}},{key:"requestFullscreen",value:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.call(t)}},{key:"cancelFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;e&&e.call(t)}},{key:"render",value:function(){this.kConfig.showFullscreen||this.hide(),this.el.html('<li><i class="iconfont iconfullscreen2"></i></li>')}}]),e}();n(22);function c_(t){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s_(t,e){return!e||"object"!==c_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l_(t){return(l_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f_(t,e){return(f_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s_(this,l_(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f_(t,e)}(e,Uv),function(t,e,n){e&&u_(t.prototype,e),n&&u_(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=h(e.target),o=n.attr("key");o&&o!=t.kStorage.klineType&&(y("span",t.el).removeClass("selected"),n.addClass("selected"),t.emit("toggle",o))})}},{key:"render",value:function(){this.kConfig.showToggle||this.hide();var t=this.kStorage.klineType,e='key="Original" class="'.concat("Original"==t?"selected":"",'"'),n="<span ".concat(e,">Original</span>"),o='key="TradingView" class="'.concat("TradingView"==t?"selected":"",'"'),r="<span ".concat(o,">TradingView</span>");this.el.html("".concat(n).concat(r))}}]),e}();n(23);function h_(t){return(h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d_(t,e){return!e||"object"!==h_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b_(t){return(b_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g_(t,e){return(g_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d_(this,b_(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}(e,Uv),function(t,e,n){e&&y_(t.prototype,e),n&&y_(t,n)}(e,[{key:"bindEvent",value:function(){if(!gt.isMobile){var t=this.el.parent(),e=h(".popover",t);t.on("mousemove",function(n){var o=h(n.target).closest("li");if(e.addClass("hide"),o){var r=o.attr("name");if(r){e.removeClass("hide"),e.addClass("bottom"),e.removeClass("top"),h(".title",e).html(r);var i=t[0].getBoundingClientRect(),a=i.top,c=i.left,u=e[0].getBoundingClientRect().width,s=o[0].getBoundingClientRect(),l=s.left-c-u/2+s.width/2,f=s.bottom-a;e.css({left:"".concat(l,"px"),top:"".concat(f,"px")})}}}).on("mouseleave",function(){e.addClass("hide")})}}},{key:"render",value:function(){gt.isMobile?this.delete():this.el.html('<div class="title"></div><div class="triangle"></div><div class="split"></div>')}}]),e}();function m_(t){return(m_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function __(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w_(t,e){return!e||"object"!==m_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O_(t){return(O_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S_(t,e){return(S_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w_(this,O_(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S_(t,e)}(e,Uv),function(t,e,n){e&&__(t.prototype,e),n&&__(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(){t.emit("click",!0)})}},{key:"setLanguage",value:function(){h("li",this.el).attr("name",this.lang.str_compare)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconcompare-tool"></i></li>')}}]),e}(),k_=n(4),C_=n.n(k_);n(24),n(25);function A_(t){return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){M_(t,e,n[e])})}return t}function x_(t){return(x_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E_(t,e){return(E_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M_(T_(T_(n=function(t,e){return!e||"object"!==A_(e)&&"function"!=typeof e?T_(t):e}(this,x_(e).call(this,t)))),"init",function(){var t=n.kConfig,e=t.theme,o=t.barHeight;n.setTheme(e),n.el.css({height:"".concat(o,"px")});var r={kSettings:n.kSettings,kConfig:n.kConfig,kStorage:n.kStorage,kState:n.kState};new v_(j_({},r,{el:h(".popover",n.el)})),new Qv(j_({},r,{el:h(".icon",n.el)})),n.periodSelect=new sm(j_({},r,{el:h(".periods",n.el)})),n.periodSelect.on("select-change",function(t){n.emit("period-select",t),n.resize()}),n.periodSelect.on("collect-change",function(t){n.kSettings.updateStorage({periodCollects:t}),n.resize()}),n.mainIndicators=new km(j_({},r,{el:h(".main-indicators",n.el)})),n.mainIndicators.on("main-indicators",function(t){n.emit("main-indicators",t),n.resize()}),n.mainStyle=new Dm(j_({},r,{el:h(".main-style",n.el)})),n.mainStyle.on("select-change",function(t){n.emit("style-select",t),n.resize()}),n.mainStyle.on("style-collect",function(t){n.kSettings.updateStorage({mainStyleCollects:t}),n.resize()}),n.priceType=new Hm(j_({},r,{el:h(".price-type",n.el)})),n.priceType.on("select-change",function(t){n.emit("price-type",t)}),n.technicalIndicators=new bm(j_({},r,{el:h(".technical-indicator",n.el)})),n.technicalIndicators.on("switch",function(t){n.emit("technical-indicators",t)}),n.lineTool=new Gm(j_({},r,{el:h(".line-tool",n.el)})),n.lineTool.on("switch",function(t){n.emit("line-tool",t)}),n.compare=new P_(j_({},r,{el:h(".compare",n.el)})),n.compare.on("click",function(t){n.emit("compare",t)}),n.setting=new $m(j_({},r,{el:h(".setting",n.el)})),n.setting.on("click",function(t){n.emit("setting",t)}),n.fullscreen=new a_(j_({},r,{el:h(".fullscreen",n.el)})),n.fullscreen.on("click",function(t){n.emit("fullscreen",t)}),n.toggle=new p_(j_({},r,{el:h(".toggle",n.el)})),n.toggle.on("toggle",function(t){t===Ot.Original?n.technicalIndicators.renderOriginal():n.technicalIndicators.renderTradingView(),n.kSettings.updateStorage({klineType:t}),n.emit("kline-toggle",t)}),n.resize()}),M_(T_(T_(n)),"setTheme",function(t){var e=Oe(t,n.kConfig).Background;n.el.attr("class","k-toolbar ".concat(t)),n.el.css({background:e})}),M_(T_(T_(n)),"setLanguage",function(t){n.kState.language=t}),M_(T_(T_(n)),"resize",function(){var t=n.el,e=h(".setting",t),o=t[0].offsetWidth;y(".collect li",t).addClass("hide"),y(".collect li.selected, .collect li.arrow",t).removeClass("hide"),y(".dropdown .collected, .dropdown .top li span",t).each(function(n){var r=h(n).parent().attr("key"),i=h('.collect li[key="'.concat(r,'"]'),t);if(i.hasClass("hide")&&!h(n).parent().hasClass("hide")){i.removeClass("hide");var a=document.getElementById("k-toolbar-right").getBoundingClientRect().width;o-e[0].offsetLeft<a+50&&i.addClass("hide")}})});var o=t.anchor,r=t.kSettings;h(C_.a).append(o),n.el=h(".k-toolbar",o),n.kSettings=r;var i=n.kSettings,a=i.config,c=i.storage;return n.kConfig=a,n.kStorage=c,n.kState=M({language:a.language}),n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E_(t,e)}(e,s),e}(),D_=n(5),I_=n.n(D_);n(26);function L_(t){return(L_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N_(t){return(N_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F_(t,e){return(F_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V_(B_(B_(n=function(t,e){return!e||"object"!==L_(e)&&"function"!=typeof e?B_(t):e}(this,N_(e).call(this)))),"init",function(){var t=n.kConfig,e=t.element,o=t.width,r=t.height,i=h(e);n.anchor=i,i.html(I_.a),n.containerAnchor=h(".kline-wrap",i),n.oklineAnchor=h("#okline-wrap",i),n.tvklineAnchor=h("#tv-kline-wrap",i),n.toolbarAnchor=h(".k-toolbar-wrap",i),n.loaddingAnchor=h(".kline-loadding",i);var a=new R_({anchor:n.toolbarAnchor,kSettings:n.kSettings});n.toolbar=a,n.initKline(),n.resize(o,r),a.on("period-select",function(t){n.emit("period-select",t),n.setPeriod(t)}),a.on("technical-indicators",function(t){n.kline.switchDeputyIndicator(t)}),a.on("main-indicators",function(t){n.kline.setMainIndicator(t)}),a.on("style-select",function(t){n.kline.setChartStyle(t)}),a.on("price-type",function(t){n.emit(P.PRICE_TYPE,t)}),a.on("line-tool",function(t){n.kline.switchDrawLine(t)}),a.on("compare",function(){n.kline.showCompareOrAdd()}),a.on("setting",function(t){n.kline.switchSettings(t)}),a.on("fullscreen",function(t){n.switchFullscreen(t)}),a.on("kline-toggle",function(){n.initKline()})}),V_(B_(B_(n)),"initKline",function(){n.isOriginal()?n.createOKline():n.createTV()}),V_(B_(B_(n)),"isOriginal",function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.kStorage.klineType)===Ot.Original}),V_(B_(B_(n)),"createOKline",function(){n.showLoading(),n.tvKline&&n.tvKline.destroy(),n.tvKline=null,n.oklineAnchor.css({display:"flex"}),n.tvklineAnchor.css({display:"none"}),n.oklineAnchor.html("");var t=n.toolbar,e=t.mainIndicators,o=t.mainStyle,r=t.lineTool,i=t.compare;e.show(),o.show(),r.show(),i.hide(),n.toolbar.resize(),n.okline=new Pv({kSettings:n.kSettings,onChartReady:n.onChartReady,anchor:n.oklineAnchor}),n.kline=n.okline}),V_(B_(B_(n)),"createTV",function(){n.showLoading(),n.okline&&n.okline.destroy(),n.okline=null,n.oklineAnchor.css({display:"none"}),n.tvklineAnchor.css({display:"flex"});var t=n.toolbar,e=t.mainIndicators,o=t.mainStyle,r=t.lineTool,i=t.compare;e.hide(),o.hide(),r.hide(),n.kConfig.compare?i.show():i.hide(),n.toolbar.resize(),n.tvKline=new Lv({container_id:"tv-kline-wrap",kSettings:n.kSettings,onChartReady:n.onChartReady}),n.kline=n.tvKline}),V_(B_(B_(n)),"onChartReady",function(){n.hideLoading()}),V_(B_(B_(n)),"ready",function(){return new Promise(function(t,e){n.kline&&n.kline.ready(t,e)})}),V_(B_(B_(n)),"showLoading",function(){var t=Oe(n.kConfig.theme).Background;n.loaddingAnchor.css({display:"block",backgroundColor:t})}),V_(B_(B_(n)),"hideLoading",function(){n.loaddingAnchor.css({display:"none"})}),V_(B_(B_(n)),"setPeriod",function(t){n.kline.setPeriod(t)}),V_(B_(B_(n)),"setTheme",function(t){h(".kline-wrap",n.el).attr("class","kline-wrap ".concat(t)),n.toolbar.setTheme(t),n.kline.setTheme(t)}),V_(B_(B_(n)),"setReverseColor",function(t){n.kline.setReverseColor(t)}),V_(B_(B_(n)),"setLanguage",function(t){n.toolbar.setLanguage(t),n.kline.setLanguage(t)}),V_(B_(B_(n)),"updateToolbar",function(t){if(t){var e=t.compare,o=t.priceType;n.kSettings.updateCompare(e),n.toolbar.mainIndicators.reset(),n.isOriginal()||(n.toolbar.mainIndicators.hide(),e?n.toolbar.compare.show():n.toolbar.compare.hide()),n.toolbar.priceType.setSelected(o)}}),V_(B_(B_(n)),"updateConfig",function(t){n.updateToolbar(t),n.kline.updateConfig(t)}),V_(B_(B_(n)),"setSymbol",function(t,e){n.updateToolbar(e),n.kline.setSymbol(t,e)}),V_(B_(B_(n)),"setDepth",function(t){n.kline.setDepth&&n.kline.setDepth(t)}),V_(B_(B_(n)),"setOrders",function(t){n.kline.setOrders&&n.kline.setOrders(t)}),V_(B_(B_(n)),"setOrderFilled",function(t){n.kline.setOrderFilled&&n.kline.setOrderFilled(t)}),V_(B_(B_(n)),"setPositions",function(t){n.kline.setPositions&&n.kline.setPositions(t)}),V_(B_(B_(n)),"updateLastData",function(t){var e=n.kline.updateLastData;e&&e(t)}),V_(B_(B_(n)),"switchToggle",function(t){var e=n.toolbar.toggle;if(t)return e.show(),void n.toolbar.resize();e.hide(),n.isOriginal()||n.createOKline()}),V_(B_(B_(n)),"switchFullscreen",function(t){n.fullscreen=t,n.resize(),n.emit(P.FULL_SCREEN,t)}),V_(B_(B_(n)),"resize",function(t,e){if(n.fullscreen)n.layout(window.innerWidth,window.innerHeight);else{var o=n.anchor[0].getBoundingClientRect();t=t||o.width||n.kConfig.width,e=e||o.height||n.kConfig.height,n.layout(t,e),n.kSettings.updateConfig({width:t,height:e})}}),V_(B_(B_(n)),"layout",function(t,e){var o=n.fullscreen?{position:"fixed",zIndex:"10000"}:{position:"relative",zIndex:"auto"};n.containerAnchor.css(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){V_(t,e,n[e])})}return t}({},o,{width:"".concat(t,"px"),height:"".concat(e,"px")}));var r=e-n.toolbarAnchor[0].getBoundingClientRect().height;n.kline&&n.kline.resize&&n.kline.resize(t,r),n.toolbar.resize()}),V_(B_(B_(n)),"destroy",function(){n.removeAllListeners(),n.kline.destroy()}),n.kSettings=new wt(t);var o=n.kSettings,r=o.config,i=o.storage;return n.kConfig=r,n.kStorage=i,n.eventType=P,n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F_(t,e)}(e,s),e}();n.d(e,"CombKline",function(){return H_})}]).CombKline});