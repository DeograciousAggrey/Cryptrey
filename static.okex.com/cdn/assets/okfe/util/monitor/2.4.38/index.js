!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=window.okGlobal,o=void 0===r?{}:r,i=o.site,a=void 0===i?{}:i,c=o.cdnBaseUrl,s=void 0===c?"//static.coinall.ltd":c,u={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_API_KEY:"okex"===a.sign?"56bf9d43d57f079e506b4f26c70a698f":"21c676d501be3d648464d7ae0038cd53",CDN_BASE_URL:s,MILLISECONDS_OF_30_DAYS:2592e6};function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d,g=/([^{]+)({.+})?/,p=/^{|}$/g,v=/^['"]|['"]$/g,m=/\/\/([^/]+)\//,h=Object.prototype.toString,y={stringifyUrlParam:function(e){var t=e.data,n=e.prefix,r=[];return Object.keys(t).forEach(function(e){r.push("".concat(n).concat(e,"=").concat(t[e]))}),r.join("&")},isDevTestEnv:function(){var e=window.okGlobal;return["pre","prod"].indexOf((void 0===e?{}:e).envSign)<0},isProdEnv:function(){var e=window.okGlobal;return"prod"===(void 0===e?{}:e).envSign},getUrlDomain:function(e){var t=e.match(m);return t?t[1]:""},getUrlQuery:function(e){var t=new RegExp("(^|&)".concat(e,"=([^&]*)(&|$)"),"i"),n=window.location.search.substr(1).match(t);return n?decodeURIComponent(n[2]):""},getOriginalUrl:function(e){return e.replace(/([?&])t=\d+(&)?/,function(e,t,n){return t&&n?t===n?"&":"?":""})},setCookie:function(e,t,n){var r=new Date;r.setTime(r.getTime()+n),document.cookie="".concat(e,"=").concat(encodeURIComponent(t),";expires=").concat(r.toGMTString(),";path=/")},getCookie:function(e){var t=new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")),n=document.cookie.match(t);return n?decodeURIComponent(n[2]):""},parseTarget:function(e){var t=e.match(g),n={key:"",data:{}};if(t){var r=t[1],o=t[2],i={};if(o)o.replace(p,"").split(",").forEach(function(e){var t=e.split(":"),n=l(t=t.map(function(e){return e.trim().replace(v,"")}),2),r=n[0],o=n[1];i[r]=o});n.key=r,n.data=i}return n},matchType:function(e,t){return h.call(e)==="[object ".concat(t,"]")},isArray:function(e){return this.matchType(e,"Array")},isObject:function(e){return this.matchType(e,"Object")},generateUUID:function(){var e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},valueExists:function(e){return void 0!=e&&""!==e},passedNamingCheck:function(e){return!/[^a-z0-9_]/.test(e)},toFixed:function(e){return Number(e.toFixed(4))},toUnderLineFormat:function(e){return e.replace(/([A-Z])/g,function(e,t,n){return 0===n?"".concat(t.toLowerCase()):"_".concat(t.toLowerCase())})}},b=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver.com",type:"naverSEO"}],w=function(){for(var e=y.getUrlDomain(document.referrer),t=0;t<b.length;t++){var n=b[t],r=n.keyword,o=n.type;if(e.indexOf(r)>-1)return o}return""},S=window.okGlobal,E=void 0===S?{}:S,O={},_=/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent),I=(null===(d=E.broker)||void 0===d?void 0:d.is)||"1"===localStorage.simulatedTrading,k=localStorage.ok_monitor,j=void 0===k?'{ "_expires": {} }':k,x=JSON.parse(j),P="undefined"!=typeof window,A={setEnv:function(e){var t=window.screen,n=localStorage,r=n._tk,o=n.devid,i=navigator,a=i.systemLanguage,c=i.language,s=document.referrer;O.site=e.site,O.lcl=y.getCookie("locale"),s&&(s.length>256&&(s=s.substr(0,256)),O.rf=s),r&&(O.tk=r);var u=o;u||(u=y.generateUUID(),localStorage.devid=u),O.uid=u,O.lan=(a||c).toLowerCase();var l="0x0";if(t){var f=t.width,d=t.height;l="".concat(f,"x").concat(d)}O.scr=l;var g=y.getCookie("first_ref");g&&(g.length>256&&(g=g.substr(0,256)),O.frf=g)},getEnv:function(){return O},isInApp:function(){return _},toLocalStorage:function(e){var t=e.key,n=e.value,r=e.maxAge;x[t]=n,x._expires[t]=Date.now()+r,localStorage.ok_monitor=JSON.stringify(x)},getClientValue:function(e){return sessionStorage[e]?sessionStorage[e]:Date.now()<x._expires[e]?x[e]:""},shouldIgnoreAmpEvent:function(){return I},isOKEx:function(){var e,t,n;return"okex"===(null===(e=window)||void 0===e?void 0:null===(t=e.okGlobal)||void 0===t?void 0:null===(n=t.site)||void 0===n?void 0:n.sign)},isInSSR:function(){return!P},isInBrowser:function(){return P}},C=function(){var e=window.performance.timing,t=e.redirectStart,n=e.redirectEnd,r=e.domainLookupStart,o=e.domainLookupEnd,i=e.connectStart,a=e.connectEnd,c=e.requestStart,s=e.responseEnd,u=e.domLoading,l=e.domInteractive,f=e.domContentLoadedEventStart,d=e.domContentLoadedEventEnd,g=e.navigationStart;return{redirect:n-t,dns:o-r,tcp:a-i,req:s-c,dom:l-u,res:d-f,white:e.responseStart-g}},T=function(){var e=u.REQUEST_LONG_WAIT_TIME,t=window.performance.getEntriesByType("resource").filter(function(t){var n=t.requestStart;return t.responseStart-n>e});return t.sort(function(e,t){return e.duration>t.duration?-1:1}),t.length>10&&(t.length=10),t.map(function(e){var t=e.name,n=e.requestStart,r=e.responseStart,o=e.startTime,i=e.duration,a=e.transferSize;return{url:y.getOriginalUrl(t),st:y.toFixed(o),wt:y.toFixed(r-n),sz:y.toFixed(a),du:y.toFixed(i)}})},U=JSON.parse(localStorage.__error__||"[]"),R=function(e){var t=e.message,n=e.filename,r=e.lineno,o=e.colno,i=e.error,a="";return i&&i.stack?-1!==(a=i.stack).indexOf("@")&&(a="".concat(t," \n\r ").concat(a)):(i||t)&&(a="ThrowError: ".concat(JSON.stringify(i||t)," \n\r at ").concat(n,": ").concat(r,": ").concat(o)),{msg:t,file:n,line:r,col:o,stack:a,url:encodeURIComponent(window.location.href)}},L=function(e){var t=e.file,n=e.line,r=e.col,o="".concat(t,"__").concat(n,"__").concat(r);return U.includes(o)},D=function(e){var t=e.file,n=e.line,r=e.col,o="".concat(t,"__").concat(n,"__").concat(r);U.unshift(o),U.length>50&&U.pop(),setTimeout(function(){localStorage.__error__=JSON.stringify(U)},0)};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){F(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=null,G=!1,K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A.setEnv(t)}return function(e,t,n){t&&B(e.prototype,t),n&&B(e,n)}(e,[{key:"logPV",value:function(){if(!G){var e=M({_act:"_pv",_ct:"_pv"},this._getCommonData());this.sendLogs(e),G=!0}}},{key:"logEvent",value:function(e){var t={},n=e.category,r=e.action,o=e.target,i=e.params,a=e.extras,c=e._m;if(Object.assign(t,M({_ct:n,_act:r,_lb:encodeURIComponent(o||"")},this._getCommonData())),y.isArray(i)){var s=0,u=0;i.forEach(function(e,n){if(y.isObject(e)){var r=e.value,o=e.random,i=encodeURIComponent(r);o?t["_unlist".concat(u++)]=i:t["_reser".concat(s++)]=i}else t["_reser".concat(n)]=encodeURIComponent(e)})}else if(y.valueExists(i)){var l=i;y.isObject(i)&&(l=JSON.stringify(i));var f=encodeURIComponent(l);t._v=f,t._reser0=f}if(a){a.page=encodeURIComponent(window.location.href);var d={};Object.keys(a).forEach(function(e){d["__".concat(e)]=a[e]}),Object.assign(t,d)}return c&&(t._m=c),this.sendLogs(t)}},{key:"_getCommonData",value:function(){var e=M({},A.getEnv());localStorage._tk&&(e.tk=localStorage._tk);var t=sessionStorage.src,n=A.getClientValue("pageId"),r={_cid:A.getClientValue("channelId"),_pgid:n,_source:t};return Object.keys(e).forEach(function(t){r["_".concat(t)]=encodeURIComponent(e[t])}),r}},{key:"sendLogs",value:function(e){var t=this,n=[];if(Object.keys(e).forEach(function(t){var r=e[t];y.valueExists(r)?n.push("".concat(t,"=").concat(r)):delete e[t]}),y.isDevTestEnv()){var r=window.console;return r.groupCollapsed("dev monitor: ".concat(e._ct," > ").concat(e._act)),r.log(decodeURIComponent(JSON.stringify(e,null,2))),r.groupEnd(),Promise.resolve()}return A.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(function(e){if(e){var r="_tk=".concat(encodeURIComponent(e)),o=n.findIndex(function(e){return/^_tk/.test(e)});o>-1?n[o]=r:n.push(r)}return t.sendRequest(n.join("&"))}).catch(function(){return t.sendRequest(n.join("&"))}):this.sendRequest(n.join("&"))}},{key:"sendRequest",value:function(e){var t="?".concat(e,"&_r=").concat(Math.floor(2147483648*Math.random()));return new Promise(function(e){if(navigator.sendBeacon)navigator.sendBeacon("/jsstat/sb".concat(t)),e();else{var n=!1,r=new Image;r.onload=function(){n||(e(),n=!0)},r.src="/jsstat/s.gif".concat(t),setTimeout(function(){n||(e(),n=!0)},150)}})}}]),e}(),V=function(e){return J||(J=new K(e))},q=u.Actions,X=u.Configs,Q=function(e,t){document.addEventListener("click",function(n){var r=n.target;r.getAttribute(X.ATTR_LISTEN)&&t.preprocess();var o=r.getAttribute(X.ATTR_CLICK);if(o){var i=y.parseTarget(o),a=i.key,c=i.data;a&&e({target:a,action:q.CLICK,params:c,extras:{area:c.area}})}})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W={},H=u.Actions,Z=u.Configs,ee={listen:function(e){this.trackFn=e;var t=new window.IntersectionObserver(this.onSectionChange.bind(this),{threshold:[.5,1]});document.querySelectorAll("[".concat(Z.ATTR_EXPOSE,"]")).forEach(function(e){t.observe(e)}),this.observer=t},onSectionChange:function(e){var t=this;e.forEach(function(e){var n=e.target,r=e.isIntersecting,o=n.getAttribute(Z.ATTR_EXPOSE),i=y.parseTarget(o),a=i.key,c=i.data,s=Number(e.time.toFixed(2));if(r){var u=setTimeout(function(){var e=W[a],r=n.getBoundingClientRect(),o=window,i=o.innerHeight,u=o.innerWidth,l=r.top,f=r.bottom,d=r.left,g=r.right;if((l>=0&&l<=i||f>=0&&f<=i)&&(d>=0&&d<=u||g>=0&&g<=u)){var p=c.area;delete c.area,t.trackFn({target:a,action:H.EXPOSE,params:Y(Y({},c),{},{time:s}),extras:{area:p}}),t.observer.unobserve(n),e.forEach(function(e){window.clearTimeout(e)}),delete W[a]}else e.shift()},Z.EXPOSE_DURATION);W[a]||(W[a]=[]),W[a].push(u)}})}};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach(function(t){re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe,ie=u.Configs,ae={listen:function(e){var t=function(t){e.logEvent(ne(ne({},t),{},{category:"ok"}))};this.preprocess(),Q(t,this),ee.listen(t,this)},preprocess:function(){document.querySelectorAll("[".concat(ie.ATTR_LISTEN,"]")).forEach(function(e){var t=e.getAttribute(ie.ATTR_LISTEN),n=t.indexOf(":");if(n>-1){var r=t.substring(0,n).trim(),o=t.substring(n+1).trim();r.split("+").forEach(function(t){e.setAttribute("data-".concat(t.trim()),o)}),e.removeAttribute(ie.ATTR_LISTEN)}})}};function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le="RESOLVE",fe="REJECT",de={createdScript:!1,getAmpInstancePromise:null,events:new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}return function(e,t,n){t&&ce(e.prototype,t),n&&ce(e,n)}(e,[{key:"on",value:function(e,t,n){for(var r=[],o=arguments.length,i=0;i<o;i++)r.push(arguments[i]);r=r.length>3?r.splice(3,r.length-1):[],void 0!==this.listeners[e]?this.listeners[e].push({scope:n,callback:t,args:r}):this.listeners[e]=[{scope:n,callback:t,args:r}]}},{key:"remove",value:function(e,t,n){if(void 0!==this.listeners[e])for(var r=this.listeners[e].length,o=0;o<r;o++){var i=this.listeners[e][o];i.scope==n&&i.callback==t&&this.listeners.splice(o,1)}}},{key:"has",value:function(e,t,n){if(void 0!==this.listeners[e]){var r=this.listeners[e].length;if(void 0===t&&void 0===n)return r>0;for(var o=0;o<r;o++){var i=this.listeners[e][o];if((!n||i.scope==n)&&i.callback==t)return!0}}return!1}},{key:"emit",value:function(e){if(void 0!==this.listeners[e]){for(var t=this.listeners[e].slice(),n=t.length,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];for(var a=0;a<n;a++){var c=t[a];if(c&&c.callback){var s=o.concat(c.args);c.callback.apply(c.scope,s)}}}}}]),e}()),getAmplitudeSDKInstance:function(){var e=this;return new Promise(function(t,n){e.events.on(le,function(e){t(e)}),e.events.on(fe,function(e){n(e)}),e.getInstance()})},getInstance:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return oe&&clearTimeout(oe),new Promise(function(n){var r=window.amplitude,o=localStorage._tk,i=sessionStorage.signUpCompleted,a=t||o;if(r){var c=r.getInstance();return a&&c.setUserId(a),i&&(c.logEvent("signup_completed"),sessionStorage.removeItem("signUpCompleted")),c.options&&e.events.emit(le,c),void n(c)}e.createdScript?e.getAmpInstancePromise.then(function(e){n(e)}):(e.getAmpInstancePromise=e.getAmpInstance(t),e.createdScript=!0,e.getAmpInstancePromise.then(function(e){n(e)}))})},getAmpInstance:function(e){var t=this;return new Promise(function(n,r){var o=document.createElement("script"),i="".concat(u.CDN_BASE_URL,"/").concat(y.isProdEnv()?"cdn":"cdnpre"),a="".concat(i,"/assets/okfe/libs/monitor/amplitude-7.1.1.js");o.setAttribute("src",a),o.setAttribute("type","text/javascript"),o.onload=function(){var o;if(window.amplitude){var i=localStorage._tk,a=e||i,c=window.amplitude.getInstance(),s={includeUtm:!0,includeReferrer:!0,includeGclid:!0,logAttributionCapturedEvent:!0,language:null===(o=window.okGlobal)||void 0===o?void 0:o.locale};if(A.isOKEx()){var l=y.getUrlDomain(window.location.href);s.apiEndpoint="".concat(l,"/amplitude"),s.forceHttps=!1}if(c.init(u.AMPLITUDE_API_KEY,null,s,function(e){t.events.emit(le,e)}),a&&(c.setUserId(a),sessionStorage.channelId&&c.setUserProperties({channel_id:sessionStorage.channelId})),sessionStorage.ampCacheEvents)JSON.parse(sessionStorage.ampCacheEvents).forEach(function(e){c.logEvent.apply(c,se(e))}),sessionStorage.ampCacheEvents="";sessionStorage.signUpCompleted&&(c.logEvent("signup_completed"),sessionStorage.removeItem("signUpCompleted")),n(c)}else r()},o.onerror=function(e){t.events.emit(fe,e),r(e)},document.head.appendChild(o)})}};A.isInBrowser()&&(oe=setTimeout(function(){oe=0,de.getInstance()},5e3));var ge=de;function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve=!1,me=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logAmplitudeEvent=function(e,t,r){if(A.isInSSR()||A.shouldIgnoreAmpEvent())return Promise.resolve();var o=r,i=!1;y.isObject(r)&&(o=r.tk,i=r.ignoreBackUp);var a={};for(var c in e=y.toUnderLineFormat(e),t)if(Object.prototype.hasOwnProperty.call(t,c)){var s=y.toUnderLineFormat(c);a[s]=t[c]}if(!y.passedNamingCheck(e))throw new Error("Bad action naming: ".concat(e));var u=Object.keys(a).filter(function(e){return!y.passedNamingCheck(e)});if(u.length>0)throw new Error("Bad params naming: [".concat(u.join(","),"]"));if(a.monitor_after_navigation){delete a.monitor_after_navigation;var l=JSON.parse(sessionStorage.ampCacheEvents||"[]");return l.push([e,a]),sessionStorage.ampCacheEvents=JSON.stringify(l),Promise.resolve()}return ge.getInstance(o).then(function(r){r.logEvent(e,a),i||n.act(e,t)})},A.isInSSR()||(this._logger=V(t),this._site=t.site,this._category=t.product,t.withPV&&this._logger.logPV(),ve||(this._initEventListener(),ve=!0))}return function(e,t,n){t&&pe(e.prototype,t),n&&pe(e,n)}(e,[{key:"report",value:function(e){var t=e.type,n=e.value;if(A.isInSSR())return Promise.resolve();var r=n;return(y.isObject(r)||y.isArray(r))&&(r=JSON.stringify(r)),this._logger.logEvent({category:"performance",action:t,params:r})}},{key:"logPV",value:function(){this._logger.logPV()}},{key:"resetAmplitudeUser",value:function(){return A.isInSSR()?Promise.resolve():ge.getInstance().then(function(e){return e.setUserId(null),e.regenerateDeviceId(),Promise.resolve()})}},{key:"track",value:function(e,t,n,r){if(A.isInSSR())return Promise.resolve();var o={category:this._category,action:n,target:t,params:r,extras:{area:e}};if(y.isObject(e)){var i=e.area,a=e.action,c=e.target,s=e.params;Object.assign(o,{action:a,target:c,params:s,extras:{area:i}})}return this._logger.logEvent(o)}},{key:"act",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isSyncAMP:!1};if(A.isInSSR())return Promise.resolve();var r=null===n||void 0===n?void 0:n.tk,o={category:this._category,action:e,params:t,_m:"1"};return y.isProdEnv()?(null===n||void 0===n?void 0:n.isSyncAMP)&&this.logAmplitudeEvent(e,t,{tk:r,ignoreBackUp:!0}):this.logAmplitudeEvent(e,t,{tk:r,ignoreBackUp:!0}),this._logger.logEvent(o)}},{key:"_initEventListener",value:function(){var e=this;window.addEventListener("load",function(){ae.listen(e._logger),setTimeout(function(){var t={timing:C()},n=T();n.length>0&&(t.slow=n),e.report({type:"report",value:JSON.stringify(t)})},u.PERF_REPORT_DEFER_TIME)}),window.addEventListener("error",function(t){var n=R(t);L(n)||(e._logger.logEvent({category:"error",action:"report",extras:n}),D(n))},!0)}}]),e}(),he=window.location,ye=he.href,be=he.pathname,we=u.MILLISECONDS_OF_30_DAYS,Se=/^\/(join|promotion)\//.test(be),Ee=function(e){sessionStorage.channelId=e,A.toLocalStorage({key:"channelId",value:e,maxAge:we}),sessionStorage.pageId=be,A.toLocalStorage({key:"pageId",value:be,maxAge:we})},Oe={parseChannelId:function(){var e="",t="",n=w();if(Se||(e=y.getUrlQuery("channelId"),t=y.getUrlQuery("channelFlag")),!e&&t&&(e=t),n&&(e=n),e)Ee(e);else{var r=A.getClientValue("channelId"),o=A.getClientValue("pageId");r&&(sessionStorage.channelId=r,sessionStorage.pageId=o)}},init:function(){var e=y.getUrlQuery("src");if(e&&(sessionStorage.src=e),y.getUrlDomain(ye)!==y.getUrlDomain(document.referrer)&&this.parseChannelId(),!y.getCookie("first_ref")&&document.referrer&&y.setCookie("first_ref",document.referrer,we),!window.IntersectionObserver){var t=document.createElement("script");t.src="".concat(u.CDN_BASE_URL,"/cdn/assets/okfe/libs/polyfills/intersection-observer.js"),document.getElementsByTagName("head")[0].appendChild(t)}window.utils||(window.utils={}),window.utils.monitor={get amplitude(){return ge},newInstance:function(e){return new me(e)},saveChannelId:function(e){Ee(e)}}},saveChannelId:function(e){Ee(e)}};A.isInBrowser()&&Oe.init()}]);